/*! For license information please see loader.js.LICENSE.txt */
!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.ViriatoChatbot=t():e.ViriatoChatbot=t()}(this,()=>(()=>{"use strict";var e,t,n,r,o,i,l,u,a,c,s,_={},f=[],p=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i,d=Array.isArray;function h(e,t){for(var n in t)e[n]=t[n];return e}function y(e){e&&e.parentNode&&e.parentNode.removeChild(e)}function v(t,n,r){var o,i,l,u={};for(l in n)"key"==l?o=n[l]:"ref"==l?i=n[l]:u[l]=n[l];if(arguments.length>2&&(u.children=arguments.length>3?e.call(arguments,2):r),"function"==typeof t&&null!=t.defaultProps)for(l in t.defaultProps)void 0===u[l]&&(u[l]=t.defaultProps[l]);return g(t,u,o,i,null)}function g(e,r,o,i,l){var u={type:e,props:r,key:o,ref:i,__k:null,__:null,__b:0,__e:null,__c:null,constructor:void 0,__v:null==l?++n:l,__i:-1,__u:0};return null==l&&null!=t.vnode&&t.vnode(u),u}function b(e){return e.children}function m(e,t){this.props=e,this.context=t}function w(e,t){if(null==t)return e.__?w(e.__,e.__i+1):null;for(var n;t<e.__k.length;t++)if(null!=(n=e.__k[t])&&null!=n.__e)return n.__e;return"function"==typeof e.type?w(e):null}function x(e){var t,n;if(null!=(e=e.__)&&null!=e.__c){for(e.__e=e.__c.base=null,t=0;t<e.__k.length;t++)if(null!=(n=e.__k[t])&&null!=n.__e){e.__e=e.__c.base=n.__e;break}return x(e)}}function k(e){(!e.__d&&(e.__d=!0)&&r.push(e)&&!S.__r++||o!=t.debounceRendering)&&((o=t.debounceRendering)||i)(S)}function S(){for(var e,n,o,i,u,a,c,s=1;r.length;)r.length>s&&r.sort(l),e=r.shift(),s=r.length,e.__d&&(o=void 0,u=(i=(n=e).__v).__e,a=[],c=[],n.__P&&((o=h({},i)).__v=i.__v+1,t.vnode&&t.vnode(o),I(n.__P,o,i,n.__n,n.__P.namespaceURI,32&i.__u?[u]:null,a,null==u?w(i):u,!!(32&i.__u),c),o.__v=i.__v,o.__.__k[o.__i]=o,M(a,o,c),o.__e!=u&&x(o)));S.__r=0}function P(e,t,n,r,o,i,l,u,a,c,s){var p,d,h,y,v,g,b=r&&r.__k||f,m=t.length;for(a=O(n,t,b,a,m),p=0;p<m;p++)null!=(h=n.__k[p])&&(d=-1==h.__i?_:b[h.__i]||_,h.__i=p,g=I(e,h,d,o,i,l,u,a,c,s),y=h.__e,h.ref&&d.ref!=h.ref&&(d.ref&&A(d.ref,null,h),s.push(h.ref,h.__c||y,h)),null==v&&null!=y&&(v=y),4&h.__u||d.__k===h.__k?a=j(h,a,e):"function"==typeof h.type&&void 0!==g?a=g:y&&(a=y.nextSibling),h.__u&=-7);return n.__e=v,a}function O(e,t,n,r,o){var i,l,u,a,c,s=n.length,_=s,f=0;for(e.__k=new Array(o),i=0;i<o;i++)null!=(l=t[i])&&"boolean"!=typeof l&&"function"!=typeof l?(a=i+f,(l=e.__k[i]="string"==typeof l||"number"==typeof l||"bigint"==typeof l||l.constructor==String?g(null,l,null,null,null):d(l)?g(b,{children:l},null,null,null):null==l.constructor&&l.__b>0?g(l.type,l.props,l.key,l.ref?l.ref:null,l.__v):l).__=e,l.__b=e.__b+1,u=null,-1!=(c=l.__i=C(l,n,a,_))&&(_--,(u=n[c])&&(u.__u|=2)),null==u||null==u.__v?(-1==c&&(o>s?f--:o<s&&f++),"function"!=typeof l.type&&(l.__u|=4)):c!=a&&(c==a-1?f--:c==a+1?f++:(c>a?f--:f++,l.__u|=4))):e.__k[i]=null;if(_)for(i=0;i<s;i++)null!=(u=n[i])&&!(2&u.__u)&&(u.__e==r&&(r=w(u)),L(u,u));return r}function j(e,t,n){var r,o;if("function"==typeof e.type){for(r=e.__k,o=0;r&&o<r.length;o++)r[o]&&(r[o].__=e,t=j(r[o],t,n));return t}e.__e!=t&&(t&&e.type&&!n.contains(t)&&(t=w(e)),n.insertBefore(e.__e,t||null),t=e.__e);do{t=t&&t.nextSibling}while(null!=t&&8==t.nodeType);return t}function C(e,t,n,r){var o,i,l=e.key,u=e.type,a=t[n];if(null===a&&null==e.key||a&&l==a.key&&u==a.type&&!(2&a.__u))return n;if(r>(null==a||2&a.__u?0:1))for(o=n-1,i=n+1;o>=0||i<t.length;){if(o>=0){if((a=t[o])&&!(2&a.__u)&&l==a.key&&u==a.type)return o;o--}if(i<t.length){if((a=t[i])&&!(2&a.__u)&&l==a.key&&u==a.type)return i;i++}}return-1}function T(e,t,n){"-"==t[0]?e.setProperty(t,null==n?"":n):e[t]=null==n?"":"number"!=typeof n||p.test(t)?n:n+"px"}function E(e,t,n,r,o){var i,l;e:if("style"==t)if("string"==typeof n)e.style.cssText=n;else{if("string"==typeof r&&(e.style.cssText=r=""),r)for(t in r)n&&t in n||T(e.style,t,"");if(n)for(t in n)r&&n[t]==r[t]||T(e.style,t,n[t])}else if("o"==t[0]&&"n"==t[1])i=t!=(t=t.replace(u,"$1")),l=t.toLowerCase(),t=l in e||"onFocusOut"==t||"onFocusIn"==t?l.slice(2):t.slice(2),e.l||(e.l={}),e.l[t+i]=n,n?r?n.u=r.u:(n.u=a,e.addEventListener(t,i?s:c,i)):e.removeEventListener(t,i?s:c,i);else{if("http://www.w3.org/2000/svg"==o)t=t.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if("width"!=t&&"height"!=t&&"href"!=t&&"list"!=t&&"form"!=t&&"tabIndex"!=t&&"download"!=t&&"rowSpan"!=t&&"colSpan"!=t&&"role"!=t&&"popover"!=t&&t in e)try{e[t]=null==n?"":n;break e}catch(e){}"function"==typeof n||(null==n||!1===n&&"-"!=t[4]?e.removeAttribute(t):e.setAttribute(t,"popover"==t&&1==n?"":n))}}function D(e){return function(n){if(this.l){var r=this.l[n.type+e];if(null==n.t)n.t=a++;else if(n.t<r.u)return;return r(t.event?t.event(n):n)}}}function I(e,n,r,o,i,l,u,a,c,s){var _,f,p,v,g,w,x,k,S,O,j,C,T,E,D,I,M,A=n.type;if(null!=n.constructor)return null;128&r.__u&&(c=!!(32&r.__u),l=[a=n.__e=r.__e]),(_=t.__b)&&_(n);e:if("function"==typeof A)try{if(k=n.props,S="prototype"in A&&A.prototype.render,O=(_=A.contextType)&&o[_.__c],j=_?O?O.props.value:_.__:o,r.__c?x=(f=n.__c=r.__c).__=f.__E:(S?n.__c=f=new A(k,j):(n.__c=f=new m(k,j),f.constructor=A,f.render=N),O&&O.sub(f),f.props=k,f.state||(f.state={}),f.context=j,f.__n=o,p=f.__d=!0,f.__h=[],f._sb=[]),S&&null==f.__s&&(f.__s=f.state),S&&null!=A.getDerivedStateFromProps&&(f.__s==f.state&&(f.__s=h({},f.__s)),h(f.__s,A.getDerivedStateFromProps(k,f.__s))),v=f.props,g=f.state,f.__v=n,p)S&&null==A.getDerivedStateFromProps&&null!=f.componentWillMount&&f.componentWillMount(),S&&null!=f.componentDidMount&&f.__h.push(f.componentDidMount);else{if(S&&null==A.getDerivedStateFromProps&&k!==v&&null!=f.componentWillReceiveProps&&f.componentWillReceiveProps(k,j),!f.__e&&null!=f.shouldComponentUpdate&&!1===f.shouldComponentUpdate(k,f.__s,j)||n.__v==r.__v){for(n.__v!=r.__v&&(f.props=k,f.state=f.__s,f.__d=!1),n.__e=r.__e,n.__k=r.__k,n.__k.some(function(e){e&&(e.__=n)}),C=0;C<f._sb.length;C++)f.__h.push(f._sb[C]);f._sb=[],f.__h.length&&u.push(f);break e}null!=f.componentWillUpdate&&f.componentWillUpdate(k,f.__s,j),S&&null!=f.componentDidUpdate&&f.__h.push(function(){f.componentDidUpdate(v,g,w)})}if(f.context=j,f.props=k,f.__P=e,f.__e=!1,T=t.__r,E=0,S){for(f.state=f.__s,f.__d=!1,T&&T(n),_=f.render(f.props,f.state,f.context),D=0;D<f._sb.length;D++)f.__h.push(f._sb[D]);f._sb=[]}else do{f.__d=!1,T&&T(n),_=f.render(f.props,f.state,f.context),f.state=f.__s}while(f.__d&&++E<25);f.state=f.__s,null!=f.getChildContext&&(o=h(h({},o),f.getChildContext())),S&&!p&&null!=f.getSnapshotBeforeUpdate&&(w=f.getSnapshotBeforeUpdate(v,g)),I=_,null!=_&&_.type===b&&null==_.key&&(I=U(_.props.children)),a=P(e,d(I)?I:[I],n,r,o,i,l,u,a,c,s),f.base=n.__e,n.__u&=-161,f.__h.length&&u.push(f),x&&(f.__E=f.__=null)}catch(e){if(n.__v=null,c||null!=l)if(e.then){for(n.__u|=c?160:128;a&&8==a.nodeType&&a.nextSibling;)a=a.nextSibling;l[l.indexOf(a)]=null,n.__e=a}else for(M=l.length;M--;)y(l[M]);else n.__e=r.__e,n.__k=r.__k;t.__e(e,n,r)}else null==l&&n.__v==r.__v?(n.__k=r.__k,n.__e=r.__e):a=n.__e=F(r.__e,n,r,o,i,l,u,c,s);return(_=t.diffed)&&_(n),128&n.__u?void 0:a}function M(e,n,r){for(var o=0;o<r.length;o++)A(r[o],r[++o],r[++o]);t.__c&&t.__c(n,e),e.some(function(n){try{e=n.__h,n.__h=[],e.some(function(e){e.call(n)})}catch(e){t.__e(e,n.__v)}})}function U(e){return"object"!=typeof e||null==e||e.__b&&e.__b>0?e:d(e)?e.map(U):h({},e)}function F(n,r,o,i,l,u,a,c,s){var f,p,h,v,g,b,m,x=o.props,k=r.props,S=r.type;if("svg"==S?l="http://www.w3.org/2000/svg":"math"==S?l="http://www.w3.org/1998/Math/MathML":l||(l="http://www.w3.org/1999/xhtml"),null!=u)for(f=0;f<u.length;f++)if((g=u[f])&&"setAttribute"in g==!!S&&(S?g.localName==S:3==g.nodeType)){n=g,u[f]=null;break}if(null==n){if(null==S)return document.createTextNode(k);n=document.createElementNS(l,S,k.is&&k),c&&(t.__m&&t.__m(r,u),c=!1),u=null}if(null==S)x===k||c&&n.data==k||(n.data=k);else{if(u=u&&e.call(n.childNodes),x=o.props||_,!c&&null!=u)for(x={},f=0;f<n.attributes.length;f++)x[(g=n.attributes[f]).name]=g.value;for(f in x)if(g=x[f],"children"==f);else if("dangerouslySetInnerHTML"==f)h=g;else if(!(f in k)){if("value"==f&&"defaultValue"in k||"checked"==f&&"defaultChecked"in k)continue;E(n,f,null,g,l)}for(f in k)g=k[f],"children"==f?v=g:"dangerouslySetInnerHTML"==f?p=g:"value"==f?b=g:"checked"==f?m=g:c&&"function"!=typeof g||x[f]===g||E(n,f,g,x[f],l);if(p)c||h&&(p.__html==h.__html||p.__html==n.innerHTML)||(n.innerHTML=p.__html),r.__k=[];else if(h&&(n.innerHTML=""),P("template"==r.type?n.content:n,d(v)?v:[v],r,o,i,"foreignObject"==S?"http://www.w3.org/1999/xhtml":l,u,a,u?u[0]:o.__k&&w(o,0),c,s),null!=u)for(f=u.length;f--;)y(u[f]);c||(f="value","progress"==S&&null==b?n.removeAttribute("value"):null!=b&&(b!==n[f]||"progress"==S&&!b||"option"==S&&b!=x[f])&&E(n,f,b,x[f],l),f="checked",null!=m&&m!=n[f]&&E(n,f,m,x[f],l))}return n}function A(e,n,r){try{if("function"==typeof e){var o="function"==typeof e.__u;o&&e.__u(),o&&null==n||(e.__u=e(n))}else e.current=n}catch(e){t.__e(e,r)}}function L(e,n,r){var o,i;if(t.unmount&&t.unmount(e),(o=e.ref)&&(o.current&&o.current!=e.__e||A(o,null,n)),null!=(o=e.__c)){if(o.componentWillUnmount)try{o.componentWillUnmount()}catch(e){t.__e(e,n)}o.base=o.__P=null}if(o=e.__k)for(i=0;i<o.length;i++)o[i]&&L(o[i],n,r||"function"!=typeof e.type);r||y(e.__e),e.__c=e.__=e.__e=void 0}function N(e,t,n){return this.constructor(e,n)}function R(e){return R="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},R(e)}function V(e){return function(e){if(Array.isArray(e))return W(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return W(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?W(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function W(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function H(){var e,t,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",o=n.toStringTag||"@@toStringTag";function i(n,r,o,i){var a=r&&r.prototype instanceof u?r:u,c=Object.create(a.prototype);return B(c,"_invoke",function(n,r,o){var i,u,a,c=0,s=o||[],_=!1,f={p:0,n:0,v:e,a:p,f:p.bind(e,4),d:function(t,n){return i=t,u=0,a=e,f.n=n,l}};function p(n,r){for(u=n,a=r,t=0;!_&&c&&!o&&t<s.length;t++){var o,i=s[t],p=f.p,d=i[2];n>3?(o=d===r)&&(a=i[(u=i[4])?5:(u=3,3)],i[4]=i[5]=e):i[0]<=p&&((o=n<2&&p<i[1])?(u=0,f.v=r,f.n=i[1]):p<d&&(o=n<3||i[0]>r||r>d)&&(i[4]=n,i[5]=r,f.n=d,u=0))}if(o||n>1)return l;throw _=!0,r}return function(o,s,d){if(c>1)throw TypeError("Generator is already running");for(_&&1===s&&p(s,d),u=s,a=d;(t=u<2?e:a)||!_;){i||(u?u<3?(u>1&&(f.n=-1),p(u,a)):f.n=a:f.v=a);try{if(c=2,i){if(u||(o="next"),t=i[o]){if(!(t=t.call(i,a)))throw TypeError("iterator result is not an object");if(!t.done)return t;a=t.value,u<2&&(u=0)}else 1===u&&(t=i.return)&&t.call(i),u<2&&(a=TypeError("The iterator does not provide a '"+o+"' method"),u=1);i=e}else if((t=(_=f.n<0)?a:n.call(r,f))!==l)break}catch(t){i=e,u=1,a=t}finally{c=1}}return{value:t,done:_}}}(n,o,i),!0),c}var l={};function u(){}function a(){}function c(){}t=Object.getPrototypeOf;var s=[][r]?t(t([][r]())):(B(t={},r,function(){return this}),t),_=c.prototype=u.prototype=Object.create(s);function f(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,c):(e.__proto__=c,B(e,o,"GeneratorFunction")),e.prototype=Object.create(_),e}return a.prototype=c,B(_,"constructor",c),B(c,"constructor",a),a.displayName="GeneratorFunction",B(c,o,"GeneratorFunction"),B(_),B(_,o,"Generator"),B(_,r,function(){return this}),B(_,"toString",function(){return"[object Generator]"}),(H=function(){return{w:i,m:f}})()}function B(e,t,n,r){var o=Object.defineProperty;try{o({},"",{})}catch(e){o=0}B=function(e,t,n,r){if(t)o?o(e,t,{value:n,enumerable:!r,configurable:!r,writable:!r}):e[t]=n;else{var i=function(t,n){B(e,t,function(e){return this._invoke(t,n,e)})};i("next",0),i("throw",1),i("return",2)}},B(e,t,n,r)}function G(e,t,n,r,o,i,l){try{var u=e[i](l),a=u.value}catch(e){return void n(e)}u.done?t(a):Promise.resolve(a).then(r,o)}function $(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var i=e.apply(t,n);function l(e){G(i,r,o,l,u,"next",e)}function u(e){G(i,r,o,l,u,"throw",e)}l(void 0)})}}function z(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,X(r.key),r)}}function K(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(K=function(){return!!e})()}function q(e){return q=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},q(e)}function J(e,t){return J=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},J(e,t)}function Q(e,t,n){return(t=X(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function X(e){var t=function(e){if("object"!=R(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=R(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==R(t)?t:t+""}e=f.slice,t={__e:function(e,t,n,r){for(var o,i,l;t=t.__;)if((o=t.__c)&&!o.__)try{if((i=o.constructor)&&null!=i.getDerivedStateFromError&&(o.setState(i.getDerivedStateFromError(e)),l=o.__d),null!=o.componentDidCatch&&(o.componentDidCatch(e,r||{}),l=o.__d),l)return o.__E=o}catch(t){e=t}throw e}},n=0,m.prototype.setState=function(e,t){var n;n=null!=this.__s&&this.__s!=this.state?this.__s:this.__s=h({},this.state),"function"==typeof e&&(e=e(h({},n),this.props)),e&&h(n,e),null!=e&&this.__v&&(t&&this._sb.push(t),k(this))},m.prototype.forceUpdate=function(e){this.__v&&(this.__e=!0,e&&this.__h.push(e),k(this))},m.prototype.render=b,r=[],i="function"==typeof Promise?Promise.prototype.then.bind(Promise.resolve()):setTimeout,l=function(e,t){return e.__v.__b-t.__v.__b},S.__r=0,u=/(PointerCapture)$|Capture$/i,a=0,c=D(!1),s=D(!0);var Y=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),Q(n=function(e,t,n){return t=q(t),function(e,t){if(t&&("object"==R(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,K()?Reflect.construct(t,n||[],q(e).constructor):t.apply(e,n))}(this,t,[e]),"loadConfig",$(H().m(function e(){var t,r,o,i,l,u,a,c;return H().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,r=n.props.config||{},o=r.clientId,i=void 0===o?"default":o,l=r.apiUrl,e.n=1,fetch("".concat(l,"/api/v1/widget/config/").concat(i));case 1:if((u=e.v).ok){e.n=2;break}throw new Error("Failed to load configuration");case 2:return e.n=3,u.json();case 3:a=e.v,n.setState({config:a,messages:[{id:Date.now(),text:(null===(t=a.widgetSettings)||void 0===t?void 0:t.welcomeMessage)||"Hello! How can I help you?",sender:"bot",timestamp:new Date}]}),e.n=5;break;case 4:e.p=4,c=e.v,console.error("Widget config error:",c),n.setState({error:"Failed to load chatbot configuration"});case 5:return e.a(2)}},e,null,[[0,4]])}))),Q(n,"toggleChat",function(){n.setState(function(e){return{isOpen:!e.isOpen}})}),Q(n,"sendMessage",$(H().m(function e(){var t,r,o,i,l,u,a,c,s,_,f,p;return H().w(function(e){for(;;)switch(e.p=e.n){case 0:if(t=n.state,r=t.inputValue,o=t.messages,t.config,i=n.props.config||{},l=i.apiUrl,r.trim()){e.n=1;break}return e.a(2);case 1:return u={id:Date.now(),text:r,sender:"user",timestamp:new Date},n.setState({messages:[].concat(V(o),[u]),inputValue:"",isTyping:!0}),e.p=2,e.n=3,fetch("".concat(l,"/api/v1/chat"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({message:r,context:o.slice(-5),clientId:(null===(a=n.props.config)||void 0===a?void 0:a.clientId)||"default"})});case 3:if((c=e.v).ok){e.n=4;break}throw new Error("Failed to get response");case 4:return e.n=5,c.json();case 5:s=e.v,_={id:Date.now()+1,text:s.response||"Sorry, I encountered an error.",sender:"bot",timestamp:new Date},n.setState(function(e){return{messages:[].concat(V(e.messages),[_]),isTyping:!1}}),e.n=7;break;case 6:e.p=6,p=e.v,console.error("Chat error:",p),f={id:Date.now()+1,text:"Sorry, I'm having trouble responding right now. Please try again.",sender:"bot",timestamp:new Date},n.setState(function(e){return{messages:[].concat(V(e.messages),[f]),isTyping:!1}});case 7:return e.a(2)}},e,null,[[2,6]])}))),Q(n,"handleKeyPress",function(e){"Enter"===e.key&&n.sendMessage()}),n.state={isOpen:!1,messages:[],inputValue:"",isTyping:!1,config:null,error:null},n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&J(e,t)}(t,e),function(e,t){return t&&z(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}(t,[{key:"componentDidMount",value:function(){this.loadConfig()}},{key:"render",value:function(){var e,t,n,r=this,o=this.state,i=o.isOpen,l=o.messages,u=o.inputValue,a=o.isTyping,c=o.config,s=o.error;if(s)return v("div",{style:"color: red; padding: 10px;"},s);if(!c)return v("div",{style:"padding: 10px;"},"Loading...");var _=(null===(e=c.widgetSettings)||void 0===e?void 0:e.primaryColor)||"#007bff",f=(null===(t=c.widgetSettings)||void 0===t?void 0:t.chatIcon)||"💬";return v(b,null,v("button",{onClick:this.toggleChat,style:"\n          width: 60px;\n          height: 60px;\n          border-radius: 50%;\n          background: ".concat(_,";\n          color: white;\n          border: none;\n          cursor: pointer;\n          font-size: 24px;\n          box-shadow: 0 4px 12px rgba(0,0,0,0.15);\n          transition: transform 0.2s;\n        "),onMouseOver:function(e){return e.target.style.transform="scale(1.1)"},onMouseOut:function(e){return e.target.style.transform="scale(1)"}},f),i&&v("div",{style:"\n          position: absolute;\n          bottom: 70px;\n          right: 0;\n          width: 350px;\n          height: 500px;\n          background: white;\n          border-radius: 12px;\n          box-shadow: 0 8px 24px rgba(0,0,0,0.15);\n          display: flex;\n          flex-direction: column;\n          overflow: hidden;\n        "},[v("div",{style:"\n            background: ".concat(_,";\n            color: white;\n            padding: 16px;\n            display: flex;\n            justify-content: space-between;\n            align-items: center;\n          ")},[v("h3",{style:"margin: 0; font-size: 16px;"},(null===(n=c.widgetSettings)||void 0===n?void 0:n.headerText)||"Chat with us!"),v("button",{onClick:this.toggleChat,style:"\n              background: none;\n              border: none;\n              color: white;\n              font-size: 20px;\n              cursor: pointer;\n              padding: 0;\n              width: 24px;\n              height: 24px;\n            "},"×")]),v("div",{style:"\n            flex: 1;\n            overflow-y: auto;\n            padding: 16px;\n            display: flex;\n            flex-direction: column;\n            gap: 12px;\n          "},[].concat(V(l.map(function(e){return v("div",{key:e.id,style:"\n                align-self: ".concat("user"===e.sender?"flex-end":"flex-start",";\n                background: ").concat("user"===e.sender?_:"#f1f1f1",";\n                color: ").concat("user"===e.sender?"white":"black",";\n                padding: 8px 12px;\n                border-radius: 12px;\n                max-width: 80%;\n                word-wrap: break-word;\n              ")},e.text)})),[a&&v("div",{style:"align-self: flex-start; color: #666; font-style: italic;"},"Typing...")])),v("div",{style:"\n            padding: 16px;\n            border-top: 1px solid #eee;\n            display: flex;\n            gap: 8px;\n          "},[v("input",{type:"text",value:u,onInput:function(e){return r.setState({inputValue:e.target.value})},onKeyPress:this.handleKeyPress,placeholder:"Type your message...",style:"\n              flex: 1;\n              padding: 8px 12px;\n              border: 1px solid #ddd;\n              border-radius: 20px;\n              outline: none;\n            "}),v("button",{onClick:this.sendMessage,disabled:!u.trim(),style:"\n              background: ".concat(_,";\n              color: white;\n              border: none;\n              padding: 8px 16px;\n              border-radius: 20px;\n              cursor: pointer;\n              opacity: ").concat(u.trim()?"1":"0.5",";\n            ")},"Send")])]))}}])}(m);const Z=Y;return window.initViriatoChatbot=function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=document.getElementById("viriato-chatbot-container");r||((r=document.createElement("div")).id="viriato-chatbot-container",r.style.cssText="\n      position: fixed;\n      bottom: 20px;\n      right: 20px;\n      z-index: 999999;\n      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;\n    ",document.body.appendChild(r)),function(n,r,o){var i,l,u,a;r==document&&(r=document.documentElement),t.__&&t.__(n,r),l=(i="function"==typeof o)?null:o&&o.__k||r.__k,u=[],a=[],I(r,n=(!i&&o||r).__k=v(b,null,[n]),l||_,_,r.namespaceURI,!i&&o?[o]:l?null:r.firstChild?e.call(r.childNodes):null,u,!i&&o?o:l?l.__e:r.firstChild,i,a),M(u,n,a)}(v(Z,{config:n}),r)},document.addEventListener("DOMContentLoaded",function(){var e=document.querySelector('script[src*="loader.js"]');if(e&&"false"!==e.dataset.autoInit){var t={clientId:e.dataset.clientId||"default",apiUrl:e.dataset.apiUrl||"https://your-domain.vercel.app"};window.initViriatoChatbot(t)}}),{}})());