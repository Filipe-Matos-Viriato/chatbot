/*! For license information please see loader.js.LICENSE.txt */
!function(n,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.ViriatoChatbot=e():n.ViriatoChatbot=e()}(this,()=>(()=>{"use strict";var n={51:n=>{n.exports=function(n){var e=document.createElement("style");return n.setAttributes(e,n.attributes),n.insert(e,n.options),e}},128:n=>{var e={};n.exports=function(n,t){var o=function(n){if(void 0===e[n]){var t=document.querySelector(n);if(window.HTMLIFrameElement&&t instanceof window.HTMLIFrameElement)try{t=t.contentDocument.head}catch(n){t=null}e[n]=t}return e[n]}(n);if(!o)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");o.appendChild(t)}},591:n=>{var e=[];function t(n){for(var t=-1,o=0;o<e.length;o++)if(e[o].identifier===n){t=o;break}return t}function o(n,o){for(var i={},a=[],s=0;s<n.length;s++){var l=n[s],c=o.base?l[0]+o.base:l[0],u=i[c]||0,p="".concat(c," ").concat(u);i[c]=u+1;var d=t(p),f={css:l[1],media:l[2],sourceMap:l[3],supports:l[4],layer:l[5]};if(-1!==d)e[d].references++,e[d].updater(f);else{var g=r(f,o);o.byIndex=s,e.splice(s,0,{identifier:p,updater:g,references:1})}a.push(p)}return a}function r(n,e){var t=e.domAPI(e);return t.update(n),function(e){if(e){if(e.css===n.css&&e.media===n.media&&e.sourceMap===n.sourceMap&&e.supports===n.supports&&e.layer===n.layer)return;t.update(n=e)}else t.remove()}}n.exports=function(n,r){var i=o(n=n||[],r=r||{});return function(n){n=n||[];for(var a=0;a<i.length;a++){var s=t(i[a]);e[s].references--}for(var l=o(n,r),c=0;c<i.length;c++){var u=t(i[c]);0===e[u].references&&(e[u].updater(),e.splice(u,1))}i=l}}},598:(n,e,t)=>{t.d(e,{A:()=>s});var o=t(758),r=t.n(o),i=t(935),a=t.n(i)()(r());a.push([n.id,"/* Widget animations and responsive styles */\n@keyframes pulse {\n  0%, 100% {\n    opacity: 0.4;\n    transform: scale(0.8);\n  }\n  50% {\n    opacity: 1;\n    transform: scale(1);\n  }\n}\n\n@keyframes slideUp {\n  from {\n    opacity: 0;\n    transform: translateY(20px);\n  }\n  to {\n    opacity: 1;\n    transform: translateY(0);\n  }\n}\n\n@keyframes fadeIn {\n  from {\n    opacity: 0;\n  }\n  to {\n    opacity: 1;\n  }\n}\n\n/* Widget container responsive adjustments */\n.widget-container {\n  animation: fadeIn 0.3s ease-out;\n}\n\n.widget-chat-window {\n  animation: slideUp 0.3s cubic-bezier(0.4, 0.0, 0.2, 1);\n}\n\n.widget-message {\n  animation: slideUp 0.2s ease-out;\n}\n\n/* Custom scrollbar for messages */\n.widget-messages::-webkit-scrollbar {\n  width: 6px;\n}\n\n.widget-messages::-webkit-scrollbar-track {\n  background: #f1f5f9;\n  border-radius: 3px;\n}\n\n.widget-messages::-webkit-scrollbar-thumb {\n  background: #cbd5e1;\n  border-radius: 3px;\n}\n\n.widget-messages::-webkit-scrollbar-thumb:hover {\n  background: #94a3b8;\n}\n\n/* Focus styles for accessibility */\n.widget-input:focus {\n  border-color: #3f3f3f !important;\n  box-shadow: 0 0 0 3px rgba(255, 255, 255, 0.1) !important;\n}\n\n.widget-button:focus {\n  outline: 2px solid #3f3f3f !important;\n  outline-offset: 2px;\n}\n\n/* High contrast mode support */\n@media (prefers-contrast: high) {\n  .widget-message-bot {\n    border: 2px solid #000;\n  }\n  \n  .widget-message-user {\n    border: 2px solid #fff;\n  }\n}\n\n/* Reduced motion support */\n@media (prefers-reduced-motion: reduce) {\n  * {\n    animation-duration: 0.01ms !important;\n    animation-iteration-count: 1 !important;\n    transition-duration: 0.01ms !important;\n  }\n}\n\n/* Mobile-specific adjustments */\n@media (max-width: 768px) {\n  .widget-chat-window {\n    border-radius: 0 !important;\n    box-shadow: none !important;\n  }\n  \n  .widget-input {\n    font-size: 16px !important; /* Prevent zoom on iOS */\n  }\n}\n\n/* Onboarding Modal Styles */\n.onboarding-overlay {\n  position: fixed;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  background-color: rgba(0, 0, 0, 0.7);\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  z-index: 1000000;\n  padding: 20px;\n  box-sizing: border-box;\n}\n\n.onboarding-modal {\n  background: rgba(20, 20, 20, .9) !important;\n  color: white !important;\n  border: 1px solid #3f3f3f !important;\n  border-radius: 0 !important;\n  box-shadow: 0 25px 50px rgba(0, 0, 0, 0.25);\n  width: 100%;\n  max-width: 500px;\n  max-height: 90vh;\n  display: flex;\n  flex-direction: column;\n  overflow: hidden;\n  animation: onboardingSlideIn 0.3s ease-out;\n}\n\n@keyframes onboardingSlideIn {\n  from {\n    opacity: 0;\n    transform: scale(0.9) translateY(20px);\n  }\n  to {\n    opacity: 1;\n    transform: scale(1) translateY(0);\n  }\n}\n\n.onboarding-header {\n  padding: 32px 32px 24px;\n  border-bottom: 1px solid #3f3f3f !important;\n  text-align: center;\n}\n\n.onboarding-title {\n  margin: 0 0 8px;\n  font-size: 24px;\n  font-weight: 700;\n  color: white !important;\n  line-height: 1.3;\n}\n\n.onboarding-subtitle {\n  margin: 0 0 20px;\n  font-size: 16px;\n  color: white !important;\n  line-height: 1.5;\n}\n\n.onboarding-progress {\n  position: relative;\n  height: 6px;\n  background-color: rgba(20, 20, 20, .9) !important;\n  border: 1px solid #3f3f3f !important;\n  border-radius: 0 !important;\n  overflow: hidden;\n}\n\n.onboarding-progress-bar {\n  height: 100%;\n  background: white !important;\n  border-radius: 0 !important;\n  transition: width 0.3s ease;\n}\n\n.onboarding-progress-text {\n  position: absolute;\n  top: 12px;\n  right: 0;\n  font-size: 12px;\n  color: white !important;\n  font-weight: 500;\n}\n\n.onboarding-content {\n  flex: 1;\n  padding: 32px;\n  overflow-y: auto;\n}\n\n.onboarding-question {\n  max-width: 100%;\n}\n\n.question-text {\n  margin: 0 0 24px;\n  font-size: 18px;\n  font-weight: 600;\n  color: white !important;\n  line-height: 1.4;\n}\n\n.required-asterisk {\n  color: #ef4444;\n}\n\n.onboarding-options {\n  display: flex;\n  flex-direction: column;\n  gap: 12px;\n}\n\n.onboarding-option {\n  display: flex;\n  align-items: center;\n  padding: 16px;\n  border: 1px solid #3f3f3f !important;\n  border-radius: 0 !important;\n  cursor: pointer;\n  transition: all 0.2s ease;\n  background: rgba(20, 20, 20, .9) !important;\n}\n\n.onboarding-option:hover {\n  border-color: #3f3f3f !important;\n  background: rgba(20, 20, 20, .9) !important;\n}\n\n.onboarding-option.selected {\n  border-color: #3f3f3f !important;\n  background: rgba(20, 20, 20, .9) !important;\n}\n\n.onboarding-option input {\n  margin: 0 12px 0 0;\n  accent-color: #6b7280 !important;\n}\n\n.option-label {\n  font-size: 15px;\n  color: white !important;\n  line-height: 1.4;\n  flex: 1;\n}\n\n.onboarding-text-input {\n  width: 100%;\n  padding: 16px;\n  border: 1px solid #3f3f3f !important;\n  border-radius: 0 !important;\n  font-size: 16px;\n  color: white !important;\n  background: rgba(20, 20, 20, .9) !important;\n  box-sizing: border-box;\n  transition: border-color 0.2s ease;\n}\n\n.onboarding-text-input:focus {\n  outline: none;\n  border-color: #3f3f3f !important;\n  box-shadow: 0 0 0 3px rgba(255, 255, 255, 0.1) !important;\n}\n\n.onboarding-text-input::placeholder {\n  color: white !important;\n}\n\n.onboarding-footer {\n  padding: 24px 32px 32px;\n  border-top: 1px solid #3f3f3f !important;\n  background: rgba(20, 20, 20, .9) !important;\n}\n\n.onboarding-buttons {\n  display: flex;\n  gap: 12px;\n  justify-content: space-between;\n  align-items: center;\n}\n\n.onboarding-button {\n  padding: 12px 24px;\n  border-radius: 0 !important;\n  border: 1px solid #3f3f3f !important;\n  font-size: 14px;\n  font-weight: 600;\n  cursor: pointer;\n  transition: all 0.2s ease;\n  display: flex;\n  align-items: center;\n  gap: 8px;\n  white-space: nowrap;\n}\n\n.onboarding-button-primary {\n  background: rgba(20, 20, 20, .9) !important;\n  color: white !important;\n}\n\n.onboarding-button-primary:hover:not(:disabled) {\n  background: rgba(20, 20, 20, .9) !important;\n  transform: translateY(-1px);\n  box-shadow: 0 4px 12px rgba(255, 255, 255, 0.4);\n}\n\n.onboarding-button-primary.disabled,\n.onboarding-button-primary:disabled {\n  background: rgba(20, 20, 20, .9) !important;\n  cursor: not-allowed;\n  transform: none;\n  box-shadow: none;\n}\n\n.onboarding-button-secondary {\n  background: rgba(20, 20, 20, .9) !important;\n  color: white !important;\n  border: 1px solid #3f3f3f !important;\n}\n\n.onboarding-button-secondary:hover:not(:disabled) {\n  background: rgba(20, 20, 20, .9) !important;\n  border-color: #3f3f3f !important;\n}\n\n.onboarding-button-text {\n  background: transparent;\n  color: white !important;\n  text-decoration: underline;\n  padding: 8px 16px;\n}\n\n.onboarding-button-text:hover:not(:disabled) {\n  color: white !important;\n}\n\n.onboarding-error {\n  margin-top: 16px;\n  padding: 12px 16px;\n  background: rgba(20, 20, 20, .9) !important;\n  border: 1px solid #3f3f3f !important;\n  border-radius: 0 !important;\n  color: white !important;\n  font-size: 14px;\n}\n\n.loading-spinner {\n  width: 16px;\n  height: 16px;\n  border: 2px solid transparent;\n  border-top: 2px solid currentColor;\n  border-radius: 50%;\n  animation: spin 1s linear infinite;\n}\n\n@keyframes spin {\n  to {\n    transform: rotate(360deg);\n  }\n}\n\n/* Mobile optimizations for onboarding */\n@media (max-width: 768px) {\n  .onboarding-overlay {\n    padding: 16px;\n  }\n  \n  .onboarding-modal {\n    max-height: 95vh;\n    border-radius: 0 !important;\n  }\n  \n  .onboarding-header {\n    padding: 24px 24px 20px;\n  }\n  \n  .onboarding-title {\n    font-size: 20px;\n  }\n  \n  .onboarding-subtitle {\n    font-size: 14px;\n  }\n  \n  .onboarding-content {\n    padding: 24px;\n  }\n  \n  .question-text {\n    font-size: 16px;\n    margin-bottom: 20px;\n  }\n  \n  .onboarding-option {\n    padding: 14px;\n  }\n  \n  .option-label {\n    font-size: 14px;\n  }\n  \n  .onboarding-footer {\n    padding: 20px 24px 24px;\n  }\n  \n  .onboarding-buttons {\n    flex-direction: column;\n    gap: 8px;\n  }\n  \n  .onboarding-button {\n    width: 100%;\n    justify-content: center;\n    padding: 14px 24px;\n  }\n} ",""]);const s=a},656:n=>{n.exports=function(n,e){if(e.styleSheet)e.styleSheet.cssText=n;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(n))}}},740:n=>{n.exports=function(n){if("undefined"==typeof document)return{update:function(){},remove:function(){}};var e=n.insertStyleElement(n);return{update:function(t){!function(n,e,t){var o="";t.supports&&(o+="@supports (".concat(t.supports,") {")),t.media&&(o+="@media ".concat(t.media," {"));var r=void 0!==t.layer;r&&(o+="@layer".concat(t.layer.length>0?" ".concat(t.layer):""," {")),o+=t.css,r&&(o+="}"),t.media&&(o+="}"),t.supports&&(o+="}");var i=t.sourceMap;i&&"undefined"!=typeof btoa&&(o+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(i))))," */")),e.styleTagTransform(o,n,e.options)}(e,n,t)},remove:function(){!function(n){if(null===n.parentNode)return!1;n.parentNode.removeChild(n)}(e)}}}},758:n=>{n.exports=function(n){return n[1]}},855:(n,e,t)=>{n.exports=function(n){var e=t.nc;e&&n.setAttribute("nonce",e)}},935:n=>{n.exports=function(n){var e=[];return e.toString=function(){return this.map(function(e){var t="",o=void 0!==e[5];return e[4]&&(t+="@supports (".concat(e[4],") {")),e[2]&&(t+="@media ".concat(e[2]," {")),o&&(t+="@layer".concat(e[5].length>0?" ".concat(e[5]):""," {")),t+=n(e),o&&(t+="}"),e[2]&&(t+="}"),e[4]&&(t+="}"),t}).join("")},e.i=function(n,t,o,r,i){"string"==typeof n&&(n=[[null,n,void 0]]);var a={};if(o)for(var s=0;s<this.length;s++){var l=this[s][0];null!=l&&(a[l]=!0)}for(var c=0;c<n.length;c++){var u=[].concat(n[c]);o&&a[u[0]]||(void 0!==i&&(void 0===u[5]||(u[1]="@layer".concat(u[5].length>0?" ".concat(u[5]):""," {").concat(u[1],"}")),u[5]=i),t&&(u[2]?(u[1]="@media ".concat(u[2]," {").concat(u[1],"}"),u[2]=t):u[2]=t),r&&(u[4]?(u[1]="@supports (".concat(u[4],") {").concat(u[1],"}"),u[4]=r):u[4]="".concat(r)),e.push(u))}},e}}},e={};function t(o){var r=e[o];if(void 0!==r)return r.exports;var i=e[o]={id:o,exports:{}};return n[o](i,i.exports,t),i.exports}t.n=n=>{var e=n&&n.__esModule?()=>n.default:()=>n;return t.d(e,{a:e}),e},t.d=(n,e)=>{for(var o in e)t.o(e,o)&&!t.o(n,o)&&Object.defineProperty(n,o,{enumerable:!0,get:e[o]})},t.o=(n,e)=>Object.prototype.hasOwnProperty.call(n,e),t.nc=void 0;var o,r,i,a,s,l,c,u,p,d,f,g={},b=[],m=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i,h=Array.isArray;function _(n,e){for(var t in e)n[t]=e[t];return n}function x(n){n&&n.parentNode&&n.parentNode.removeChild(n)}function y(n,e,t){var r,i,a,s={};for(a in e)"key"==a?r=e[a]:"ref"==a?i=e[a]:s[a]=e[a];if(arguments.length>2&&(s.children=arguments.length>3?o.call(arguments,2):t),"function"==typeof n&&null!=n.defaultProps)for(a in n.defaultProps)void 0===s[a]&&(s[a]=n.defaultProps[a]);return v(n,s,r,i,null)}function v(n,e,t,o,a){var s={type:n,props:e,key:t,ref:o,__k:null,__:null,__b:0,__e:null,__c:null,constructor:void 0,__v:null==a?++i:a,__i:-1,__u:0};return null==a&&null!=r.vnode&&r.vnode(s),s}function w(n){return n.children}function k(n,e){this.props=n,this.context=e}function O(n,e){if(null==e)return n.__?O(n.__,n.__i+1):null;for(var t;e<n.__k.length;e++)if(null!=(t=n.__k[e])&&null!=t.__e)return t.__e;return"function"==typeof n.type?O(n):null}function S(n){var e,t;if(null!=(n=n.__)&&null!=n.__c){for(n.__e=n.__c.base=null,e=0;e<n.__k.length;e++)if(null!=(t=n.__k[e])&&null!=t.__e){n.__e=n.__c.base=t.__e;break}return S(n)}}function C(n){(!n.__d&&(n.__d=!0)&&a.push(n)&&!j.__r++||s!=r.debounceRendering)&&((s=r.debounceRendering)||l)(j)}function j(){for(var n,e,t,o,i,s,l,u=1;a.length;)a.length>u&&a.sort(c),n=a.shift(),u=a.length,n.__d&&(t=void 0,i=(o=(e=n).__v).__e,s=[],l=[],e.__P&&((t=_({},o)).__v=o.__v+1,r.vnode&&r.vnode(t),D(e.__P,t,o,e.__n,e.__P.namespaceURI,32&o.__u?[i]:null,s,null==i?O(o):i,!!(32&o.__u),l),t.__v=o.__v,t.__.__k[t.__i]=t,R(s,t,l),t.__e!=i&&S(t)));j.__r=0}function I(n,e,t,o,r,i,a,s,l,c,u){var p,d,f,m,h,_,x=o&&o.__k||b,y=e.length;for(l=T(t,e,x,l,y),p=0;p<y;p++)null!=(f=t.__k[p])&&(d=-1==f.__i?g:x[f.__i]||g,f.__i=p,_=D(n,f,d,r,i,a,s,l,c,u),m=f.__e,f.ref&&d.ref!=f.ref&&(d.ref&&q(d.ref,null,f),u.push(f.ref,f.__c||m,f)),null==h&&null!=m&&(h=m),4&f.__u||d.__k===f.__k?l=P(f,l,n):"function"==typeof f.type&&void 0!==_?l=_:m&&(l=m.nextSibling),f.__u&=-7);return t.__e=h,l}function T(n,e,t,o,r){var i,a,s,l,c,u=t.length,p=u,d=0;for(n.__k=new Array(r),i=0;i<r;i++)null!=(a=e[i])&&"boolean"!=typeof a&&"function"!=typeof a?(l=i+d,(a=n.__k[i]="string"==typeof a||"number"==typeof a||"bigint"==typeof a||a.constructor==String?v(null,a,null,null,null):h(a)?v(w,{children:a},null,null,null):null==a.constructor&&a.__b>0?v(a.type,a.props,a.key,a.ref?a.ref:null,a.__v):a).__=n,a.__b=n.__b+1,s=null,-1!=(c=a.__i=A(a,t,l,p))&&(p--,(s=t[c])&&(s.__u|=2)),null==s||null==s.__v?(-1==c&&(r>u?d--:r<u&&d++),"function"!=typeof a.type&&(a.__u|=4)):c!=l&&(c==l-1?d--:c==l+1?d++:(c>l?d--:d++,a.__u|=4))):n.__k[i]=null;if(p)for(i=0;i<u;i++)null!=(s=t[i])&&!(2&s.__u)&&(s.__e==o&&(o=O(s)),F(s,s));return o}function P(n,e,t){var o,r;if("function"==typeof n.type){for(o=n.__k,r=0;o&&r<o.length;r++)o[r]&&(o[r].__=n,e=P(o[r],e,t));return e}n.__e!=e&&(e&&n.type&&!t.contains(e)&&(e=O(n)),t.insertBefore(n.__e,e||null),e=n.__e);do{e=e&&e.nextSibling}while(null!=e&&8==e.nodeType);return e}function A(n,e,t,o){var r,i,a=n.key,s=n.type,l=e[t];if(null===l&&null==n.key||l&&a==l.key&&s==l.type&&!(2&l.__u))return t;if(o>(null==l||2&l.__u?0:1))for(r=t-1,i=t+1;r>=0||i<e.length;){if(r>=0){if((l=e[r])&&!(2&l.__u)&&a==l.key&&s==l.type)return r;r--}if(i<e.length){if((l=e[i])&&!(2&l.__u)&&a==l.key&&s==l.type)return i;i++}}return-1}function z(n,e,t){"-"==e[0]?n.setProperty(e,null==t?"":t):n[e]=null==t?"":"number"!=typeof t||m.test(e)?t:t+"px"}function M(n,e,t,o,r){var i,a;n:if("style"==e)if("string"==typeof t)n.style.cssText=t;else{if("string"==typeof o&&(n.style.cssText=o=""),o)for(e in o)t&&e in t||z(n.style,e,"");if(t)for(e in t)o&&t[e]==o[e]||z(n.style,e,t[e])}else if("o"==e[0]&&"n"==e[1])i=e!=(e=e.replace(u,"$1")),a=e.toLowerCase(),e=a in n||"onFocusOut"==e||"onFocusIn"==e?a.slice(2):e.slice(2),n.l||(n.l={}),n.l[e+i]=t,t?o?t.u=o.u:(t.u=p,n.addEventListener(e,i?f:d,i)):n.removeEventListener(e,i?f:d,i);else{if("http://www.w3.org/2000/svg"==r)e=e.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if("width"!=e&&"height"!=e&&"href"!=e&&"list"!=e&&"form"!=e&&"tabIndex"!=e&&"download"!=e&&"rowSpan"!=e&&"colSpan"!=e&&"role"!=e&&"popover"!=e&&e in n)try{n[e]=null==t?"":t;break n}catch(n){}"function"==typeof t||(null==t||!1===t&&"-"!=e[4]?n.removeAttribute(e):n.setAttribute(e,"popover"==e&&1==t?"":t))}}function E(n){return function(e){if(this.l){var t=this.l[e.type+n];if(null==e.t)e.t=p++;else if(e.t<t.u)return;return t(r.event?r.event(e):e)}}}function D(n,e,t,o,i,a,s,l,c,u){var p,d,f,g,b,m,y,v,O,S,C,j,T,P,A,z,M,E=e.type;if(null!=e.constructor)return null;128&t.__u&&(c=!!(32&t.__u),a=[l=e.__e=t.__e]),(p=r.__b)&&p(e);n:if("function"==typeof E)try{if(v=e.props,O="prototype"in E&&E.prototype.render,S=(p=E.contextType)&&o[p.__c],C=p?S?S.props.value:p.__:o,t.__c?y=(d=e.__c=t.__c).__=d.__E:(O?e.__c=d=new E(v,C):(e.__c=d=new k(v,C),d.constructor=E,d.render=N),S&&S.sub(d),d.props=v,d.state||(d.state={}),d.context=C,d.__n=o,f=d.__d=!0,d.__h=[],d._sb=[]),O&&null==d.__s&&(d.__s=d.state),O&&null!=E.getDerivedStateFromProps&&(d.__s==d.state&&(d.__s=_({},d.__s)),_(d.__s,E.getDerivedStateFromProps(v,d.__s))),g=d.props,b=d.state,d.__v=e,f)O&&null==E.getDerivedStateFromProps&&null!=d.componentWillMount&&d.componentWillMount(),O&&null!=d.componentDidMount&&d.__h.push(d.componentDidMount);else{if(O&&null==E.getDerivedStateFromProps&&v!==g&&null!=d.componentWillReceiveProps&&d.componentWillReceiveProps(v,C),!d.__e&&null!=d.shouldComponentUpdate&&!1===d.shouldComponentUpdate(v,d.__s,C)||e.__v==t.__v){for(e.__v!=t.__v&&(d.props=v,d.state=d.__s,d.__d=!1),e.__e=t.__e,e.__k=t.__k,e.__k.some(function(n){n&&(n.__=e)}),j=0;j<d._sb.length;j++)d.__h.push(d._sb[j]);d._sb=[],d.__h.length&&s.push(d);break n}null!=d.componentWillUpdate&&d.componentWillUpdate(v,d.__s,C),O&&null!=d.componentDidUpdate&&d.__h.push(function(){d.componentDidUpdate(g,b,m)})}if(d.context=C,d.props=v,d.__P=n,d.__e=!1,T=r.__r,P=0,O){for(d.state=d.__s,d.__d=!1,T&&T(e),p=d.render(d.props,d.state,d.context),A=0;A<d._sb.length;A++)d.__h.push(d._sb[A]);d._sb=[]}else do{d.__d=!1,T&&T(e),p=d.render(d.props,d.state,d.context),d.state=d.__s}while(d.__d&&++P<25);d.state=d.__s,null!=d.getChildContext&&(o=_(_({},o),d.getChildContext())),O&&!f&&null!=d.getSnapshotBeforeUpdate&&(m=d.getSnapshotBeforeUpdate(g,b)),z=p,null!=p&&p.type===w&&null==p.key&&(z=L(p.props.children)),l=I(n,h(z)?z:[z],e,t,o,i,a,s,l,c,u),d.base=e.__e,e.__u&=-161,d.__h.length&&s.push(d),y&&(d.__E=d.__=null)}catch(n){if(e.__v=null,c||null!=a)if(n.then){for(e.__u|=c?160:128;l&&8==l.nodeType&&l.nextSibling;)l=l.nextSibling;a[a.indexOf(l)]=null,e.__e=l}else for(M=a.length;M--;)x(a[M]);else e.__e=t.__e,e.__k=t.__k;r.__e(n,e,t)}else null==a&&e.__v==t.__v?(e.__k=t.__k,e.__e=t.__e):l=e.__e=U(t.__e,e,t,o,i,a,s,c,u);return(p=r.diffed)&&p(e),128&e.__u?void 0:l}function R(n,e,t){for(var o=0;o<t.length;o++)q(t[o],t[++o],t[++o]);r.__c&&r.__c(e,n),n.some(function(e){try{n=e.__h,e.__h=[],n.some(function(n){n.call(e)})}catch(n){r.__e(n,e.__v)}})}function L(n){return"object"!=typeof n||null==n||n.__b&&n.__b>0?n:h(n)?n.map(L):_({},n)}function U(n,e,t,i,a,s,l,c,u){var p,d,f,b,m,_,y,v=t.props,w=e.props,k=e.type;if("svg"==k?a="http://www.w3.org/2000/svg":"math"==k?a="http://www.w3.org/1998/Math/MathML":a||(a="http://www.w3.org/1999/xhtml"),null!=s)for(p=0;p<s.length;p++)if((m=s[p])&&"setAttribute"in m==!!k&&(k?m.localName==k:3==m.nodeType)){n=m,s[p]=null;break}if(null==n){if(null==k)return document.createTextNode(w);n=document.createElementNS(a,k,w.is&&w),c&&(r.__m&&r.__m(e,s),c=!1),s=null}if(null==k)v===w||c&&n.data==w||(n.data=w);else{if(s=s&&o.call(n.childNodes),v=t.props||g,!c&&null!=s)for(v={},p=0;p<n.attributes.length;p++)v[(m=n.attributes[p]).name]=m.value;for(p in v)if(m=v[p],"children"==p);else if("dangerouslySetInnerHTML"==p)f=m;else if(!(p in w)){if("value"==p&&"defaultValue"in w||"checked"==p&&"defaultChecked"in w)continue;M(n,p,null,m,a)}for(p in w)m=w[p],"children"==p?b=m:"dangerouslySetInnerHTML"==p?d=m:"value"==p?_=m:"checked"==p?y=m:c&&"function"!=typeof m||v[p]===m||M(n,p,m,v[p],a);if(d)c||f&&(d.__html==f.__html||d.__html==n.innerHTML)||(n.innerHTML=d.__html),e.__k=[];else if(f&&(n.innerHTML=""),I("template"==e.type?n.content:n,h(b)?b:[b],e,t,i,"foreignObject"==k?"http://www.w3.org/1999/xhtml":a,s,l,s?s[0]:t.__k&&O(t,0),c,u),null!=s)for(p=s.length;p--;)x(s[p]);c||(p="value","progress"==k&&null==_?n.removeAttribute("value"):null!=_&&(_!==n[p]||"progress"==k&&!_||"option"==k&&_!=v[p])&&M(n,p,_,v[p],a),p="checked",null!=y&&y!=n[p]&&M(n,p,y,v[p],a))}return n}function q(n,e,t){try{if("function"==typeof n){var o="function"==typeof n.__u;o&&n.__u(),o&&null==e||(n.__u=n(e))}else n.current=e}catch(n){r.__e(n,t)}}function F(n,e,t){var o,i;if(r.unmount&&r.unmount(n),(o=n.ref)&&(o.current&&o.current!=n.__e||q(o,null,e)),null!=(o=n.__c)){if(o.componentWillUnmount)try{o.componentWillUnmount()}catch(n){r.__e(n,e)}o.base=o.__P=null}if(o=n.__k)for(i=0;i<o.length;i++)o[i]&&F(o[i],e,t||"function"!=typeof n.type);t||x(n.__e),n.__c=n.__=n.__e=void 0}function N(n,e,t){return this.constructor(n,t)}function B(n){return B="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},B(n)}function W(n,e){return function(n){if(Array.isArray(n))return n}(n)||function(n,e){var t=null==n?null:"undefined"!=typeof Symbol&&n[Symbol.iterator]||n["@@iterator"];if(null!=t){var o,r,i,a,s=[],l=!0,c=!1;try{if(i=(t=t.call(n)).next,0===e){if(Object(t)!==t)return;l=!1}else for(;!(l=(o=i.call(t)).done)&&(s.push(o.value),s.length!==e);l=!0);}catch(n){c=!0,r=n}finally{try{if(!l&&null!=t.return&&(a=t.return(),Object(a)!==a))return}finally{if(c)throw r}}return s}}(n,e)||Y(n,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function H(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(n);e&&(o=o.filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})),t.push.apply(t,o)}return t}function Q(n){for(var e=1;e<arguments.length;e++){var t=null!=arguments[e]?arguments[e]:{};e%2?H(Object(t),!0).forEach(function(e){on(n,e,t[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):H(Object(t)).forEach(function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(t,e))})}return n}function $(){var n,e,t="function"==typeof Symbol?Symbol:{},o=t.iterator||"@@iterator",r=t.toStringTag||"@@toStringTag";function i(t,o,r,i){var l=o&&o.prototype instanceof s?o:s,c=Object.create(l.prototype);return V(c,"_invoke",function(t,o,r){var i,s,l,c=0,u=r||[],p=!1,d={p:0,n:0,v:n,a:f,f:f.bind(n,4),d:function(e,t){return i=e,s=0,l=n,d.n=t,a}};function f(t,o){for(s=t,l=o,e=0;!p&&c&&!r&&e<u.length;e++){var r,i=u[e],f=d.p,g=i[2];t>3?(r=g===o)&&(l=i[(s=i[4])?5:(s=3,3)],i[4]=i[5]=n):i[0]<=f&&((r=t<2&&f<i[1])?(s=0,d.v=o,d.n=i[1]):f<g&&(r=t<3||i[0]>o||o>g)&&(i[4]=t,i[5]=o,d.n=g,s=0))}if(r||t>1)return a;throw p=!0,o}return function(r,u,g){if(c>1)throw TypeError("Generator is already running");for(p&&1===u&&f(u,g),s=u,l=g;(e=s<2?n:l)||!p;){i||(s?s<3?(s>1&&(d.n=-1),f(s,l)):d.n=l:d.v=l);try{if(c=2,i){if(s||(r="next"),e=i[r]){if(!(e=e.call(i,l)))throw TypeError("iterator result is not an object");if(!e.done)return e;l=e.value,s<2&&(s=0)}else 1===s&&(e=i.return)&&e.call(i),s<2&&(l=TypeError("The iterator does not provide a '"+r+"' method"),s=1);i=n}else if((e=(p=d.n<0)?l:t.call(o,d))!==a)break}catch(e){i=n,s=1,l=e}finally{c=1}}return{value:e,done:p}}}(t,r,i),!0),c}var a={};function s(){}function l(){}function c(){}e=Object.getPrototypeOf;var u=[][o]?e(e([][o]())):(V(e={},o,function(){return this}),e),p=c.prototype=s.prototype=Object.create(u);function d(n){return Object.setPrototypeOf?Object.setPrototypeOf(n,c):(n.__proto__=c,V(n,r,"GeneratorFunction")),n.prototype=Object.create(p),n}return l.prototype=c,V(p,"constructor",c),V(c,"constructor",l),l.displayName="GeneratorFunction",V(c,r,"GeneratorFunction"),V(p),V(p,r,"Generator"),V(p,o,function(){return this}),V(p,"toString",function(){return"[object Generator]"}),($=function(){return{w:i,m:d}})()}function V(n,e,t,o){var r=Object.defineProperty;try{r({},"",{})}catch(n){r=0}V=function(n,e,t,o){if(e)r?r(n,e,{value:t,enumerable:!o,configurable:!o,writable:!o}):n[e]=t;else{var i=function(e,t){V(n,e,function(n){return this._invoke(e,t,n)})};i("next",0),i("throw",1),i("return",2)}},V(n,e,t,o)}function G(n){return function(n){if(Array.isArray(n))return K(n)}(n)||function(n){if("undefined"!=typeof Symbol&&null!=n[Symbol.iterator]||null!=n["@@iterator"])return Array.from(n)}(n)||Y(n)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Y(n,e){if(n){if("string"==typeof n)return K(n,e);var t={}.toString.call(n).slice(8,-1);return"Object"===t&&n.constructor&&(t=n.constructor.name),"Map"===t||"Set"===t?Array.from(n):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?K(n,e):void 0}}function K(n,e){(null==e||e>n.length)&&(e=n.length);for(var t=0,o=Array(e);t<e;t++)o[t]=n[t];return o}function Z(n,e,t,o,r,i,a){try{var s=n[i](a),l=s.value}catch(n){return void t(n)}s.done?e(l):Promise.resolve(l).then(o,r)}function J(n){return function(){var e=this,t=arguments;return new Promise(function(o,r){var i=n.apply(e,t);function a(n){Z(i,o,r,a,s,"next",n)}function s(n){Z(i,o,r,a,s,"throw",n)}a(void 0)})}}function X(n,e){for(var t=0;t<e.length;t++){var o=e[t];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(n,rn(o.key),o)}}function nn(){try{var n=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(n){}return(nn=function(){return!!n})()}function en(n){return en=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},en(n)}function tn(n,e){return tn=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,e){return n.__proto__=e,n},tn(n,e)}function on(n,e,t){return(e=rn(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function rn(n){var e=function(n){if("object"!=B(n)||!n)return n;var e=n[Symbol.toPrimitive];if(void 0!==e){var t=e.call(n,"string");if("object"!=B(t))return t;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(n)}(n);return"symbol"==B(e)?e:e+""}o=b.slice,r={__e:function(n,e,t,o){for(var r,i,a;e=e.__;)if((r=e.__c)&&!r.__)try{if((i=r.constructor)&&null!=i.getDerivedStateFromError&&(r.setState(i.getDerivedStateFromError(n)),a=r.__d),null!=r.componentDidCatch&&(r.componentDidCatch(n,o||{}),a=r.__d),a)return r.__E=r}catch(e){n=e}throw n}},i=0,k.prototype.setState=function(n,e){var t;t=null!=this.__s&&this.__s!=this.state?this.__s:this.__s=_({},this.state),"function"==typeof n&&(n=n(_({},t),this.props)),n&&_(t,n),null!=n&&this.__v&&(e&&this._sb.push(e),C(this))},k.prototype.forceUpdate=function(n){this.__v&&(this.__e=!0,n&&this.__h.push(n),C(this))},k.prototype.render=w,a=[],l="function"==typeof Promise?Promise.prototype.then.bind(Promise.resolve()):setTimeout,c=function(n,e){return n.__v.__b-e.__v.__b},j.__r=0,u=/(PointerCapture)$|Capture$/i,p=0,d=E(!1),f=E(!0);var an=function(n){function e(n){var t;return function(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),on(t=function(n,e,t){return e=en(e),function(n,e){if(e&&("object"==B(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(n){if(void 0===n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}(n)}(n,nn()?Reflect.construct(e,t||[],en(n).constructor):e.apply(n,t))}(this,e,[n]),"setupAccessibility",function(){document.addEventListener("keydown",t.handleGlobalKeyDown)}),on(t,"handleGlobalKeyDown",function(n){"Escape"===n.key&&t.state.isOpen&&t.toggleChat()}),on(t,"handleResize",function(){t.forceUpdate()}),on(t,"loadConfig",J($().m(function n(){var e,o,r,i,a,s,l,c,u,p,d,f,g,b,m;return $().w(function(n){for(;;)switch(n.p=n.n){case 0:if(!t.state.isLoadingConfig&&!t.state.config){n.n=1;break}return n.a(2);case 1:return t.setState({isLoadingConfig:!0}),n.p=2,e=t.props.config||{},o=e.clientId,r=void 0===o?"e6f484a3-c3cb-4e01-b8ce-a276f4b7355c":o,i=e.apiUrl,n.n=3,fetch("".concat(i,"/api/v1/widget/config/").concat(r));case 3:if((a=n.v).ok){n.n=4;break}throw new Error("Failed to load configuration");case 4:return n.n=5,a.json();case 5:return s=n.v,n.n=6,fetch("".concat(i,"/v1/sessions"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({clientId:r})});case 6:if((l=n.v).ok){n.n=7;break}throw new Error("Failed to create visitor session");case 7:return n.n=8,l.json();case 8:if(c=n.v,u=null,!c.needs_onboarding){n.n=14;break}return n.p=9,n.n=10,fetch("".concat(i,"/v1/visitors/").concat(c.visitor_id,"/onboarding?clientId=").concat(r));case 10:if(!(p=n.v).ok){n.n=12;break}return n.n=11,p.json();case 11:d=n.v,u=d.questions;case 12:n.n=14;break;case 13:n.p=13,b=n.v,console.warn("Could not load onboarding questions:",b);case 14:t.setState({config:s,visitorId:c.visitor_id,needsOnboarding:c.needs_onboarding,onboardingQuestions:u,isLoadingConfig:!1,messages:[]}),c.needs_onboarding&&u?setTimeout(function(){t.startOnboardingInChat()},1e3):(g={id:Date.now(),text:(null===(f=s.widgetSettings)||void 0===f?void 0:f.welcomeMessage)||"Hello! How can I help you?",sender:"bot",timestamp:new Date,ariaLabel:"Welcome message from chatbot"},t.setState(function(n){return{messages:[].concat(G(n.messages),[g])}})),n.n=16;break;case 15:n.p=15,m=n.v,console.error("Widget initialization error:",m),t.setState({error:"Failed to initialize chatbot",isLoadingConfig:!1});case 16:return n.a(2)}},n,null,[[9,13],[2,15]])}))),on(t,"toggleChat",function(){t.setState(function(n){return{isOpen:!n.isOpen}},function(){t.state.isOpen&&t.inputRef&&setTimeout(function(){return t.inputRef.focus()},100),t.announceToScreenReader(t.state.isOpen?"Chat window opened":"Chat window closed")})}),on(t,"announceToScreenReader",function(n){var e=document.createElement("div");e.setAttribute("aria-live","polite"),e.setAttribute("aria-atomic","true"),e.style.position="absolute",e.style.left="-10000px",e.style.width="1px",e.style.height="1px",e.style.overflow="hidden",e.textContent=n,document.body.appendChild(e),setTimeout(function(){return document.body.removeChild(e)},1e3)}),on(t,"sendMessage",J($().m(function n(){var e,o,r,i,a,s,l,c,u,p,d,f,g;return $().w(function(n){for(;;)switch(n.p=n.n){case 0:if(e=t.state,o=e.inputValue,r=e.messages,e.config,i=t.props.config||{},a=i.apiUrl,o.trim()){n.n=1;break}return n.a(2);case 1:return console.log("🔧 Widget Debug Info:"),console.log("📡 API URL:",a),console.log("⚙️ Props config:",t.props.config),console.log("🎯 Target endpoint:","".concat(a,"/api/chat")),s={id:Date.now(),text:o,sender:"user",timestamp:new Date,ariaLabel:"You said: ".concat(o)},t.setState({messages:[].concat(G(r),[s]),inputValue:"",isTyping:!0}),t.announceToScreenReader("Message sent"),n.p=2,n.n=3,fetch("".concat(a,"/api/chat"),{method:"POST",headers:{"Content-Type":"application/json","X-Client-Id":(null===(l=t.props.config)||void 0===l?void 0:l.clientId)||"e6f484a3-c3cb-4e01-b8ce-a276f4b7355c"},body:JSON.stringify({message:o,query:o,sessionId:t.state.visitorId,context:r.slice(-5),clientId:(null===(c=t.props.config)||void 0===c?void 0:c.clientId)||"e6f484a3-c3cb-4e01-b8ce-a276f4b7355c"})});case 3:if((u=n.v).ok){n.n=4;break}throw new Error("HTTP ".concat(u.status,": ").concat(u.statusText));case 4:return n.n=5,u.json();case 5:p=n.v,d={id:Date.now()+1,text:p.response||"Sorry, I encountered an error.",sender:"bot",timestamp:new Date,ariaLabel:"Chatbot responded: ".concat(p.response||"Sorry, I encountered an error.")},t.setState(function(n){return{messages:[].concat(G(n.messages),[d]),isTyping:!1}}),t.announceToScreenReader("New message received"),n.n=7;break;case 6:n.p=6,g=n.v,console.error("❌ Chat API Error:",g),console.error("🌐 Failed URL:","".concat(a,"/api/chat")),f={id:Date.now()+1,text:"Sorry, I'm having trouble responding right now. Please try again.",sender:"bot",timestamp:new Date,ariaLabel:"Error message from chatbot"},t.setState(function(n){return{messages:[].concat(G(n.messages),[f]),isTyping:!1}}),t.announceToScreenReader("Error occurred while sending message");case 7:return n.a(2)}},n,null,[[2,6]])}))),on(t,"startOnboardingInChat",function(){var n,e=t.state.onboardingQuestions;if(null!=e&&e.questions&&0!==e.questions.length){t.setState({isInOnboardingMode:!0,currentOnboardingIndex:0});var o={id:Date.now(),text:(null===(n=e.settings)||void 0===n?void 0:n.title)||"Ajude-nos a encontrar o seu imóvel ideal! Responda a algumas perguntas para receber recomendações personalizadas.",sender:"bot",timestamp:new Date,type:"onboarding-intro"};t.addBotMessage(o),setTimeout(function(){t.showCurrentOnboardingQuestion()},1e3)}}),on(t,"showCurrentOnboardingQuestion",function(){var n=t.state,e=n.onboardingQuestions,o=n.currentOnboardingIndex,r=e.questions[o];if(r){var i={id:Date.now(),text:r.question+(r.required?" *":""),sender:"bot",timestamp:new Date,type:"onboarding-question",questionData:r,questionIndex:o};t.addBotMessage(i)}else t.completeOnboarding()}),on(t,"handleOnboardingAnswer",function(n,e,o){var r=t.state,i=r.onboardingQuestions,a=r.onboardingAnswers;if(o===t.state.currentOnboardingIndex){var s=Q(Q({},a),{},on({},n,e));console.log("📝 Recording answer:",{questionId:n,answer:e,questionIndex:o}),t.setState({onboardingAnswers:s});var l=t.formatAnswerForDisplay(e,i.questions[o]),c={id:Date.now(),text:l,sender:"user",timestamp:new Date};t.addUserMessage(c);var u=o+1;u<i.questions.length?(console.log("➡️ Moving to next question:",{from:o,to:u}),setTimeout(function(){t.setState({currentOnboardingIndex:u},function(){t.showCurrentOnboardingQuestion()})},500)):(console.log("✅ Onboarding complete, submitting answers"),setTimeout(function(){t.completeOnboarding()},500))}else console.log("⚠️ Ignoring answer for old question:",{questionIndex:o,currentIndex:t.state.currentOnboardingIndex})}),on(t,"formatAnswerForDisplay",function(n,e){if("multiple_select"===e.type&&Array.isArray(n))return e.options.filter(function(e){return n.includes(e.value)}).map(function(n){return n.label}).join(", ");if("multiple_choice"===e.type||"range_select"===e.type){var t=e.options.find(function(e){return e.value===n});return t?t.label:n}return n}),on(t,"completeOnboarding",J($().m(function n(){var e,o,r,i,a,s,l,c,u,p,d,f,g,b;return $().w(function(n){for(;;)switch(n.p=n.n){case 0:return o=t.state,r=o.onboardingAnswers,i=o.visitorId,a=o.onboardingQuestions,s=(null===(e=t.props.config)||void 0===e?void 0:e.apiUrl)||"https://chatbot1-eta.vercel.app",console.log("🔄 Submitting onboarding answers:",{visitorId:i,answers:r,apiUrl:"".concat(s,"/v1/visitors/").concat(i,"/onboarding")}),n.p=1,n.n=2,fetch("".concat(s,"/v1/visitors/").concat(i,"/onboarding"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({answers:r,completed:!0})});case 2:if((c=n.v).ok){n.n=4;break}return n.n=3,c.json();case 3:throw u=n.v,new Error("HTTP ".concat(c.status,": ").concat(u.error||c.statusText));case 4:return n.n=5,c.json();case 5:p=n.v,console.log("✅ Onboarding submission successful:",p),d=(null==a||null===(l=a.settings)||void 0===l?void 0:l.completion_message)||"Obrigado pelas suas respostas! Agora posso ajudá-lo de forma mais personalizada. Em que posso ajudar?",f={id:Date.now(),text:d,sender:"bot",timestamp:new Date},t.addBotMessage(f),n.n=7;break;case 6:n.p=6,b=n.v,console.error("❌ Error submitting onboarding:",b),g={id:Date.now(),text:"Erro ao guardar as suas respostas, mas posso ajudá-lo na mesma. Em que posso ajudar?",sender:"bot",timestamp:new Date},t.addBotMessage(g);case 7:t.setState({isInOnboardingMode:!1,needsOnboarding:!1});case 8:return n.a(2)}},n,null,[[1,6]])}))),on(t,"addBotMessage",function(n){t.setState(function(e){return{messages:[].concat(G(e.messages),[n])}})}),on(t,"addUserMessage",function(n){t.setState(function(e){return{messages:[].concat(G(e.messages),[n])}})}),on(t,"renderOnboardingQuestion",function(n){var e=t.state,o=e.isInOnboardingMode,r=e.currentOnboardingIndex;if(!o||n.questionIndex!==r)return null;var i=n.questionData;return i?y("div",{style:"margin-top: 12px;"},t.renderQuestionOptions(i,n.questionIndex)):null}),on(t,"renderQuestionOptions",function(n,e){var o=t.state.onboardingAnswers[n.id];switch(n.type){case"multiple_choice":case"range_select":return y("div",{style:"display: flex; flex-direction: column; gap: 8px;"},n.options.map(function(r){return y("button",{key:r.value,onClick:function(){return t.handleOnboardingAnswer(n.id,r.value,e)},style:"\n              padding: 10px 12px;\n              border: 1px solid #3f3f3f !important;\n              background: rgba(20, 20, 20, .9) !important;\n              color: white !important;\n              border-radius: 0 !important;\n              cursor: pointer;\n              text-align: left;\n              font-size: 14px;\n              transition: all 0.2s ease;\n            ",onMouseOver:function(n){o!==r.value&&(n.target.style.borderColor="#3f3f3f",n.target.style.backgroundColor="rgba(20, 20, 20, .9)")},onMouseOut:function(n){o!==r.value&&(n.target.style.borderColor="#3f3f3f",n.target.style.backgroundColor="rgba(20, 20, 20, .9)")}},r.label)}));case"multiple_select":var r=Array.isArray(o)?o:[];return y("div",{style:"display: flex; flex-direction: column; gap: 8px;"},[].concat(G(n.options.map(function(e){var o=r.includes(e.value);return y("button",{key:e.value,onClick:function(){var i;i=o?r.filter(function(n){return n!==e.value}):[].concat(G(r),[e.value]),t.setState(function(e){return{onboardingAnswers:Q(Q({},e.onboardingAnswers),{},on({},n.id,i))}})},style:"\n                padding: 10px 12px;\n                border: 1px solid #3f3f3f !important;\n                background: rgba(20, 20, 20, .9) !important;\n                color: white !important;\n                border-radius: 0 !important;\n                cursor: pointer;\n                text-align: left;\n                font-size: 14px;\n                transition: all 0.2s ease;\n              "},e.label)})),[r.length>0&&y("button",{onClick:function(){return t.handleOnboardingAnswer(n.id,r,e)},style:"\n              padding: 12px;\n              background: rgba(20, 20, 20, .9) !important;\n              color: white !important;\n              border: 1px solid #3f3f3f !important;\n              border-radius: 0 !important;\n              cursor: pointer;\n              font-weight: 600;\n              margin-top: 8px;\n            "},"Continuar")]));case"text_input":return y("div",{style:"display: flex; gap: 8px; margin-top: 8px;"},[y("input",{type:"text",placeholder:n.placeholder||"",value:o||"",onInput:function(e){t.setState(function(t){return{onboardingAnswers:Q(Q({},t.onboardingAnswers),{},on({},n.id,e.target.value))}})},onKeyPress:function(r){"Enter"===r.key&&(o||"").trim()&&t.handleOnboardingAnswer(n.id,o,e)},style:"\n              flex: 1;\n              padding: 10px 12px;\n              border: 1px solid #3f3f3f !important;\n              background: rgba(20, 20, 20, .9) !important;\n              color: white !important;\n              border-radius: 0 !important;\n              font-size: 14px;\n            "}),y("button",{onClick:function(){return t.handleOnboardingAnswer(n.id,o,e)},disabled:!(o||"").trim(),style:"\n              padding: 10px 16px;\n              background: rgba(20, 20, 20, .9) !important;\n              color: white !important;\n              border: 1px solid #3f3f3f !important;\n              border-radius: 0 !important;\n              cursor: ".concat((o||"").trim()?"pointer":"not-allowed",";\n              font-weight: 600;\n            ")},"→")]);default:return y("div",null,"Tipo de pergunta não suportado")}}),on(t,"handleKeyPress",function(n){"Enter"!==n.key||n.shiftKey||(n.preventDefault(),t.sendMessage())}),on(t,"getResponsiveStyles",function(){var n=window.innerWidth<=768,e=(window.innerWidth,t.state.config),o=(null==e?void 0:e.widgetSettings)||{},r="dark"===o.theme,i="rgba(20, 20, 20, .9)",a=W((o.position||"bottom-right").split("-"),2),s=a[0],l=a[1];return{chatWindow:Q(Q({position:"fixed"},{bottom:"bottom"===s?n?"0":"20px":"auto",top:"top"===s?n?"0":"20px":"auto",right:"right"===l?n?"0":"20px":"auto",left:"left"===l?n?"0":"20px":"auto"}),{},{width:n?"100%":"400px",height:n&&o.mobileFullScreen?"100vh":n?"90vh":o.maxHeight||"600px",maxHeight:n?"100vh":"85vh",background:i,color:"white",borderRadius:"0 !important",border:"1px solid #3f3f3f !important",boxShadow:n?"none":r?"0 20px 40px rgba(0,0,0,0.4), 0 5px 10px rgba(0,0,0,0.2)":"0 20px 40px rgba(0,0,0,0.15), 0 5px 10px rgba(0,0,0,0.1)",display:"flex",flexDirection:"column",overflow:"hidden",zIndex:"999999",fontFamily:o.fontFamily||"inherit",fontSize:o.fontSize||"14px",transition:"all 0.3s cubic-bezier(0.4, 0.0, 0.2, 1)"}),chatButton:{width:"auto",height:n?"56px":"64px",padding:n?"12px 16px":"16px 20px",borderRadius:"0 !important",border:"1px solid #3f3f3f !important",cursor:"pointer",fontSize:n?"20px":"24px",boxShadow:r?"0 6px 20px rgba(0,0,0,0.4), 0 2px 4px rgba(0,0,0,0.2)":"0 6px 20px rgba(0,0,0,0.15), 0 2px 4px rgba(0,0,0,0.1)",transition:"all 0.3s cubic-bezier(0.4, 0.0, 0.2, 1)",position:"relative",display:"flex",alignItems:"center",justifyContent:"center",gap:n?"8px":"12px"},messagesContainer:{flex:"1",overflowY:"auto",padding:n?"12px":"20px",display:"flex",flexDirection:"column",gap:n?"8px":"12px",scrollBehavior:"smooth",background:i,border:"1px solid #3f3f3f !important"},inputContainer:{padding:n?"12px":"20px",borderTop:"1px solid ".concat("#3f3f3f"),display:"flex",gap:n?"8px":"12px",alignItems:"flex-end",background:i,border:"1px solid #3f3f3f !important"},input:{flex:"1",padding:n?"12px 16px":"14px 18px",border:"1px solid #3f3f3f !important",borderRadius:"0 !important",outline:"none",fontSize:n?"16px":o.fontSize||"14px",resize:"none",fontFamily:"inherit",minHeight:n?"40px":"44px",maxHeight:"120px",transition:"border-color 0.2s ease",background:"rgba(20, 20, 20, .9) !important",color:"white !important"},sendButton:{padding:n?"12px 16px":"14px 20px",border:"1px solid #3f3f3f !important",borderRadius:"0 !important",cursor:"pointer",fontSize:n?"14px":"16px",fontWeight:"600",minWidth:n?"60px":"80px",height:n?"40px":"44px",transition:"all 0.2s ease",display:"flex",alignItems:"center",justifyContent:"center"},messageBot:{background:"rgba(20, 20, 20, .9) !important",color:"white !important",borderRadius:"0 !important",border:"1px solid #3f3f3f !important"},messageUser:{borderRadius:"0 !important",border:"1px solid #3f3f3f !important"}}}),t.state={isOpen:!1,messages:[],inputValue:"",isTyping:!1,config:null,error:null,isLoadingConfig:!1,onboardingQuestions:null,visitorId:null,needsOnboarding:!1,currentOnboardingIndex:0,onboardingAnswers:{},isInOnboardingMode:!1},t}return function(n,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(e&&e.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,"prototype",{writable:!1}),e&&tn(n,e)}(e,n),function(n,e){return e&&X(n.prototype,e),Object.defineProperty(n,"prototype",{writable:!1}),n}(e,[{key:"componentDidMount",value:function(){this.loadConfig(),this.handleResize(),window.addEventListener("resize",this.handleResize),this.setupAccessibility()}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.handleResize)}},{key:"render",value:function(){var n,e=this,t=this.state,o=t.isOpen,r=t.messages,i=t.inputValue,a=t.isTyping,s=t.config,l=t.error;if(l)return y("div",{style:"color: white !important; padding: 12px; font-size: 14px; background: rgba(20, 20, 20, .9) !important; border-radius: 0 !important; box-shadow: 0 4px 12px rgba(0,0,0,0.15); border: 1px solid #3f3f3f !important;"},l);if(!s)return y("div",{style:"padding: 12px; font-size: 14px; background: rgba(20, 20, 20, .9) !important; border-radius: 0 !important; box-shadow: 0 4px 12px rgba(0,0,0,0.15); color: white !important; border: 1px solid #3f3f3f !important;"},"Loading...");var c=s.widgetSettings||{},u=(c.theme,"rgba(20, 20, 20, .9)"),p="white",d="rgba(20, 20, 20, .9)",f=c.chatIcon||"💬",g=this.getResponsiveStyles(),b=window.innerWidth<=768;return y(w,null,y("button",{onClick:this.toggleChat,style:"\n          ".concat(Object.entries(g.chatButton).map(function(n){var e=W(n,2),t=e[0],o=e[1];return"".concat(t.replace(/([A-Z])/g,"-$1").toLowerCase(),": ").concat(o)}).join("; "),";\n          background: ").concat(u,";\n          color: white;\n        "),onMouseOver:function(n){return n.target.style.transform="scale(1.05)"},onMouseOut:function(n){return n.target.style.transform="scale(1)"},"aria-label":"Open chat","aria-expanded":o},[y("span",{style:"font-size: ".concat(b?"20px":"24px",";")},f),y("span",{style:"font-size: ".concat(b?"12px":"14px","; font-weight: 600; white-space: nowrap;")},"Assistente IA")]),o&&y("div",{style:Object.entries(g.chatWindow).map(function(n){var e=W(n,2),t=e[0],o=e[1];return"".concat(t.replace(/([A-Z])/g,"-$1").toLowerCase(),": ").concat(o)}).join("; "),role:"dialog","aria-label":"Chat window"},[y("div",{style:"\n            background: ".concat(u,";\n            color: white;\n            padding: ").concat(b?"16px":"20px",";\n            display: flex;\n            justify-content: space-between;\n            align-items: center;\n            min-height: ").concat(b?"60px":"64px",";\n          ")},[y("div",{style:"display: flex; align-items: center; gap: 12px;"},[y("div",{style:"\n                width: ".concat(b?"32px":"36px",";\n                height: ").concat(b?"32px":"36px",";\n                background: rgba(255,255,255,0.2);\n                border-radius: 0 !important;\n                border: 1px solid #3f3f3f !important;\n                display: flex;\n                align-items: center;\n                justify-content: center;\n                font-size: ").concat(b?"16px":"18px",";\n              ")},f),y("h3",{style:"margin: 0; font-size: ".concat(b?"16px":"18px","; font-weight: 600;")},(null===(n=s.widgetSettings)||void 0===n?void 0:n.headerText)||"Chat with us!")]),y("button",{onClick:this.toggleChat,style:"\n              background: none;\n              border: none;\n              color: white;\n              font-size: ".concat(b?"24px":"28px",";\n              cursor: pointer;\n              padding: 8px;\n              border-radius: 0 !important;\n              border: 1px solid #3f3f3f !important;\n              width: ").concat(b?"40px":"44px",";\n              height: ").concat(b?"40px":"44px",";\n              display: flex;\n              align-items: center;\n              justify-content: center;\n              transition: background-color 0.2s ease;\n            "),onMouseOver:function(n){return n.target.style.backgroundColor="rgba(255,255,255,0.1)"},onMouseOut:function(n){return n.target.style.backgroundColor="transparent"},"aria-label":"Close chat"},"×")]),y("div",{id:"chat-instructions",style:"position: absolute; left: -10000px; width: 1px; height: 1px; overflow: hidden;"},"Press Enter to send message, Escape to close chat"),y("div",{style:Object.entries(g.messagesContainer).map(function(n){var e=W(n,2),t=e[0],o=e[1];return"".concat(t.replace(/([A-Z])/g,"-$1").toLowerCase(),": ").concat(o)}).join("; "),ref:function(n){n&&(n.scrollTop=n.scrollHeight)},role:"log","aria-live":"polite","aria-label":"Chat messages",className:"widget-messages"},[].concat(G(r.map(function(n){return y("div",{key:n.id,style:"\n                  align-self: ".concat("user"===n.sender?"flex-end":"flex-start",";\n                  background: ").concat("user"===n.sender?"#6b7280":d,";\n                  color: ").concat("user"===n.sender?"white":p,";\n                  padding: ").concat(b?"10px 14px":"12px 16px",";\n                  border-radius: ").concat("user"===n.sender?g.messageUser.borderRadius:g.messageBot.borderRadius,";\n                  max-width: ").concat("onboarding-question"===n.type?"95%":"85%",";\n                  word-wrap: break-word;\n                  font-size: ").concat(b?"14px":"15px",";\n                  line-height: 1.4;\n                  box-shadow: 0 1px 2px rgba(0,0,0,0.1);\n                "),role:"article","aria-label":n.ariaLabel||"".concat("user"===n.sender?"Your message":"Bot message",": ").concat(n.text),className:"widget-message widget-message-".concat(n.sender)},[n.text,"onboarding-question"===n.type&&e.renderOnboardingQuestion(n)])})),[a&&y("div",{style:"\n              align-self: flex-start;\n              background: ".concat(d,";\n              color: ").concat(p,";\n              padding: ").concat(b?"10px 14px":"12px 16px",";\n                             border-radius: ").concat(g.messageBot.borderRadius,";\n              font-style: italic;\n              font-size: ").concat(b?"14px":"15px",";\n              display: flex;\n              align-items: center;\n              gap: 8px;\n            ")},[y("span",null,"Typing"),y("div",{style:"\n                display: flex;\n                gap: 2px;\n              "},[y("div",{style:"width: 4px; height: 4px; background: #64748b; border-radius: 50%; animation: pulse 1.5s ease-in-out infinite;"}),y("div",{style:"width: 4px; height: 4px; background: #64748b; border-radius: 50%; animation: pulse 1.5s ease-in-out 0.1s infinite;"}),y("div",{style:"width: 4px; height: 4px; background: #64748b; border-radius: 50%; animation: pulse 1.5s ease-in-out 0.2s infinite;"})])])])),!this.state.isInOnboardingMode&&y("div",{style:Object.entries(g.inputContainer).map(function(n){var e=W(n,2),t=e[0],o=e[1];return"".concat(t.replace(/([A-Z])/g,"-$1").toLowerCase(),": ").concat(o)}).join("; ")},[y("textarea",{value:i,onInput:function(n){return e.setState({inputValue:n.target.value})},onKeyPress:this.handleKeyPress,placeholder:"Type your message...",style:Object.entries(g.input).map(function(n){var e=W(n,2),t=e[0],o=e[1];return"".concat(t.replace(/([A-Z])/g,"-$1").toLowerCase(),": ").concat(o)}).join("; "),rows:1,"aria-label":"Type your message here","aria-describedby":"chat-instructions",ref:function(n){e.inputRef=n},className:"widget-input"}),y("button",{onClick:this.sendMessage,disabled:!i.trim(),style:"\n                ".concat(Object.entries(g.sendButton).map(function(n){var e=W(n,2),t=e[0],o=e[1];return"".concat(t.replace(/([A-Z])/g,"-$1").toLowerCase(),": ").concat(o)}).join("; "),";\n                background: ").concat(i.trim()?"#6b7280":"#4b5563",";\n                color: white;\n                opacity: ").concat(i.trim()?"1":"0.7",";\n              "),"aria-label":"Send message","aria-disabled":!i.trim(),className:"widget-button widget-send-button"},b?"→":"Send")])]))}}])}(k);const sn=an;var ln=t(591),cn=t.n(ln),un=t(740),pn=t.n(un),dn=t(128),fn=t.n(dn),gn=t(855),bn=t.n(gn),mn=t(51),hn=t.n(mn),_n=t(656),xn=t.n(_n),yn=t(598),vn={};return vn.styleTagTransform=xn(),vn.setAttributes=bn(),vn.insert=fn().bind(null,"head"),vn.domAPI=pn(),vn.insertStyleElement=hn(),cn()(yn.A,vn),yn.A&&yn.A.locals&&yn.A.locals,window.initViriatoChatbot=function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=document.getElementById("viriato-chatbot-container");e||((e=document.createElement("div")).id="viriato-chatbot-container",e.className="widget-container",e.style.cssText="\n      position: fixed;\n      bottom: 20px;\n      right: 20px;\n      z-index: 999999;\n      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Oxygen', 'Ubuntu', 'Cantarell', sans-serif;\n    ",n.theme&&(n.theme.primaryColor&&e.style.setProperty("--primary-color",n.theme.primaryColor),n.theme.fontFamily&&(e.style.fontFamily=n.theme.fontFamily)),document.body.appendChild(e)),function(n,e,t){var i,a,s,l;e==document&&(e=document.documentElement),r.__&&r.__(n,e),a=(i="function"==typeof t)?null:t&&t.__k||e.__k,s=[],l=[],D(e,n=(!i&&t||e).__k=y(w,null,[n]),a||g,g,e.namespaceURI,!i&&t?[t]:a?null:e.firstChild?o.call(e.childNodes):null,s,!i&&t?t:a?a.__e:e.firstChild,i,l),R(s,n,l)}(y(sn,{config:n}),e)},document.addEventListener("DOMContentLoaded",function(){var n=document.querySelector('script[src*="loader.js"]');if(n&&"false"!==n.dataset.autoInit){var e={clientId:n.dataset.clientId||"e6f484a3-c3cb-4e01-b8ce-a276f4b7355c",apiUrl:n.dataset.apiUrl||"https://chatbot1-eta.vercel.app",theme:{primaryColor:n.dataset.primaryColor,fontFamily:n.dataset.fontFamily}};window.initViriatoChatbot(e)}}),{}})());