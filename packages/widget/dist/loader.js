/*! For license information please see loader.js.LICENSE.txt */
!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.ViriatoChatbot=t():e.ViriatoChatbot=t()}(this,()=>(()=>{"use strict";var e={51:e=>{e.exports=function(e){var t=document.createElement("style");return e.setAttributes(t,e.attributes),e.insert(t,e.options),t}},128:e=>{var t={};e.exports=function(e,n){var r=function(e){if(void 0===t[e]){var n=document.querySelector(e);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(e){n=null}t[e]=n}return t[e]}(e);if(!r)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");r.appendChild(n)}},591:e=>{var t=[];function n(e){for(var n=-1,r=0;r<t.length;r++)if(t[r].identifier===e){n=r;break}return n}function r(e,r){for(var i={},s=[],a=0;a<e.length;a++){var l=e[a],c=r.base?l[0]+r.base:l[0],p=i[c]||0,u="".concat(c," ").concat(p);i[c]=p+1;var h=n(u),d={css:l[1],media:l[2],sourceMap:l[3],supports:l[4],layer:l[5]};if(-1!==h)t[h].references++,t[h].updater(d);else{var f=o(d,r);r.byIndex=a,t.splice(a,0,{identifier:u,updater:f,references:1})}s.push(u)}return s}function o(e,t){var n=t.domAPI(t);return n.update(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap&&t.supports===e.supports&&t.layer===e.layer)return;n.update(e=t)}else n.remove()}}e.exports=function(e,o){var i=r(e=e||[],o=o||{});return function(e){e=e||[];for(var s=0;s<i.length;s++){var a=n(i[s]);t[a].references--}for(var l=r(e,o),c=0;c<i.length;c++){var p=n(i[c]);0===t[p].references&&(t[p].updater(),t.splice(p,1))}i=l}}},598:(e,t,n)=>{n.d(t,{A:()=>a});var r=n(758),o=n.n(r),i=n(935),s=n.n(i)()(o());s.push([e.id,"/* Widget animations and responsive styles */\n@keyframes pulse {\n  0%, 100% {\n    opacity: 0.4;\n    transform: scale(0.8);\n  }\n  50% {\n    opacity: 1;\n    transform: scale(1);\n  }\n}\n\n@keyframes slideUp {\n  from {\n    opacity: 0;\n    transform: translateY(20px);\n  }\n  to {\n    opacity: 1;\n    transform: translateY(0);\n  }\n}\n\n@keyframes fadeIn {\n  from {\n    opacity: 0;\n  }\n  to {\n    opacity: 1;\n  }\n}\n\n/* Widget container responsive adjustments */\n.widget-container {\n  animation: fadeIn 0.3s ease-out;\n}\n\n.widget-chat-window {\n  animation: slideUp 0.3s cubic-bezier(0.4, 0.0, 0.2, 1);\n}\n\n.widget-message {\n  animation: slideUp 0.2s ease-out;\n}\n\n/* Custom scrollbar for messages */\n.widget-messages::-webkit-scrollbar {\n  width: 6px;\n}\n\n.widget-messages::-webkit-scrollbar-track {\n  background: #f1f5f9;\n  border-radius: 3px;\n}\n\n.widget-messages::-webkit-scrollbar-thumb {\n  background: #cbd5e1;\n  border-radius: 3px;\n}\n\n.widget-messages::-webkit-scrollbar-thumb:hover {\n  background: #94a3b8;\n}\n\n/* Focus styles for accessibility */\n.widget-input:focus {\n  border-color: #3f3f3f !important;\n  box-shadow: 0 0 0 3px rgba(255, 255, 255, 0.1) !important;\n}\n\n.widget-button:focus {\n  outline: 2px solid #3f3f3f !important;\n  outline-offset: 2px;\n}\n\n/* High contrast mode support */\n@media (prefers-contrast: high) {\n  .widget-message-bot {\n    border: 2px solid #000;\n  }\n  \n  .widget-message-user {\n    border: 2px solid #fff;\n  }\n}\n\n/* Reduced motion support */\n@media (prefers-reduced-motion: reduce) {\n  * {\n    animation-duration: 0.01ms !important;\n    animation-iteration-count: 1 !important;\n    transition-duration: 0.01ms !important;\n  }\n}\n\n/* Mobile-specific adjustments */\n@media (max-width: 768px) {\n  .widget-chat-window {\n    border-radius: 0 !important;\n    box-shadow: none !important;\n  }\n  \n  .widget-input {\n    font-size: 16px !important; /* Prevent zoom on iOS */\n  }\n}\n\n/* Onboarding Modal Styles */\n.onboarding-overlay {\n  position: fixed;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  background-color: rgba(0, 0, 0, 0.7);\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  z-index: 1000000;\n  padding: 20px;\n  box-sizing: border-box;\n}\n\n.onboarding-modal {\n  background: rgba(20, 20, 20, .9) !important;\n  color: white !important;\n  border: 1px solid #3f3f3f !important;\n  border-radius: 0 !important;\n  box-shadow: 0 25px 50px rgba(0, 0, 0, 0.25);\n  width: 100%;\n  max-width: 500px;\n  max-height: 90vh;\n  display: flex;\n  flex-direction: column;\n  overflow: hidden;\n  animation: onboardingSlideIn 0.3s ease-out;\n}\n\n@keyframes onboardingSlideIn {\n  from {\n    opacity: 0;\n    transform: scale(0.9) translateY(20px);\n  }\n  to {\n    opacity: 1;\n    transform: scale(1) translateY(0);\n  }\n}\n\n.onboarding-header {\n  padding: 32px 32px 24px;\n  border-bottom: 1px solid #3f3f3f !important;\n  text-align: center;\n}\n\n.onboarding-title {\n  margin: 0 0 8px;\n  font-size: 24px;\n  font-weight: 700;\n  color: white !important;\n  line-height: 1.3;\n}\n\n.onboarding-subtitle {\n  margin: 0 0 20px;\n  font-size: 16px;\n  color: white !important;\n  line-height: 1.5;\n}\n\n.onboarding-progress {\n  position: relative;\n  height: 6px;\n  background-color: rgba(20, 20, 20, .9) !important;\n  border: 1px solid #3f3f3f !important;\n  border-radius: 0 !important;\n  overflow: hidden;\n}\n\n.onboarding-progress-bar {\n  height: 100%;\n  background: white !important;\n  border-radius: 0 !important;\n  transition: width 0.3s ease;\n}\n\n.onboarding-progress-text {\n  position: absolute;\n  top: 12px;\n  right: 0;\n  font-size: 12px;\n  color: white !important;\n  font-weight: 500;\n}\n\n.onboarding-content {\n  flex: 1;\n  padding: 32px;\n  overflow-y: auto;\n}\n\n.onboarding-question {\n  max-width: 100%;\n}\n\n.question-text {\n  margin: 0 0 24px;\n  font-size: 18px;\n  font-weight: 600;\n  color: white !important;\n  line-height: 1.4;\n}\n\n.required-asterisk {\n  color: #ef4444;\n}\n\n.onboarding-options {\n  display: flex;\n  flex-direction: column;\n  gap: 12px;\n}\n\n.onboarding-option {\n  display: flex;\n  align-items: center;\n  padding: 16px;\n  border: 1px solid #3f3f3f !important;\n  border-radius: 0 !important;\n  cursor: pointer;\n  transition: all 0.2s ease;\n  background: rgba(20, 20, 20, .9) !important;\n}\n\n.onboarding-option:hover {\n  border-color: #3f3f3f !important;\n  background: rgba(20, 20, 20, .9) !important;\n}\n\n.onboarding-option.selected {\n  border-color: #3f3f3f !important;\n  background: rgba(20, 20, 20, .9) !important;\n}\n\n.onboarding-option input {\n  margin: 0 12px 0 0;\n  accent-color: #6b7280 !important;\n}\n\n.option-label {\n  font-size: 15px;\n  color: white !important;\n  line-height: 1.4;\n  flex: 1;\n}\n\n.onboarding-text-input {\n  width: 100%;\n  padding: 16px;\n  border: 1px solid #3f3f3f !important;\n  border-radius: 0 !important;\n  font-size: 16px;\n  color: white !important;\n  background: rgba(20, 20, 20, .9) !important;\n  box-sizing: border-box;\n  transition: border-color 0.2s ease;\n}\n\n.onboarding-text-input:focus {\n  outline: none;\n  border-color: #3f3f3f !important;\n  box-shadow: 0 0 0 3px rgba(255, 255, 255, 0.1) !important;\n}\n\n.onboarding-text-input::placeholder {\n  color: white !important;\n}\n\n.onboarding-footer {\n  padding: 24px 32px 32px;\n  border-top: 1px solid #3f3f3f !important;\n  background: rgba(20, 20, 20, .9) !important;\n}\n\n.onboarding-buttons {\n  display: flex;\n  gap: 12px;\n  justify-content: space-between;\n  align-items: center;\n}\n\n.onboarding-button {\n  padding: 12px 24px;\n  border-radius: 0 !important;\n  border: 1px solid #3f3f3f !important;\n  font-size: 14px;\n  font-weight: 600;\n  cursor: pointer;\n  transition: all 0.2s ease;\n  display: flex;\n  align-items: center;\n  gap: 8px;\n  white-space: nowrap;\n}\n\n.onboarding-button-primary {\n  background: rgba(20, 20, 20, .9) !important;\n  color: white !important;\n}\n\n.onboarding-button-primary:hover:not(:disabled) {\n  background: rgba(20, 20, 20, .9) !important;\n  transform: translateY(-1px);\n  box-shadow: 0 4px 12px rgba(255, 255, 255, 0.4);\n}\n\n.onboarding-button-primary.disabled,\n.onboarding-button-primary:disabled {\n  background: rgba(20, 20, 20, .9) !important;\n  cursor: not-allowed;\n  transform: none;\n  box-shadow: none;\n}\n\n.onboarding-button-secondary {\n  background: rgba(20, 20, 20, .9) !important;\n  color: white !important;\n  border: 1px solid #3f3f3f !important;\n}\n\n.onboarding-button-secondary:hover:not(:disabled) {\n  background: rgba(20, 20, 20, .9) !important;\n  border-color: #3f3f3f !important;\n}\n\n.onboarding-button-text {\n  background: transparent;\n  color: white !important;\n  text-decoration: underline;\n  padding: 8px 16px;\n}\n\n.onboarding-button-text:hover:not(:disabled) {\n  color: white !important;\n}\n\n.onboarding-error {\n  margin-top: 16px;\n  padding: 12px 16px;\n  background: rgba(20, 20, 20, .9) !important;\n  border: 1px solid #3f3f3f !important;\n  border-radius: 0 !important;\n  color: white !important;\n  font-size: 14px;\n}\n\n.loading-spinner {\n  width: 16px;\n  height: 16px;\n  border: 2px solid transparent;\n  border-top: 2px solid currentColor;\n  border-radius: 50%;\n  animation: spin 1s linear infinite;\n}\n\n@keyframes spin {\n  to {\n    transform: rotate(360deg);\n  }\n}\n\n/* Mobile optimizations for onboarding */\n@media (max-width: 768px) {\n  .onboarding-overlay {\n    padding: 16px;\n  }\n  \n  .onboarding-modal {\n    max-height: 95vh;\n    border-radius: 0 !important;\n  }\n  \n  .onboarding-header {\n    padding: 24px 24px 20px;\n  }\n  \n  .onboarding-title {\n    font-size: 20px;\n  }\n  \n  .onboarding-subtitle {\n    font-size: 14px;\n  }\n  \n  .onboarding-content {\n    padding: 24px;\n  }\n  \n  .question-text {\n    font-size: 16px;\n    margin-bottom: 20px;\n  }\n  \n  .onboarding-option {\n    padding: 14px;\n  }\n  \n  .option-label {\n    font-size: 14px;\n  }\n  \n  .onboarding-footer {\n    padding: 20px 24px 24px;\n  }\n  \n  .onboarding-buttons {\n    flex-direction: column;\n    gap: 8px;\n  }\n  \n  .onboarding-button {\n    width: 100%;\n    justify-content: center;\n    padding: 14px 24px;\n  }\n} ",""]);const a=s},656:e=>{e.exports=function(e,t){if(t.styleSheet)t.styleSheet.cssText=e;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(e))}}},740:e=>{e.exports=function(e){if("undefined"==typeof document)return{update:function(){},remove:function(){}};var t=e.insertStyleElement(e);return{update:function(n){!function(e,t,n){var r="";n.supports&&(r+="@supports (".concat(n.supports,") {")),n.media&&(r+="@media ".concat(n.media," {"));var o=void 0!==n.layer;o&&(r+="@layer".concat(n.layer.length>0?" ".concat(n.layer):""," {")),r+=n.css,o&&(r+="}"),n.media&&(r+="}"),n.supports&&(r+="}");var i=n.sourceMap;i&&"undefined"!=typeof btoa&&(r+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(i))))," */")),t.styleTagTransform(r,e,t.options)}(t,e,n)},remove:function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(t)}}}},758:e=>{e.exports=function(e){return e[1]}},855:(e,t,n)=>{e.exports=function(e){var t=n.nc;t&&e.setAttribute("nonce",t)}},935:e=>{e.exports=function(e){var t=[];return t.toString=function(){return this.map(function(t){var n="",r=void 0!==t[5];return t[4]&&(n+="@supports (".concat(t[4],") {")),t[2]&&(n+="@media ".concat(t[2]," {")),r&&(n+="@layer".concat(t[5].length>0?" ".concat(t[5]):""," {")),n+=e(t),r&&(n+="}"),t[2]&&(n+="}"),t[4]&&(n+="}"),n}).join("")},t.i=function(e,n,r,o,i){"string"==typeof e&&(e=[[null,e,void 0]]);var s={};if(r)for(var a=0;a<this.length;a++){var l=this[a][0];null!=l&&(s[l]=!0)}for(var c=0;c<e.length;c++){var p=[].concat(e[c]);r&&s[p[0]]||(void 0!==i&&(void 0===p[5]||(p[1]="@layer".concat(p[5].length>0?" ".concat(p[5]):""," {").concat(p[1],"}")),p[5]=i),n&&(p[2]?(p[1]="@media ".concat(p[2]," {").concat(p[1],"}"),p[2]=n):p[2]=n),o&&(p[4]?(p[1]="@supports (".concat(p[4],") {").concat(p[1],"}"),p[4]=o):p[4]="".concat(o)),t.push(p))}},t}}},t={};function n(r){var o=t[r];if(void 0!==o)return o.exports;var i=t[r]={id:r,exports:{}};return e[r](i,i.exports,n),i.exports}n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.nc=void 0;var r,o,i,s,a,l,c,p,u,h,d,f={},g=[],b=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i,m=Array.isArray;function x(e,t){for(var n in t)e[n]=t[n];return e}function k(e){e&&e.parentNode&&e.parentNode.removeChild(e)}function _(e,t,n){var o,i,s,a={};for(s in t)"key"==s?o=t[s]:"ref"==s?i=t[s]:a[s]=t[s];if(arguments.length>2&&(a.children=arguments.length>3?r.call(arguments,2):n),"function"==typeof e&&null!=e.defaultProps)for(s in e.defaultProps)void 0===a[s]&&(a[s]=e.defaultProps[s]);return y(e,a,o,i,null)}function y(e,t,n,r,s){var a={type:e,props:t,key:n,ref:r,__k:null,__:null,__b:0,__e:null,__c:null,constructor:void 0,__v:null==s?++i:s,__i:-1,__u:0};return null==s&&null!=o.vnode&&o.vnode(a),a}function w(e){return e.children}function v(e,t){this.props=e,this.context=t}function S(e,t){if(null==t)return e.__?S(e.__,e.__i+1):null;for(var n;t<e.__k.length;t++)if(null!=(n=e.__k[t])&&null!=n.__e)return n.__e;return"function"==typeof e.type?S(e):null}function T(e){var t,n;if(null!=(e=e.__)&&null!=e.__c){for(e.__e=e.__c.base=null,t=0;t<e.__k.length;t++)if(null!=(n=e.__k[t])&&null!=n.__e){e.__e=e.__c.base=n.__e;break}return T(e)}}function R(e){(!e.__d&&(e.__d=!0)&&s.push(e)&&!z.__r++||a!=o.debounceRendering)&&((a=o.debounceRendering)||l)(z)}function z(){for(var e,t,n,r,i,a,l,p=1;s.length;)s.length>p&&s.sort(c),e=s.shift(),p=s.length,e.__d&&(n=void 0,i=(r=(t=e).__v).__e,a=[],l=[],t.__P&&((n=x({},r)).__v=r.__v+1,o.vnode&&o.vnode(n),E(t.__P,n,r,t.__n,t.__P.namespaceURI,32&r.__u?[i]:null,a,null==i?S(r):i,!!(32&r.__u),l),n.__v=r.__v,n.__.__k[n.__i]=n,L(a,n,l),n.__e!=i&&T(n)));z.__r=0}function $(e,t,n,r,o,i,s,a,l,c,p){var u,h,d,b,m,x,k=r&&r.__k||g,_=t.length;for(l=C(n,t,k,l,_),u=0;u<_;u++)null!=(d=n.__k[u])&&(h=-1==d.__i?f:k[d.__i]||f,d.__i=u,x=E(e,d,h,o,i,s,a,l,c,p),b=d.__e,d.ref&&h.ref!=d.ref&&(h.ref&&M(h.ref,null,d),p.push(d.ref,d.__c||b,d)),null==m&&null!=b&&(m=b),4&d.__u||h.__k===d.__k?l=I(d,l,e):"function"==typeof d.type&&void 0!==x?l=x:b&&(l=b.nextSibling),d.__u&=-7);return n.__e=m,l}function C(e,t,n,r,o){var i,s,a,l,c,p=n.length,u=p,h=0;for(e.__k=new Array(o),i=0;i<o;i++)null!=(s=t[i])&&"boolean"!=typeof s&&"function"!=typeof s?(l=i+h,(s=e.__k[i]="string"==typeof s||"number"==typeof s||"bigint"==typeof s||s.constructor==String?y(null,s,null,null,null):m(s)?y(w,{children:s},null,null,null):null==s.constructor&&s.__b>0?y(s.type,s.props,s.key,s.ref?s.ref:null,s.__v):s).__=e,s.__b=e.__b+1,a=null,-1!=(c=s.__i=P(s,n,l,u))&&(u--,(a=n[c])&&(a.__u|=2)),null==a||null==a.__v?(-1==c&&(o>p?h--:o<p&&h++),"function"!=typeof s.type&&(s.__u|=4)):c!=l&&(c==l-1?h--:c==l+1?h++:(c>l?h--:h++,s.__u|=4))):e.__k[i]=null;if(u)for(i=0;i<p;i++)null!=(a=n[i])&&!(2&a.__u)&&(a.__e==r&&(r=S(a)),q(a,a));return r}function I(e,t,n){var r,o;if("function"==typeof e.type){for(r=e.__k,o=0;r&&o<r.length;o++)r[o]&&(r[o].__=e,t=I(r[o],t,n));return t}e.__e!=t&&(t&&e.type&&!n.contains(t)&&(t=S(e)),n.insertBefore(e.__e,t||null),t=e.__e);do{t=t&&t.nextSibling}while(null!=t&&8==t.nodeType);return t}function P(e,t,n,r){var o,i,s=e.key,a=e.type,l=t[n];if(null===l&&null==e.key||l&&s==l.key&&a==l.type&&!(2&l.__u))return n;if(r>(null==l||2&l.__u?0:1))for(o=n-1,i=n+1;o>=0||i<t.length;){if(o>=0){if((l=t[o])&&!(2&l.__u)&&s==l.key&&a==l.type)return o;o--}if(i<t.length){if((l=t[i])&&!(2&l.__u)&&s==l.key&&a==l.type)return i;i++}}return-1}function A(e,t,n){"-"==t[0]?e.setProperty(t,null==n?"":n):e[t]=null==n?"":"number"!=typeof n||b.test(t)?n:n+"px"}function O(e,t,n,r,o){var i,s;e:if("style"==t)if("string"==typeof n)e.style.cssText=n;else{if("string"==typeof r&&(e.style.cssText=r=""),r)for(t in r)n&&t in n||A(e.style,t,"");if(n)for(t in n)r&&n[t]==r[t]||A(e.style,t,n[t])}else if("o"==t[0]&&"n"==t[1])i=t!=(t=t.replace(p,"$1")),s=t.toLowerCase(),t=s in e||"onFocusOut"==t||"onFocusIn"==t?s.slice(2):t.slice(2),e.l||(e.l={}),e.l[t+i]=n,n?r?n.u=r.u:(n.u=u,e.addEventListener(t,i?d:h,i)):e.removeEventListener(t,i?d:h,i);else{if("http://www.w3.org/2000/svg"==o)t=t.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if("width"!=t&&"height"!=t&&"href"!=t&&"list"!=t&&"form"!=t&&"tabIndex"!=t&&"download"!=t&&"rowSpan"!=t&&"colSpan"!=t&&"role"!=t&&"popover"!=t&&t in e)try{e[t]=null==n?"":n;break e}catch(e){}"function"==typeof n||(null==n||!1===n&&"-"!=t[4]?e.removeAttribute(t):e.setAttribute(t,"popover"==t&&1==n?"":n))}}function j(e){return function(t){if(this.l){var n=this.l[t.type+e];if(null==t.t)t.t=u++;else if(t.t<n.u)return;return n(o.event?o.event(t):t)}}}function E(e,t,n,r,i,s,a,l,c,p){var u,h,d,f,g,b,_,y,S,T,R,z,C,I,P,A,O,j=t.type;if(null!=t.constructor)return null;128&n.__u&&(c=!!(32&n.__u),s=[l=t.__e=n.__e]),(u=o.__b)&&u(t);e:if("function"==typeof j)try{if(y=t.props,S="prototype"in j&&j.prototype.render,T=(u=j.contextType)&&r[u.__c],R=u?T?T.props.value:u.__:r,n.__c?_=(h=t.__c=n.__c).__=h.__E:(S?t.__c=h=new j(y,R):(t.__c=h=new v(y,R),h.constructor=j,h.render=U),T&&T.sub(h),h.props=y,h.state||(h.state={}),h.context=R,h.__n=r,d=h.__d=!0,h.__h=[],h._sb=[]),S&&null==h.__s&&(h.__s=h.state),S&&null!=j.getDerivedStateFromProps&&(h.__s==h.state&&(h.__s=x({},h.__s)),x(h.__s,j.getDerivedStateFromProps(y,h.__s))),f=h.props,g=h.state,h.__v=t,d)S&&null==j.getDerivedStateFromProps&&null!=h.componentWillMount&&h.componentWillMount(),S&&null!=h.componentDidMount&&h.__h.push(h.componentDidMount);else{if(S&&null==j.getDerivedStateFromProps&&y!==f&&null!=h.componentWillReceiveProps&&h.componentWillReceiveProps(y,R),!h.__e&&null!=h.shouldComponentUpdate&&!1===h.shouldComponentUpdate(y,h.__s,R)||t.__v==n.__v){for(t.__v!=n.__v&&(h.props=y,h.state=h.__s,h.__d=!1),t.__e=n.__e,t.__k=n.__k,t.__k.some(function(e){e&&(e.__=t)}),z=0;z<h._sb.length;z++)h.__h.push(h._sb[z]);h._sb=[],h.__h.length&&a.push(h);break e}null!=h.componentWillUpdate&&h.componentWillUpdate(y,h.__s,R),S&&null!=h.componentDidUpdate&&h.__h.push(function(){h.componentDidUpdate(f,g,b)})}if(h.context=R,h.props=y,h.__P=e,h.__e=!1,C=o.__r,I=0,S){for(h.state=h.__s,h.__d=!1,C&&C(t),u=h.render(h.props,h.state,h.context),P=0;P<h._sb.length;P++)h.__h.push(h._sb[P]);h._sb=[]}else do{h.__d=!1,C&&C(t),u=h.render(h.props,h.state,h.context),h.state=h.__s}while(h.__d&&++I<25);h.state=h.__s,null!=h.getChildContext&&(r=x(x({},r),h.getChildContext())),S&&!d&&null!=h.getSnapshotBeforeUpdate&&(b=h.getSnapshotBeforeUpdate(f,g)),A=u,null!=u&&u.type===w&&null==u.key&&(A=D(u.props.children)),l=$(e,m(A)?A:[A],t,n,r,i,s,a,l,c,p),h.base=t.__e,t.__u&=-161,h.__h.length&&a.push(h),_&&(h.__E=h.__=null)}catch(e){if(t.__v=null,c||null!=s)if(e.then){for(t.__u|=c?160:128;l&&8==l.nodeType&&l.nextSibling;)l=l.nextSibling;s[s.indexOf(l)]=null,t.__e=l}else for(O=s.length;O--;)k(s[O]);else t.__e=n.__e,t.__k=n.__k;o.__e(e,t,n)}else null==s&&t.__v==n.__v?(t.__k=n.__k,t.__e=n.__e):l=t.__e=B(n.__e,t,n,r,i,s,a,c,p);return(u=o.diffed)&&u(t),128&t.__u?void 0:l}function L(e,t,n){for(var r=0;r<n.length;r++)M(n[r],n[++r],n[++r]);o.__c&&o.__c(t,e),e.some(function(t){try{e=t.__h,t.__h=[],e.some(function(e){e.call(t)})}catch(e){o.__e(e,t.__v)}})}function D(e){return"object"!=typeof e||null==e||e.__b&&e.__b>0?e:m(e)?e.map(D):x({},e)}function B(e,t,n,i,s,a,l,c,p){var u,h,d,g,b,x,_,y=n.props,w=t.props,v=t.type;if("svg"==v?s="http://www.w3.org/2000/svg":"math"==v?s="http://www.w3.org/1998/Math/MathML":s||(s="http://www.w3.org/1999/xhtml"),null!=a)for(u=0;u<a.length;u++)if((b=a[u])&&"setAttribute"in b==!!v&&(v?b.localName==v:3==b.nodeType)){e=b,a[u]=null;break}if(null==e){if(null==v)return document.createTextNode(w);e=document.createElementNS(s,v,w.is&&w),c&&(o.__m&&o.__m(t,a),c=!1),a=null}if(null==v)y===w||c&&e.data==w||(e.data=w);else{if(a=a&&r.call(e.childNodes),y=n.props||f,!c&&null!=a)for(y={},u=0;u<e.attributes.length;u++)y[(b=e.attributes[u]).name]=b.value;for(u in y)if(b=y[u],"children"==u);else if("dangerouslySetInnerHTML"==u)d=b;else if(!(u in w)){if("value"==u&&"defaultValue"in w||"checked"==u&&"defaultChecked"in w)continue;O(e,u,null,b,s)}for(u in w)b=w[u],"children"==u?g=b:"dangerouslySetInnerHTML"==u?h=b:"value"==u?x=b:"checked"==u?_=b:c&&"function"!=typeof b||y[u]===b||O(e,u,b,y[u],s);if(h)c||d&&(h.__html==d.__html||h.__html==e.innerHTML)||(e.innerHTML=h.__html),t.__k=[];else if(d&&(e.innerHTML=""),$("template"==t.type?e.content:e,m(g)?g:[g],t,n,i,"foreignObject"==v?"http://www.w3.org/1999/xhtml":s,a,l,a?a[0]:n.__k&&S(n,0),c,p),null!=a)for(u=a.length;u--;)k(a[u]);c||(u="value","progress"==v&&null==x?e.removeAttribute("value"):null!=x&&(x!==e[u]||"progress"==v&&!x||"option"==v&&x!=y[u])&&O(e,u,x,y[u],s),u="checked",null!=_&&_!=e[u]&&O(e,u,_,y[u],s))}return e}function M(e,t,n){try{if("function"==typeof e){var r="function"==typeof e.__u;r&&e.__u(),r&&null==t||(e.__u=e(t))}else e.current=t}catch(e){o.__e(e,n)}}function q(e,t,n){var r,i;if(o.unmount&&o.unmount(e),(r=e.ref)&&(r.current&&r.current!=e.__e||M(r,null,t)),null!=(r=e.__c)){if(r.componentWillUnmount)try{r.componentWillUnmount()}catch(e){o.__e(e,t)}r.base=r.__P=null}if(r=e.__k)for(i=0;i<r.length;i++)r[i]&&q(r[i],t,n||"function"!=typeof e.type);n||k(e.__e),e.__c=e.__=e.__e=void 0}function U(e,t,n){return this.constructor(e,n)}r=g.slice,o={__e:function(e,t,n,r){for(var o,i,s;t=t.__;)if((o=t.__c)&&!o.__)try{if((i=o.constructor)&&null!=i.getDerivedStateFromError&&(o.setState(i.getDerivedStateFromError(e)),s=o.__d),null!=o.componentDidCatch&&(o.componentDidCatch(e,r||{}),s=o.__d),s)return o.__E=o}catch(t){e=t}throw e}},i=0,v.prototype.setState=function(e,t){var n;n=null!=this.__s&&this.__s!=this.state?this.__s:this.__s=x({},this.state),"function"==typeof e&&(e=e(x({},n),this.props)),e&&x(n,e),null!=e&&this.__v&&(t&&this._sb.push(t),R(this))},v.prototype.forceUpdate=function(e){this.__v&&(this.__e=!0,e&&this.__h.push(e),R(this))},v.prototype.render=w,s=[],l="function"==typeof Promise?Promise.prototype.then.bind(Promise.resolve()):setTimeout,c=function(e,t){return e.__v.__b-t.__v.__b},z.__r=0,p=/(PointerCapture)$|Capture$/i,u=0,h=j(!1),d=j(!0);var N={async:!1,breaks:!1,extensions:null,gfm:!0,hooks:null,pedantic:!1,renderer:null,silent:!1,tokenizer:null,walkTokens:null};function F(e){N=e}var Z={exec:()=>null};function W(e,t=""){let n="string"==typeof e?e:e.source,r={replace:(e,t)=>{let o="string"==typeof t?t:t.source;return o=o.replace(H.caret,"$1"),n=n.replace(e,o),r},getRegex:()=>new RegExp(n,t)};return r}var H={codeRemoveIndent:/^(?: {1,4}| {0,3}\t)/gm,outputLinkReplace:/\\([\[\]])/g,indentCodeCompensation:/^(\s+)(?:```)/,beginningSpace:/^\s+/,endingHash:/#$/,startingSpaceChar:/^ /,endingSpaceChar:/ $/,nonSpaceChar:/[^ ]/,newLineCharGlobal:/\n/g,tabCharGlobal:/\t/g,multipleSpaceGlobal:/\s+/g,blankLine:/^[ \t]*$/,doubleBlankLine:/\n[ \t]*\n[ \t]*$/,blockquoteStart:/^ {0,3}>/,blockquoteSetextReplace:/\n {0,3}((?:=+|-+) *)(?=\n|$)/g,blockquoteSetextReplace2:/^ {0,3}>[ \t]?/gm,listReplaceTabs:/^\t+/,listReplaceNesting:/^ {1,4}(?=( {4})*[^ ])/g,listIsTask:/^\[[ xX]\] /,listReplaceTask:/^\[[ xX]\] +/,anyLine:/\n.*\n/,hrefBrackets:/^<(.*)>$/,tableDelimiter:/[:|]/,tableAlignChars:/^\||\| *$/g,tableRowBlankLine:/\n[ \t]*$/,tableAlignRight:/^ *-+: *$/,tableAlignCenter:/^ *:-+: *$/,tableAlignLeft:/^ *:-+ *$/,startATag:/^<a /i,endATag:/^<\/a>/i,startPreScriptTag:/^<(pre|code|kbd|script)(\s|>)/i,endPreScriptTag:/^<\/(pre|code|kbd|script)(\s|>)/i,startAngleBracket:/^</,endAngleBracket:/>$/,pedanticHrefTitle:/^([^'"]*[^\s])\s+(['"])(.*)\2/,unicodeAlphaNumeric:/[\p{L}\p{N}]/u,escapeTest:/[&<>"']/,escapeReplace:/[&<>"']/g,escapeTestNoEncode:/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/,escapeReplaceNoEncode:/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/g,unescapeTest:/&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/gi,caret:/(^|[^\[])\^/g,percentDecode:/%25/g,findPipe:/\|/g,splitPipe:/ \|/,slashPipe:/\\\|/g,carriageReturn:/\r\n|\r/g,spaceLine:/^ +$/gm,notSpaceStart:/^\S*/,endingNewline:/\n$/,listItemRegex:e=>new RegExp(`^( {0,3}${e})((?:[\t ][^\\n]*)?(?:\\n|$))`),nextBulletRegex:e=>new RegExp(`^ {0,${Math.min(3,e-1)}}(?:[*+-]|\\d{1,9}[.)])((?:[ \t][^\\n]*)?(?:\\n|$))`),hrRegex:e=>new RegExp(`^ {0,${Math.min(3,e-1)}}((?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$)`),fencesBeginRegex:e=>new RegExp(`^ {0,${Math.min(3,e-1)}}(?:\`\`\`|~~~)`),headingBeginRegex:e=>new RegExp(`^ {0,${Math.min(3,e-1)}}#`),htmlBeginRegex:e=>new RegExp(`^ {0,${Math.min(3,e-1)}}<(?:[a-z].*>|!--)`,"i")},G=/^ {0,3}((?:-[\t ]*){3,}|(?:_[ \t]*){3,}|(?:\*[ \t]*){3,})(?:\n+|$)/,V=/(?:[*+-]|\d{1,9}[.)])/,Q=/^(?!bull |blockCode|fences|blockquote|heading|html|table)((?:.|\n(?!\s*?\n|bull |blockCode|fences|blockquote|heading|html|table))+?)\n {0,3}(=+|-+) *(?:\n+|$)/,Y=W(Q).replace(/bull/g,V).replace(/blockCode/g,/(?: {4}| {0,3}\t)/).replace(/fences/g,/ {0,3}(?:`{3,}|~{3,})/).replace(/blockquote/g,/ {0,3}>/).replace(/heading/g,/ {0,3}#{1,6}/).replace(/html/g,/ {0,3}<[^\n>]+>\n/).replace(/\|table/g,"").getRegex(),K=W(Q).replace(/bull/g,V).replace(/blockCode/g,/(?: {4}| {0,3}\t)/).replace(/fences/g,/ {0,3}(?:`{3,}|~{3,})/).replace(/blockquote/g,/ {0,3}>/).replace(/heading/g,/ {0,3}#{1,6}/).replace(/html/g,/ {0,3}<[^\n>]+>\n/).replace(/table/g,/ {0,3}\|?(?:[:\- ]*\|)+[\:\- ]*\n/).getRegex(),X=/^([^\n]+(?:\n(?!hr|heading|lheading|blockquote|fences|list|html|table| +\n)[^\n]+)*)/,J=/(?!\s*\])(?:\\.|[^\[\]\\])+/,ee=W(/^ {0,3}\[(label)\]: *(?:\n[ \t]*)?([^<\s][^\s]*|<.*?>)(?:(?: +(?:\n[ \t]*)?| *\n[ \t]*)(title))? *(?:\n+|$)/).replace("label",J).replace("title",/(?:"(?:\\"?|[^"\\])*"|'[^'\n]*(?:\n[^'\n]+)*\n?'|\([^()]*\))/).getRegex(),te=W(/^( {0,3}bull)([ \t][^\n]+?)?(?:\n|$)/).replace(/bull/g,V).getRegex(),ne="address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|search|section|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul",re=/<!--(?:-?>|[\s\S]*?(?:-->|$))/,oe=W("^ {0,3}(?:<(script|pre|style|textarea)[\\s>][\\s\\S]*?(?:</\\1>[^\\n]*\\n+|$)|comment[^\\n]*(\\n+|$)|<\\?[\\s\\S]*?(?:\\?>\\n*|$)|<![A-Z][\\s\\S]*?(?:>\\n*|$)|<!\\[CDATA\\[[\\s\\S]*?(?:\\]\\]>\\n*|$)|</?(tag)(?: +|\\n|/?>)[\\s\\S]*?(?:(?:\\n[ \t]*)+\\n|$)|<(?!script|pre|style|textarea)([a-z][\\w-]*)(?:attribute)*? */?>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n[ \t]*)+\\n|$)|</(?!script|pre|style|textarea)[a-z][\\w-]*\\s*>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n[ \t]*)+\\n|$))","i").replace("comment",re).replace("tag",ne).replace("attribute",/ +[a-zA-Z:_][\w.:-]*(?: *= *"[^"\n]*"| *= *'[^'\n]*'| *= *[^\s"'=<>`]+)?/).getRegex(),ie=W(X).replace("hr",G).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("|table","").replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",ne).getRegex(),se={blockquote:W(/^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/).replace("paragraph",ie).getRegex(),code:/^((?: {4}| {0,3}\t)[^\n]+(?:\n(?:[ \t]*(?:\n|$))*)?)+/,def:ee,fences:/^ {0,3}(`{3,}(?=[^`\n]*(?:\n|$))|~{3,})([^\n]*)(?:\n|$)(?:|([\s\S]*?)(?:\n|$))(?: {0,3}\1[~`]* *(?=\n|$)|$)/,heading:/^ {0,3}(#{1,6})(?=\s|$)(.*)(?:\n+|$)/,hr:G,html:oe,lheading:Y,list:te,newline:/^(?:[ \t]*(?:\n|$))+/,paragraph:ie,table:Z,text:/^[^\n]+/},ae=W("^ *([^\\n ].*)\\n {0,3}((?:\\| *)?:?-+:? *(?:\\| *:?-+:? *)*(?:\\| *)?)(?:\\n((?:(?! *\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)").replace("hr",G).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("blockquote"," {0,3}>").replace("code","(?: {4}| {0,3}\t)[^\\n]").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",ne).getRegex(),le={...se,lheading:K,table:ae,paragraph:W(X).replace("hr",G).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("table",ae).replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",ne).getRegex()},ce={...se,html:W("^ *(?:comment *(?:\\n|\\s*$)|<(tag)[\\s\\S]+?</\\1> *(?:\\n{2,}|\\s*$)|<tag(?:\"[^\"]*\"|'[^']*'|\\s[^'\"/>\\s]*)*?/?> *(?:\\n{2,}|\\s*$))").replace("comment",re).replace(/tag/g,"(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:|[^\\w\\s@]*@)\\b").getRegex(),def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +(["(][^\n]+[")]))? *(?:\n+|$)/,heading:/^(#{1,6})(.*)(?:\n+|$)/,fences:Z,lheading:/^(.+?)\n {0,3}(=+|-+) *(?:\n+|$)/,paragraph:W(X).replace("hr",G).replace("heading"," *#{1,6} *[^\n]").replace("lheading",Y).replace("|table","").replace("blockquote"," {0,3}>").replace("|fences","").replace("|list","").replace("|html","").replace("|tag","").getRegex()},pe=/^( {2,}|\\)\n(?!\s*$)/,ue=/[\p{P}\p{S}]/u,he=/[\s\p{P}\p{S}]/u,de=/[^\s\p{P}\p{S}]/u,fe=W(/^((?![*_])punctSpace)/,"u").replace(/punctSpace/g,he).getRegex(),ge=/(?!~)[\p{P}\p{S}]/u,be=/^(?:\*+(?:((?!\*)punct)|[^\s*]))|^_+(?:((?!_)punct)|([^\s_]))/,me=W(be,"u").replace(/punct/g,ue).getRegex(),xe=W(be,"u").replace(/punct/g,ge).getRegex(),ke="^[^_*]*?__[^_*]*?\\*[^_*]*?(?=__)|[^*]+(?=[^*])|(?!\\*)punct(\\*+)(?=[\\s]|$)|notPunctSpace(\\*+)(?!\\*)(?=punctSpace|$)|(?!\\*)punctSpace(\\*+)(?=notPunctSpace)|[\\s](\\*+)(?!\\*)(?=punct)|(?!\\*)punct(\\*+)(?!\\*)(?=punct)|notPunctSpace(\\*+)(?=notPunctSpace)",_e=W(ke,"gu").replace(/notPunctSpace/g,de).replace(/punctSpace/g,he).replace(/punct/g,ue).getRegex(),ye=W(ke,"gu").replace(/notPunctSpace/g,/(?:[^\s\p{P}\p{S}]|~)/u).replace(/punctSpace/g,/(?!~)[\s\p{P}\p{S}]/u).replace(/punct/g,ge).getRegex(),we=W("^[^_*]*?\\*\\*[^_*]*?_[^_*]*?(?=\\*\\*)|[^_]+(?=[^_])|(?!_)punct(_+)(?=[\\s]|$)|notPunctSpace(_+)(?!_)(?=punctSpace|$)|(?!_)punctSpace(_+)(?=notPunctSpace)|[\\s](_+)(?!_)(?=punct)|(?!_)punct(_+)(?!_)(?=punct)","gu").replace(/notPunctSpace/g,de).replace(/punctSpace/g,he).replace(/punct/g,ue).getRegex(),ve=W(/\\(punct)/,"gu").replace(/punct/g,ue).getRegex(),Se=W(/^<(scheme:[^\s\x00-\x1f<>]*|email)>/).replace("scheme",/[a-zA-Z][a-zA-Z0-9+.-]{1,31}/).replace("email",/[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/).getRegex(),Te=W(re).replace("(?:--\x3e|$)","--\x3e").getRegex(),Re=W("^comment|^</[a-zA-Z][\\w:-]*\\s*>|^<[a-zA-Z][\\w-]*(?:attribute)*?\\s*/?>|^<\\?[\\s\\S]*?\\?>|^<![a-zA-Z]+\\s[\\s\\S]*?>|^<!\\[CDATA\\[[\\s\\S]*?\\]\\]>").replace("comment",Te).replace("attribute",/\s+[a-zA-Z:_][\w.:-]*(?:\s*=\s*"[^"]*"|\s*=\s*'[^']*'|\s*=\s*[^\s"'=<>`]+)?/).getRegex(),ze=/(?:\[(?:\\.|[^\[\]\\])*\]|\\.|`[^`]*`|[^\[\]\\`])*?/,$e=W(/^!?\[(label)\]\(\s*(href)(?:(?:[ \t]*(?:\n[ \t]*)?)(title))?\s*\)/).replace("label",ze).replace("href",/<(?:\\.|[^\n<>\\])+>|[^ \t\n\x00-\x1f]*/).replace("title",/"(?:\\"?|[^"\\])*"|'(?:\\'?|[^'\\])*'|\((?:\\\)?|[^)\\])*\)/).getRegex(),Ce=W(/^!?\[(label)\]\[(ref)\]/).replace("label",ze).replace("ref",J).getRegex(),Ie=W(/^!?\[(ref)\](?:\[\])?/).replace("ref",J).getRegex(),Pe={_backpedal:Z,anyPunctuation:ve,autolink:Se,blockSkip:/\[[^[\]]*?\]\((?:\\.|[^\\\(\)]|\((?:\\.|[^\\\(\)])*\))*\)|`[^`]*?`|<(?! )[^<>]*?>/g,br:pe,code:/^(`+)([^`]|[^`][\s\S]*?[^`])\1(?!`)/,del:Z,emStrongLDelim:me,emStrongRDelimAst:_e,emStrongRDelimUnd:we,escape:/^\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/,link:$e,nolink:Ie,punctuation:fe,reflink:Ce,reflinkSearch:W("reflink|nolink(?!\\()","g").replace("reflink",Ce).replace("nolink",Ie).getRegex(),tag:Re,text:/^(`+|[^`])(?:(?= {2,}\n)|[\s\S]*?(?:(?=[\\<!\[`*_]|\b_|$)|[^ ](?= {2,}\n)))/,url:Z},Ae={...Pe,link:W(/^!?\[(label)\]\((.*?)\)/).replace("label",ze).getRegex(),reflink:W(/^!?\[(label)\]\s*\[([^\]]*)\]/).replace("label",ze).getRegex()},Oe={...Pe,emStrongRDelimAst:ye,emStrongLDelim:xe,url:W(/^((?:ftp|https?):\/\/|www\.)(?:[a-zA-Z0-9\-]+\.?)+[^\s<]*|^email/,"i").replace("email",/[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/).getRegex(),_backpedal:/(?:[^?!.,:;*_'"~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_'"~)]+(?!$))+/,del:/^(~~?)(?=[^\s~])((?:\\.|[^\\])*?(?:\\.|[^\s~\\]))\1(?=[^~]|$)/,text:/^([`~]+|[^`~])(?:(?= {2,}\n)|(?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)|[\s\S]*?(?:(?=[\\<!\[`*~_]|\b_|https?:\/\/|ftp:\/\/|www\.|$)|[^ ](?= {2,}\n)|[^a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-](?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)))/},je={...Oe,br:W(pe).replace("{2,}","*").getRegex(),text:W(Oe.text).replace("\\b_","\\b_| {2,}\\n").replace(/\{2,\}/g,"*").getRegex()},Ee={normal:se,gfm:le,pedantic:ce},Le={normal:Pe,gfm:Oe,breaks:je,pedantic:Ae},De={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},Be=e=>De[e];function Me(e,t){if(t){if(H.escapeTest.test(e))return e.replace(H.escapeReplace,Be)}else if(H.escapeTestNoEncode.test(e))return e.replace(H.escapeReplaceNoEncode,Be);return e}function qe(e){try{e=encodeURI(e).replace(H.percentDecode,"%")}catch{return null}return e}function Ue(e,t){let n=e.replace(H.findPipe,(e,t,n)=>{let r=!1,o=t;for(;--o>=0&&"\\"===n[o];)r=!r;return r?"|":" |"}),r=n.split(H.splitPipe),o=0;if(r[0].trim()||r.shift(),r.length>0&&!r.at(-1)?.trim()&&r.pop(),t)if(r.length>t)r.splice(t);else for(;r.length<t;)r.push("");for(;o<r.length;o++)r[o]=r[o].trim().replace(H.slashPipe,"|");return r}function Ne(e,t,n){let r=e.length;if(0===r)return"";let o=0;for(;o<r;){let i=e.charAt(r-o-1);if(i!==t||n){if(i===t||!n)break;o++}else o++}return e.slice(0,r-o)}function Fe(e,t,n,r,o){let i=t.href,s=t.title||null,a=e[1].replace(o.other.outputLinkReplace,"$1");r.state.inLink=!0;let l={type:"!"===e[0].charAt(0)?"image":"link",raw:n,href:i,title:s,text:a,tokens:r.inlineTokens(a)};return r.state.inLink=!1,l}var Ze=class{options;rules;lexer;constructor(e){this.options=e||N}space(e){let t=this.rules.block.newline.exec(e);if(t&&t[0].length>0)return{type:"space",raw:t[0]}}code(e){let t=this.rules.block.code.exec(e);if(t){let e=t[0].replace(this.rules.other.codeRemoveIndent,"");return{type:"code",raw:t[0],codeBlockStyle:"indented",text:this.options.pedantic?e:Ne(e,"\n")}}}fences(e){let t=this.rules.block.fences.exec(e);if(t){let e=t[0],n=function(e,t,n){let r=e.match(n.other.indentCodeCompensation);if(null===r)return t;let o=r[1];return t.split("\n").map(e=>{let t=e.match(n.other.beginningSpace);if(null===t)return e;let[r]=t;return r.length>=o.length?e.slice(o.length):e}).join("\n")}(e,t[3]||"",this.rules);return{type:"code",raw:e,lang:t[2]?t[2].trim().replace(this.rules.inline.anyPunctuation,"$1"):t[2],text:n}}}heading(e){let t=this.rules.block.heading.exec(e);if(t){let e=t[2].trim();if(this.rules.other.endingHash.test(e)){let t=Ne(e,"#");(this.options.pedantic||!t||this.rules.other.endingSpaceChar.test(t))&&(e=t.trim())}return{type:"heading",raw:t[0],depth:t[1].length,text:e,tokens:this.lexer.inline(e)}}}hr(e){let t=this.rules.block.hr.exec(e);if(t)return{type:"hr",raw:Ne(t[0],"\n")}}blockquote(e){let t=this.rules.block.blockquote.exec(e);if(t){let e=Ne(t[0],"\n").split("\n"),n="",r="",o=[];for(;e.length>0;){let t,i=!1,s=[];for(t=0;t<e.length;t++)if(this.rules.other.blockquoteStart.test(e[t]))s.push(e[t]),i=!0;else{if(i)break;s.push(e[t])}e=e.slice(t);let a=s.join("\n"),l=a.replace(this.rules.other.blockquoteSetextReplace,"\n    $1").replace(this.rules.other.blockquoteSetextReplace2,"");n=n?`${n}\n${a}`:a,r=r?`${r}\n${l}`:l;let c=this.lexer.state.top;if(this.lexer.state.top=!0,this.lexer.blockTokens(l,o,!0),this.lexer.state.top=c,0===e.length)break;let p=o.at(-1);if("code"===p?.type)break;if("blockquote"===p?.type){let t=p,i=t.raw+"\n"+e.join("\n"),s=this.blockquote(i);o[o.length-1]=s,n=n.substring(0,n.length-t.raw.length)+s.raw,r=r.substring(0,r.length-t.text.length)+s.text;break}if("list"===p?.type){let t=p,i=t.raw+"\n"+e.join("\n"),s=this.list(i);o[o.length-1]=s,n=n.substring(0,n.length-p.raw.length)+s.raw,r=r.substring(0,r.length-t.raw.length)+s.raw,e=i.substring(o.at(-1).raw.length).split("\n");continue}}return{type:"blockquote",raw:n,tokens:o,text:r}}}list(e){let t=this.rules.block.list.exec(e);if(t){let n=t[1].trim(),r=n.length>1,o={type:"list",raw:"",ordered:r,start:r?+n.slice(0,-1):"",loose:!1,items:[]};n=r?`\\d{1,9}\\${n.slice(-1)}`:`\\${n}`,this.options.pedantic&&(n=r?n:"[*+-]");let i=this.rules.other.listItemRegex(n),s=!1;for(;e;){let n=!1,r="",a="";if(!(t=i.exec(e))||this.rules.block.hr.test(e))break;r=t[0],e=e.substring(r.length);let l=t[2].split("\n",1)[0].replace(this.rules.other.listReplaceTabs,e=>" ".repeat(3*e.length)),c=e.split("\n",1)[0],p=!l.trim(),u=0;if(this.options.pedantic?(u=2,a=l.trimStart()):p?u=t[1].length+1:(u=t[2].search(this.rules.other.nonSpaceChar),u=u>4?1:u,a=l.slice(u),u+=t[1].length),p&&this.rules.other.blankLine.test(c)&&(r+=c+"\n",e=e.substring(c.length+1),n=!0),!n){let t=this.rules.other.nextBulletRegex(u),n=this.rules.other.hrRegex(u),o=this.rules.other.fencesBeginRegex(u),i=this.rules.other.headingBeginRegex(u),s=this.rules.other.htmlBeginRegex(u);for(;e;){let h,d=e.split("\n",1)[0];if(c=d,this.options.pedantic?(c=c.replace(this.rules.other.listReplaceNesting,"  "),h=c):h=c.replace(this.rules.other.tabCharGlobal,"    "),o.test(c)||i.test(c)||s.test(c)||t.test(c)||n.test(c))break;if(h.search(this.rules.other.nonSpaceChar)>=u||!c.trim())a+="\n"+h.slice(u);else{if(p||l.replace(this.rules.other.tabCharGlobal,"    ").search(this.rules.other.nonSpaceChar)>=4||o.test(l)||i.test(l)||n.test(l))break;a+="\n"+c}!p&&!c.trim()&&(p=!0),r+=d+"\n",e=e.substring(d.length+1),l=h.slice(u)}}o.loose||(s?o.loose=!0:this.rules.other.doubleBlankLine.test(r)&&(s=!0));let h,d=null;this.options.gfm&&(d=this.rules.other.listIsTask.exec(a),d&&(h="[ ] "!==d[0],a=a.replace(this.rules.other.listReplaceTask,""))),o.items.push({type:"list_item",raw:r,task:!!d,checked:h,loose:!1,text:a,tokens:[]}),o.raw+=r}let a=o.items.at(-1);if(!a)return;a.raw=a.raw.trimEnd(),a.text=a.text.trimEnd(),o.raw=o.raw.trimEnd();for(let e=0;e<o.items.length;e++)if(this.lexer.state.top=!1,o.items[e].tokens=this.lexer.blockTokens(o.items[e].text,[]),!o.loose){let t=o.items[e].tokens.filter(e=>"space"===e.type),n=t.length>0&&t.some(e=>this.rules.other.anyLine.test(e.raw));o.loose=n}if(o.loose)for(let e=0;e<o.items.length;e++)o.items[e].loose=!0;return o}}html(e){let t=this.rules.block.html.exec(e);if(t)return{type:"html",block:!0,raw:t[0],pre:"pre"===t[1]||"script"===t[1]||"style"===t[1],text:t[0]}}def(e){let t=this.rules.block.def.exec(e);if(t){let e=t[1].toLowerCase().replace(this.rules.other.multipleSpaceGlobal," "),n=t[2]?t[2].replace(this.rules.other.hrefBrackets,"$1").replace(this.rules.inline.anyPunctuation,"$1"):"",r=t[3]?t[3].substring(1,t[3].length-1).replace(this.rules.inline.anyPunctuation,"$1"):t[3];return{type:"def",tag:e,raw:t[0],href:n,title:r}}}table(e){let t=this.rules.block.table.exec(e);if(!t||!this.rules.other.tableDelimiter.test(t[2]))return;let n=Ue(t[1]),r=t[2].replace(this.rules.other.tableAlignChars,"").split("|"),o=t[3]?.trim()?t[3].replace(this.rules.other.tableRowBlankLine,"").split("\n"):[],i={type:"table",raw:t[0],header:[],align:[],rows:[]};if(n.length===r.length){for(let e of r)this.rules.other.tableAlignRight.test(e)?i.align.push("right"):this.rules.other.tableAlignCenter.test(e)?i.align.push("center"):this.rules.other.tableAlignLeft.test(e)?i.align.push("left"):i.align.push(null);for(let e=0;e<n.length;e++)i.header.push({text:n[e],tokens:this.lexer.inline(n[e]),header:!0,align:i.align[e]});for(let e of o)i.rows.push(Ue(e,i.header.length).map((e,t)=>({text:e,tokens:this.lexer.inline(e),header:!1,align:i.align[t]})));return i}}lheading(e){let t=this.rules.block.lheading.exec(e);if(t)return{type:"heading",raw:t[0],depth:"="===t[2].charAt(0)?1:2,text:t[1],tokens:this.lexer.inline(t[1])}}paragraph(e){let t=this.rules.block.paragraph.exec(e);if(t){let e="\n"===t[1].charAt(t[1].length-1)?t[1].slice(0,-1):t[1];return{type:"paragraph",raw:t[0],text:e,tokens:this.lexer.inline(e)}}}text(e){let t=this.rules.block.text.exec(e);if(t)return{type:"text",raw:t[0],text:t[0],tokens:this.lexer.inline(t[0])}}escape(e){let t=this.rules.inline.escape.exec(e);if(t)return{type:"escape",raw:t[0],text:t[1]}}tag(e){let t=this.rules.inline.tag.exec(e);if(t)return!this.lexer.state.inLink&&this.rules.other.startATag.test(t[0])?this.lexer.state.inLink=!0:this.lexer.state.inLink&&this.rules.other.endATag.test(t[0])&&(this.lexer.state.inLink=!1),!this.lexer.state.inRawBlock&&this.rules.other.startPreScriptTag.test(t[0])?this.lexer.state.inRawBlock=!0:this.lexer.state.inRawBlock&&this.rules.other.endPreScriptTag.test(t[0])&&(this.lexer.state.inRawBlock=!1),{type:"html",raw:t[0],inLink:this.lexer.state.inLink,inRawBlock:this.lexer.state.inRawBlock,block:!1,text:t[0]}}link(e){let t=this.rules.inline.link.exec(e);if(t){let e=t[2].trim();if(!this.options.pedantic&&this.rules.other.startAngleBracket.test(e)){if(!this.rules.other.endAngleBracket.test(e))return;let t=Ne(e.slice(0,-1),"\\");if((e.length-t.length)%2==0)return}else{let e=function(e,t){if(-1===e.indexOf(t[1]))return-1;let n=0;for(let r=0;r<e.length;r++)if("\\"===e[r])r++;else if(e[r]===t[0])n++;else if(e[r]===t[1]&&(n--,n<0))return r;return n>0?-2:-1}(t[2],"()");if(-2===e)return;if(e>-1){let n=(0===t[0].indexOf("!")?5:4)+t[1].length+e;t[2]=t[2].substring(0,e),t[0]=t[0].substring(0,n).trim(),t[3]=""}}let n=t[2],r="";if(this.options.pedantic){let e=this.rules.other.pedanticHrefTitle.exec(n);e&&(n=e[1],r=e[3])}else r=t[3]?t[3].slice(1,-1):"";return n=n.trim(),this.rules.other.startAngleBracket.test(n)&&(n=this.options.pedantic&&!this.rules.other.endAngleBracket.test(e)?n.slice(1):n.slice(1,-1)),Fe(t,{href:n&&n.replace(this.rules.inline.anyPunctuation,"$1"),title:r&&r.replace(this.rules.inline.anyPunctuation,"$1")},t[0],this.lexer,this.rules)}}reflink(e,t){let n;if((n=this.rules.inline.reflink.exec(e))||(n=this.rules.inline.nolink.exec(e))){let e=t[(n[2]||n[1]).replace(this.rules.other.multipleSpaceGlobal," ").toLowerCase()];if(!e){let e=n[0].charAt(0);return{type:"text",raw:e,text:e}}return Fe(n,e,n[0],this.lexer,this.rules)}}emStrong(e,t,n=""){let r=this.rules.inline.emStrongLDelim.exec(e);if(!(!r||r[3]&&n.match(this.rules.other.unicodeAlphaNumeric))&&(!r[1]&&!r[2]||!n||this.rules.inline.punctuation.exec(n))){let n,o,i=[...r[0]].length-1,s=i,a=0,l="*"===r[0][0]?this.rules.inline.emStrongRDelimAst:this.rules.inline.emStrongRDelimUnd;for(l.lastIndex=0,t=t.slice(-1*e.length+i);null!=(r=l.exec(t));){if(n=r[1]||r[2]||r[3]||r[4]||r[5]||r[6],!n)continue;if(o=[...n].length,r[3]||r[4]){s+=o;continue}if((r[5]||r[6])&&i%3&&!((i+o)%3)){a+=o;continue}if(s-=o,s>0)continue;o=Math.min(o,o+s+a);let t=[...r[0]][0].length,l=e.slice(0,i+r.index+t+o);if(Math.min(i,o)%2){let e=l.slice(1,-1);return{type:"em",raw:l,text:e,tokens:this.lexer.inlineTokens(e)}}let c=l.slice(2,-2);return{type:"strong",raw:l,text:c,tokens:this.lexer.inlineTokens(c)}}}}codespan(e){let t=this.rules.inline.code.exec(e);if(t){let e=t[2].replace(this.rules.other.newLineCharGlobal," "),n=this.rules.other.nonSpaceChar.test(e),r=this.rules.other.startingSpaceChar.test(e)&&this.rules.other.endingSpaceChar.test(e);return n&&r&&(e=e.substring(1,e.length-1)),{type:"codespan",raw:t[0],text:e}}}br(e){let t=this.rules.inline.br.exec(e);if(t)return{type:"br",raw:t[0]}}del(e){let t=this.rules.inline.del.exec(e);if(t)return{type:"del",raw:t[0],text:t[2],tokens:this.lexer.inlineTokens(t[2])}}autolink(e){let t=this.rules.inline.autolink.exec(e);if(t){let e,n;return"@"===t[2]?(e=t[1],n="mailto:"+e):(e=t[1],n=e),{type:"link",raw:t[0],text:e,href:n,tokens:[{type:"text",raw:e,text:e}]}}}url(e){let t;if(t=this.rules.inline.url.exec(e)){let e,n;if("@"===t[2])e=t[0],n="mailto:"+e;else{let r;do{r=t[0],t[0]=this.rules.inline._backpedal.exec(t[0])?.[0]??""}while(r!==t[0]);e=t[0],n="www."===t[1]?"http://"+t[0]:t[0]}return{type:"link",raw:t[0],text:e,href:n,tokens:[{type:"text",raw:e,text:e}]}}}inlineText(e){let t=this.rules.inline.text.exec(e);if(t){let e=this.lexer.state.inRawBlock;return{type:"text",raw:t[0],text:t[0],escaped:e}}}},We=class e{tokens;options;state;tokenizer;inlineQueue;constructor(e){this.tokens=[],this.tokens.links=Object.create(null),this.options=e||N,this.options.tokenizer=this.options.tokenizer||new Ze,this.tokenizer=this.options.tokenizer,this.tokenizer.options=this.options,this.tokenizer.lexer=this,this.inlineQueue=[],this.state={inLink:!1,inRawBlock:!1,top:!0};let t={other:H,block:Ee.normal,inline:Le.normal};this.options.pedantic?(t.block=Ee.pedantic,t.inline=Le.pedantic):this.options.gfm&&(t.block=Ee.gfm,this.options.breaks?t.inline=Le.breaks:t.inline=Le.gfm),this.tokenizer.rules=t}static get rules(){return{block:Ee,inline:Le}}static lex(t,n){return new e(n).lex(t)}static lexInline(t,n){return new e(n).inlineTokens(t)}lex(e){e=e.replace(H.carriageReturn,"\n"),this.blockTokens(e,this.tokens);for(let e=0;e<this.inlineQueue.length;e++){let t=this.inlineQueue[e];this.inlineTokens(t.src,t.tokens)}return this.inlineQueue=[],this.tokens}blockTokens(e,t=[],n=!1){for(this.options.pedantic&&(e=e.replace(H.tabCharGlobal,"    ").replace(H.spaceLine,""));e;){let r;if(this.options.extensions?.block?.some(n=>!!(r=n.call({lexer:this},e,t))&&(e=e.substring(r.raw.length),t.push(r),!0)))continue;if(r=this.tokenizer.space(e)){e=e.substring(r.raw.length);let n=t.at(-1);1===r.raw.length&&void 0!==n?n.raw+="\n":t.push(r);continue}if(r=this.tokenizer.code(e)){e=e.substring(r.raw.length);let n=t.at(-1);"paragraph"===n?.type||"text"===n?.type?(n.raw+=(n.raw.endsWith("\n")?"":"\n")+r.raw,n.text+="\n"+r.text,this.inlineQueue.at(-1).src=n.text):t.push(r);continue}if(r=this.tokenizer.fences(e)){e=e.substring(r.raw.length),t.push(r);continue}if(r=this.tokenizer.heading(e)){e=e.substring(r.raw.length),t.push(r);continue}if(r=this.tokenizer.hr(e)){e=e.substring(r.raw.length),t.push(r);continue}if(r=this.tokenizer.blockquote(e)){e=e.substring(r.raw.length),t.push(r);continue}if(r=this.tokenizer.list(e)){e=e.substring(r.raw.length),t.push(r);continue}if(r=this.tokenizer.html(e)){e=e.substring(r.raw.length),t.push(r);continue}if(r=this.tokenizer.def(e)){e=e.substring(r.raw.length);let n=t.at(-1);"paragraph"===n?.type||"text"===n?.type?(n.raw+=(n.raw.endsWith("\n")?"":"\n")+r.raw,n.text+="\n"+r.raw,this.inlineQueue.at(-1).src=n.text):this.tokens.links[r.tag]||(this.tokens.links[r.tag]={href:r.href,title:r.title});continue}if(r=this.tokenizer.table(e)){e=e.substring(r.raw.length),t.push(r);continue}if(r=this.tokenizer.lheading(e)){e=e.substring(r.raw.length),t.push(r);continue}let o=e;if(this.options.extensions?.startBlock){let t,n=1/0,r=e.slice(1);this.options.extensions.startBlock.forEach(e=>{t=e.call({lexer:this},r),"number"==typeof t&&t>=0&&(n=Math.min(n,t))}),n<1/0&&n>=0&&(o=e.substring(0,n+1))}if(this.state.top&&(r=this.tokenizer.paragraph(o))){let i=t.at(-1);n&&"paragraph"===i?.type?(i.raw+=(i.raw.endsWith("\n")?"":"\n")+r.raw,i.text+="\n"+r.text,this.inlineQueue.pop(),this.inlineQueue.at(-1).src=i.text):t.push(r),n=o.length!==e.length,e=e.substring(r.raw.length);continue}if(r=this.tokenizer.text(e)){e=e.substring(r.raw.length);let n=t.at(-1);"text"===n?.type?(n.raw+=(n.raw.endsWith("\n")?"":"\n")+r.raw,n.text+="\n"+r.text,this.inlineQueue.pop(),this.inlineQueue.at(-1).src=n.text):t.push(r);continue}if(e){let t="Infinite loop on byte: "+e.charCodeAt(0);if(this.options.silent){console.error(t);break}throw new Error(t)}}return this.state.top=!0,t}inline(e,t=[]){return this.inlineQueue.push({src:e,tokens:t}),t}inlineTokens(e,t=[]){let n=e,r=null;if(this.tokens.links){let e=Object.keys(this.tokens.links);if(e.length>0)for(;null!=(r=this.tokenizer.rules.inline.reflinkSearch.exec(n));)e.includes(r[0].slice(r[0].lastIndexOf("[")+1,-1))&&(n=n.slice(0,r.index)+"["+"a".repeat(r[0].length-2)+"]"+n.slice(this.tokenizer.rules.inline.reflinkSearch.lastIndex))}for(;null!=(r=this.tokenizer.rules.inline.anyPunctuation.exec(n));)n=n.slice(0,r.index)+"++"+n.slice(this.tokenizer.rules.inline.anyPunctuation.lastIndex);for(;null!=(r=this.tokenizer.rules.inline.blockSkip.exec(n));)n=n.slice(0,r.index)+"["+"a".repeat(r[0].length-2)+"]"+n.slice(this.tokenizer.rules.inline.blockSkip.lastIndex);let o=!1,i="";for(;e;){let r;if(o||(i=""),o=!1,this.options.extensions?.inline?.some(n=>!!(r=n.call({lexer:this},e,t))&&(e=e.substring(r.raw.length),t.push(r),!0)))continue;if(r=this.tokenizer.escape(e)){e=e.substring(r.raw.length),t.push(r);continue}if(r=this.tokenizer.tag(e)){e=e.substring(r.raw.length),t.push(r);continue}if(r=this.tokenizer.link(e)){e=e.substring(r.raw.length),t.push(r);continue}if(r=this.tokenizer.reflink(e,this.tokens.links)){e=e.substring(r.raw.length);let n=t.at(-1);"text"===r.type&&"text"===n?.type?(n.raw+=r.raw,n.text+=r.text):t.push(r);continue}if(r=this.tokenizer.emStrong(e,n,i)){e=e.substring(r.raw.length),t.push(r);continue}if(r=this.tokenizer.codespan(e)){e=e.substring(r.raw.length),t.push(r);continue}if(r=this.tokenizer.br(e)){e=e.substring(r.raw.length),t.push(r);continue}if(r=this.tokenizer.del(e)){e=e.substring(r.raw.length),t.push(r);continue}if(r=this.tokenizer.autolink(e)){e=e.substring(r.raw.length),t.push(r);continue}if(!this.state.inLink&&(r=this.tokenizer.url(e))){e=e.substring(r.raw.length),t.push(r);continue}let s=e;if(this.options.extensions?.startInline){let t,n=1/0,r=e.slice(1);this.options.extensions.startInline.forEach(e=>{t=e.call({lexer:this},r),"number"==typeof t&&t>=0&&(n=Math.min(n,t))}),n<1/0&&n>=0&&(s=e.substring(0,n+1))}if(r=this.tokenizer.inlineText(s)){e=e.substring(r.raw.length),"_"!==r.raw.slice(-1)&&(i=r.raw.slice(-1)),o=!0;let n=t.at(-1);"text"===n?.type?(n.raw+=r.raw,n.text+=r.text):t.push(r);continue}if(e){let t="Infinite loop on byte: "+e.charCodeAt(0);if(this.options.silent){console.error(t);break}throw new Error(t)}}return t}},He=class{options;parser;constructor(e){this.options=e||N}space(e){return""}code({text:e,lang:t,escaped:n}){let r=(t||"").match(H.notSpaceStart)?.[0],o=e.replace(H.endingNewline,"")+"\n";return r?'<pre><code class="language-'+Me(r)+'">'+(n?o:Me(o,!0))+"</code></pre>\n":"<pre><code>"+(n?o:Me(o,!0))+"</code></pre>\n"}blockquote({tokens:e}){return`<blockquote>\n${this.parser.parse(e)}</blockquote>\n`}html({text:e}){return e}heading({tokens:e,depth:t}){return`<h${t}>${this.parser.parseInline(e)}</h${t}>\n`}hr(e){return"<hr>\n"}list(e){let t=e.ordered,n=e.start,r="";for(let t=0;t<e.items.length;t++){let n=e.items[t];r+=this.listitem(n)}let o=t?"ol":"ul";return"<"+o+(t&&1!==n?' start="'+n+'"':"")+">\n"+r+"</"+o+">\n"}listitem(e){let t="";if(e.task){let n=this.checkbox({checked:!!e.checked});e.loose?"paragraph"===e.tokens[0]?.type?(e.tokens[0].text=n+" "+e.tokens[0].text,e.tokens[0].tokens&&e.tokens[0].tokens.length>0&&"text"===e.tokens[0].tokens[0].type&&(e.tokens[0].tokens[0].text=n+" "+Me(e.tokens[0].tokens[0].text),e.tokens[0].tokens[0].escaped=!0)):e.tokens.unshift({type:"text",raw:n+" ",text:n+" ",escaped:!0}):t+=n+" "}return t+=this.parser.parse(e.tokens,!!e.loose),`<li>${t}</li>\n`}checkbox({checked:e}){return"<input "+(e?'checked="" ':"")+'disabled="" type="checkbox">'}paragraph({tokens:e}){return`<p>${this.parser.parseInline(e)}</p>\n`}table(e){let t="",n="";for(let t=0;t<e.header.length;t++)n+=this.tablecell(e.header[t]);t+=this.tablerow({text:n});let r="";for(let t=0;t<e.rows.length;t++){let o=e.rows[t];n="";for(let e=0;e<o.length;e++)n+=this.tablecell(o[e]);r+=this.tablerow({text:n})}return r&&(r=`<tbody>${r}</tbody>`),"<table>\n<thead>\n"+t+"</thead>\n"+r+"</table>\n"}tablerow({text:e}){return`<tr>\n${e}</tr>\n`}tablecell(e){let t=this.parser.parseInline(e.tokens),n=e.header?"th":"td";return(e.align?`<${n} align="${e.align}">`:`<${n}>`)+t+`</${n}>\n`}strong({tokens:e}){return`<strong>${this.parser.parseInline(e)}</strong>`}em({tokens:e}){return`<em>${this.parser.parseInline(e)}</em>`}codespan({text:e}){return`<code>${Me(e,!0)}</code>`}br(e){return"<br>"}del({tokens:e}){return`<del>${this.parser.parseInline(e)}</del>`}link({href:e,title:t,tokens:n}){let r=this.parser.parseInline(n),o=qe(e);if(null===o)return r;let i='<a href="'+(e=o)+'"';return t&&(i+=' title="'+Me(t)+'"'),i+=">"+r+"</a>",i}image({href:e,title:t,text:n,tokens:r}){r&&(n=this.parser.parseInline(r,this.parser.textRenderer));let o=qe(e);if(null===o)return Me(n);let i=`<img src="${e=o}" alt="${n}"`;return t&&(i+=` title="${Me(t)}"`),i+=">",i}text(e){return"tokens"in e&&e.tokens?this.parser.parseInline(e.tokens):"escaped"in e&&e.escaped?e.text:Me(e.text)}},Ge=class{strong({text:e}){return e}em({text:e}){return e}codespan({text:e}){return e}del({text:e}){return e}html({text:e}){return e}text({text:e}){return e}link({text:e}){return""+e}image({text:e}){return""+e}br(){return""}},Ve=class e{options;renderer;textRenderer;constructor(e){this.options=e||N,this.options.renderer=this.options.renderer||new He,this.renderer=this.options.renderer,this.renderer.options=this.options,this.renderer.parser=this,this.textRenderer=new Ge}static parse(t,n){return new e(n).parse(t)}static parseInline(t,n){return new e(n).parseInline(t)}parse(e,t=!0){let n="";for(let r=0;r<e.length;r++){let o=e[r];if(this.options.extensions?.renderers?.[o.type]){let e=o,t=this.options.extensions.renderers[e.type].call({parser:this},e);if(!1!==t||!["space","hr","heading","code","table","blockquote","list","html","paragraph","text"].includes(e.type)){n+=t||"";continue}}let i=o;switch(i.type){case"space":n+=this.renderer.space(i);continue;case"hr":n+=this.renderer.hr(i);continue;case"heading":n+=this.renderer.heading(i);continue;case"code":n+=this.renderer.code(i);continue;case"table":n+=this.renderer.table(i);continue;case"blockquote":n+=this.renderer.blockquote(i);continue;case"list":n+=this.renderer.list(i);continue;case"html":n+=this.renderer.html(i);continue;case"paragraph":n+=this.renderer.paragraph(i);continue;case"text":{let o=i,s=this.renderer.text(o);for(;r+1<e.length&&"text"===e[r+1].type;)o=e[++r],s+="\n"+this.renderer.text(o);n+=t?this.renderer.paragraph({type:"paragraph",raw:s,text:s,tokens:[{type:"text",raw:s,text:s,escaped:!0}]}):s;continue}default:{let e='Token with "'+i.type+'" type was not found.';if(this.options.silent)return console.error(e),"";throw new Error(e)}}}return n}parseInline(e,t=this.renderer){let n="";for(let r=0;r<e.length;r++){let o=e[r];if(this.options.extensions?.renderers?.[o.type]){let e=this.options.extensions.renderers[o.type].call({parser:this},o);if(!1!==e||!["escape","html","link","image","strong","em","codespan","br","del","text"].includes(o.type)){n+=e||"";continue}}let i=o;switch(i.type){case"escape":case"text":n+=t.text(i);break;case"html":n+=t.html(i);break;case"link":n+=t.link(i);break;case"image":n+=t.image(i);break;case"strong":n+=t.strong(i);break;case"em":n+=t.em(i);break;case"codespan":n+=t.codespan(i);break;case"br":n+=t.br(i);break;case"del":n+=t.del(i);break;default:{let e='Token with "'+i.type+'" type was not found.';if(this.options.silent)return console.error(e),"";throw new Error(e)}}}return n}},Qe=class{options;block;constructor(e){this.options=e||N}static passThroughHooks=new Set(["preprocess","postprocess","processAllTokens"]);preprocess(e){return e}postprocess(e){return e}processAllTokens(e){return e}provideLexer(){return this.block?We.lex:We.lexInline}provideParser(){return this.block?Ve.parse:Ve.parseInline}},Ye=new class{defaults={async:!1,breaks:!1,extensions:null,gfm:!0,hooks:null,pedantic:!1,renderer:null,silent:!1,tokenizer:null,walkTokens:null};options=this.setOptions;parse=this.parseMarkdown(!0);parseInline=this.parseMarkdown(!1);Parser=Ve;Renderer=He;TextRenderer=Ge;Lexer=We;Tokenizer=Ze;Hooks=Qe;constructor(...e){this.use(...e)}walkTokens(e,t){let n=[];for(let r of e)switch(n=n.concat(t.call(this,r)),r.type){case"table":{let e=r;for(let r of e.header)n=n.concat(this.walkTokens(r.tokens,t));for(let r of e.rows)for(let e of r)n=n.concat(this.walkTokens(e.tokens,t));break}case"list":{let e=r;n=n.concat(this.walkTokens(e.items,t));break}default:{let e=r;this.defaults.extensions?.childTokens?.[e.type]?this.defaults.extensions.childTokens[e.type].forEach(r=>{let o=e[r].flat(1/0);n=n.concat(this.walkTokens(o,t))}):e.tokens&&(n=n.concat(this.walkTokens(e.tokens,t)))}}return n}use(...e){let t=this.defaults.extensions||{renderers:{},childTokens:{}};return e.forEach(e=>{let n={...e};if(n.async=this.defaults.async||n.async||!1,e.extensions&&(e.extensions.forEach(e=>{if(!e.name)throw new Error("extension name required");if("renderer"in e){let n=t.renderers[e.name];t.renderers[e.name]=n?function(...t){let r=e.renderer.apply(this,t);return!1===r&&(r=n.apply(this,t)),r}:e.renderer}if("tokenizer"in e){if(!e.level||"block"!==e.level&&"inline"!==e.level)throw new Error("extension level must be 'block' or 'inline'");let n=t[e.level];n?n.unshift(e.tokenizer):t[e.level]=[e.tokenizer],e.start&&("block"===e.level?t.startBlock?t.startBlock.push(e.start):t.startBlock=[e.start]:"inline"===e.level&&(t.startInline?t.startInline.push(e.start):t.startInline=[e.start]))}"childTokens"in e&&e.childTokens&&(t.childTokens[e.name]=e.childTokens)}),n.extensions=t),e.renderer){let t=this.defaults.renderer||new He(this.defaults);for(let n in e.renderer){if(!(n in t))throw new Error(`renderer '${n}' does not exist`);if(["options","parser"].includes(n))continue;let r=n,o=e.renderer[r],i=t[r];t[r]=(...e)=>{let n=o.apply(t,e);return!1===n&&(n=i.apply(t,e)),n||""}}n.renderer=t}if(e.tokenizer){let t=this.defaults.tokenizer||new Ze(this.defaults);for(let n in e.tokenizer){if(!(n in t))throw new Error(`tokenizer '${n}' does not exist`);if(["options","rules","lexer"].includes(n))continue;let r=n,o=e.tokenizer[r],i=t[r];t[r]=(...e)=>{let n=o.apply(t,e);return!1===n&&(n=i.apply(t,e)),n}}n.tokenizer=t}if(e.hooks){let t=this.defaults.hooks||new Qe;for(let n in e.hooks){if(!(n in t))throw new Error(`hook '${n}' does not exist`);if(["options","block"].includes(n))continue;let r=n,o=e.hooks[r],i=t[r];Qe.passThroughHooks.has(n)?t[r]=e=>{if(this.defaults.async)return Promise.resolve(o.call(t,e)).then(e=>i.call(t,e));let n=o.call(t,e);return i.call(t,n)}:t[r]=(...e)=>{let n=o.apply(t,e);return!1===n&&(n=i.apply(t,e)),n}}n.hooks=t}if(e.walkTokens){let t=this.defaults.walkTokens,r=e.walkTokens;n.walkTokens=function(e){let n=[];return n.push(r.call(this,e)),t&&(n=n.concat(t.call(this,e))),n}}this.defaults={...this.defaults,...n}}),this}setOptions(e){return this.defaults={...this.defaults,...e},this}lexer(e,t){return We.lex(e,t??this.defaults)}parser(e,t){return Ve.parse(e,t??this.defaults)}parseMarkdown(e){return(t,n)=>{let r={...n},o={...this.defaults,...r},i=this.onError(!!o.silent,!!o.async);if(!0===this.defaults.async&&!1===r.async)return i(new Error("marked(): The async option was set to true by an extension. Remove async: false from the parse options object to return a Promise."));if(typeof t>"u"||null===t)return i(new Error("marked(): input parameter is undefined or null"));if("string"!=typeof t)return i(new Error("marked(): input parameter is of type "+Object.prototype.toString.call(t)+", string expected"));o.hooks&&(o.hooks.options=o,o.hooks.block=e);let s=o.hooks?o.hooks.provideLexer():e?We.lex:We.lexInline,a=o.hooks?o.hooks.provideParser():e?Ve.parse:Ve.parseInline;if(o.async)return Promise.resolve(o.hooks?o.hooks.preprocess(t):t).then(e=>s(e,o)).then(e=>o.hooks?o.hooks.processAllTokens(e):e).then(e=>o.walkTokens?Promise.all(this.walkTokens(e,o.walkTokens)).then(()=>e):e).then(e=>a(e,o)).then(e=>o.hooks?o.hooks.postprocess(e):e).catch(i);try{o.hooks&&(t=o.hooks.preprocess(t));let e=s(t,o);o.hooks&&(e=o.hooks.processAllTokens(e)),o.walkTokens&&this.walkTokens(e,o.walkTokens);let n=a(e,o);return o.hooks&&(n=o.hooks.postprocess(n)),n}catch(e){return i(e)}}}onError(e,t){return n=>{if(n.message+="\nPlease report this to https://github.com/markedjs/marked.",e){let e="<p>An error occurred:</p><pre>"+Me(n.message+"",!0)+"</pre>";return t?Promise.resolve(e):e}if(t)return Promise.reject(n);throw n}}};function Ke(e,t){return Ye.parse(e,t)}function Xe(e){return Xe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Xe(e)}function Je(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function et(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Je(Object(n),!0).forEach(function(t){dt(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Je(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function tt(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,s,a=[],l=!0,c=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=i.call(n)).done)&&(a.push(r.value),a.length!==t);l=!0);}catch(e){c=!0,o=e}finally{try{if(!l&&null!=n.return&&(s=n.return(),Object(s)!==s))return}finally{if(c)throw o}}return a}}(e,t)||it(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function nt(){var e,t,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",o=n.toStringTag||"@@toStringTag";function i(n,r,o,i){var l=r&&r.prototype instanceof a?r:a,c=Object.create(l.prototype);return rt(c,"_invoke",function(n,r,o){var i,a,l,c=0,p=o||[],u=!1,h={p:0,n:0,v:e,a:d,f:d.bind(e,4),d:function(t,n){return i=t,a=0,l=e,h.n=n,s}};function d(n,r){for(a=n,l=r,t=0;!u&&c&&!o&&t<p.length;t++){var o,i=p[t],d=h.p,f=i[2];n>3?(o=f===r)&&(l=i[(a=i[4])?5:(a=3,3)],i[4]=i[5]=e):i[0]<=d&&((o=n<2&&d<i[1])?(a=0,h.v=r,h.n=i[1]):d<f&&(o=n<3||i[0]>r||r>f)&&(i[4]=n,i[5]=r,h.n=f,a=0))}if(o||n>1)return s;throw u=!0,r}return function(o,p,f){if(c>1)throw TypeError("Generator is already running");for(u&&1===p&&d(p,f),a=p,l=f;(t=a<2?e:l)||!u;){i||(a?a<3?(a>1&&(h.n=-1),d(a,l)):h.n=l:h.v=l);try{if(c=2,i){if(a||(o="next"),t=i[o]){if(!(t=t.call(i,l)))throw TypeError("iterator result is not an object");if(!t.done)return t;l=t.value,a<2&&(a=0)}else 1===a&&(t=i.return)&&t.call(i),a<2&&(l=TypeError("The iterator does not provide a '"+o+"' method"),a=1);i=e}else if((t=(u=h.n<0)?l:n.call(r,h))!==s)break}catch(t){i=e,a=1,l=t}finally{c=1}}return{value:t,done:u}}}(n,o,i),!0),c}var s={};function a(){}function l(){}function c(){}t=Object.getPrototypeOf;var p=[][r]?t(t([][r]())):(rt(t={},r,function(){return this}),t),u=c.prototype=a.prototype=Object.create(p);function h(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,c):(e.__proto__=c,rt(e,o,"GeneratorFunction")),e.prototype=Object.create(u),e}return l.prototype=c,rt(u,"constructor",c),rt(c,"constructor",l),l.displayName="GeneratorFunction",rt(c,o,"GeneratorFunction"),rt(u),rt(u,o,"Generator"),rt(u,r,function(){return this}),rt(u,"toString",function(){return"[object Generator]"}),(nt=function(){return{w:i,m:h}})()}function rt(e,t,n,r){var o=Object.defineProperty;try{o({},"",{})}catch(e){o=0}rt=function(e,t,n,r){if(t)o?o(e,t,{value:n,enumerable:!r,configurable:!r,writable:!r}):e[t]=n;else{var i=function(t,n){rt(e,t,function(e){return this._invoke(t,n,e)})};i("next",0),i("throw",1),i("return",2)}},rt(e,t,n,r)}function ot(e){return function(e){if(Array.isArray(e))return st(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||it(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function it(e,t){if(e){if("string"==typeof e)return st(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?st(e,t):void 0}}function st(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function at(e,t,n,r,o,i,s){try{var a=e[i](s),l=a.value}catch(e){return void n(e)}a.done?t(l):Promise.resolve(l).then(r,o)}function lt(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var i=e.apply(t,n);function s(e){at(i,r,o,s,a,"next",e)}function a(e){at(i,r,o,s,a,"throw",e)}s(void 0)})}}function ct(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,ft(r.key),r)}}function pt(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(pt=function(){return!!e})()}function ut(e){return ut=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},ut(e)}function ht(e,t){return ht=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},ht(e,t)}function dt(e,t,n){return(t=ft(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ft(e){var t=function(e){if("object"!=Xe(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=Xe(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==Xe(t)?t:t+""}Ke.options=Ke.setOptions=function(e){return Ye.setOptions(e),Ke.defaults=Ye.defaults,F(Ke.defaults),Ke},Ke.getDefaults=function(){return{async:!1,breaks:!1,extensions:null,gfm:!0,hooks:null,pedantic:!1,renderer:null,silent:!1,tokenizer:null,walkTokens:null}},Ke.defaults=N,Ke.use=function(...e){return Ye.use(...e),Ke.defaults=Ye.defaults,F(Ke.defaults),Ke},Ke.walkTokens=function(e,t){return Ye.walkTokens(e,t)},Ke.parseInline=Ye.parseInline,Ke.Parser=Ve,Ke.parser=Ve.parse,Ke.Renderer=He,Ke.TextRenderer=Ge,Ke.Lexer=We,Ke.lexer=We.lex,Ke.Tokenizer=Ze,Ke.Hooks=Qe,Ke.parse=Ke,Ke.options,Ke.setOptions,Ke.use,Ke.walkTokens,Ke.parseInline,Ve.parse,We.lex;var gt=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),dt(n=function(e,t,n){return t=ut(t),function(e,t){if(t&&("object"==Xe(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,pt()?Reflect.construct(t,n||[],ut(e).constructor):t.apply(e,n))}(this,t,[e]),"setupAccessibility",function(){document.addEventListener("keydown",n.handleGlobalKeyDown)}),dt(n,"handleGlobalKeyDown",function(e){"Escape"===e.key&&n.state.isOpen&&n.toggleChat()}),dt(n,"handleResize",function(){n.forceUpdate()}),dt(n,"generateSessionId",function(){return"session_".concat(Date.now(),"_").concat(Math.random().toString(36).substring(2,9))}),dt(n,"loadConfig",lt(nt().m(function e(){var t,r,o,i,s,a,l,c,p,u,h,d,f,g;return nt().w(function(e){for(;;)switch(e.p=e.n){case 0:if(!n.state.isLoadingConfig&&!n.state.config){e.n=1;break}return e.a(2);case 1:return n.setState({isLoadingConfig:!0}),console.log("--- Widget Initialization ---"),t=n.generateSessionId(),n.setState({sessionId:t}),console.log("🆔 Generated new sessionId: ".concat(t)),e.p=2,o=n.props.config||{},i=o.clientId,s=void 0===i?"e6f484a3-c3cb-4e01-b8ce-a276f4b7355c":i,a=o.apiUrl,e.n=3,fetch("".concat(a,"/api/v1/widget/config/").concat(s,"?cacheBust=").concat((new Date).getTime()));case 3:if((l=e.v).ok){e.n=4;break}throw new Error("Failed to load configuration");case 4:return e.n=5,l.json();case 5:if(c=e.v,p=localStorage.getItem("visitorId"),console.log("🔍 Checking for existing visitorId... Found: ".concat(p||"None")),!p){e.n=9;break}return e.n=6,fetch("".concat(a,"/v1/visitor"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({visitorId:p})});case 6:if(!(h=e.v).ok){e.n=8;break}return e.n=7,h.json();case 7:u=e.v,console.log("✅ Found returning visitor:",u),e.n=9;break;case 8:console.log("🤔 Visitor ID found but no record on backend. Clearing invalid ID."),localStorage.removeItem("visitorId");case 9:if(u){e.n=13;break}return console.log("🔄 Creating new visitor session..."),e.n=10,fetch("".concat(a,"/v1/sessions"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({clientId:s})});case 10:if((d=e.v).ok){e.n=11;break}throw new Error("Failed to create visitor session");case 11:return e.n=12,d.json();case 12:u=e.v,console.log("✨ New visitor created:",u),localStorage.setItem("visitorId",u.visitor_id),console.log("💾 Stored new visitorId in localStorage: ".concat(u.visitor_id));case 13:n.setState({config:c,visitorId:u.visitor_id,isLoadingConfig:!1,messages:[]}),console.log("👤 Visitor ID: ".concat(u.visitor_id)),console.log("--- Initialization Complete ---"),f={id:Date.now(),text:(null===(r=c.widgetSettings)||void 0===r?void 0:r.welcomeMessage)||"Olá! Sou o seu assistente virtual. Como posso ajudar?",sender:"bot",timestamp:new Date,ariaLabel:"Welcome message from chatbot"},n.setState(function(e){return{messages:[].concat(ot(e.messages),[f])}}),e.n=15;break;case 14:e.p=14,g=e.v,console.error("💥 Widget initialization error:",g),n.setState({error:"Failed to initialize chatbot",isLoadingConfig:!1});case 15:return e.a(2)}},e,null,[[2,14]])}))),dt(n,"toggleChat",function(){n.setState(function(e){return{isOpen:!e.isOpen}},function(){n.state.isOpen&&n.inputRef&&setTimeout(function(){return n.inputRef.focus()},100),n.announceToScreenReader(n.state.isOpen?"Chat window opened":"Chat window closed")})}),dt(n,"announceToScreenReader",function(e){var t=document.createElement("div");t.setAttribute("aria-live","polite"),t.setAttribute("aria-atomic","true"),t.style.position="absolute",t.style.left="-10000px",t.style.width="1px",t.style.height="1px",t.style.overflow="hidden",t.textContent=e,document.body.appendChild(t),setTimeout(function(){return document.body.removeChild(t)},1e3)}),dt(n,"sendMessage",lt(nt().m(function e(){var t,r,o,i,s,a,l,c,p,u,h,d,f,g=arguments;return nt().w(function(e){for(;;)switch(e.p=e.n){case 0:if(t=g.length>0&&void 0!==g[0]&&g[0],r=n.state,o=r.inputValue,i=r.messages,r.config,s=n.props.config||{},a=s.apiUrl,o.trim()){e.n=1;break}return e.a(2);case 1:return console.log("🔧 Widget Debug Info:"),console.log("📡 API URL:",a),console.log("⚙️ Props config:",n.props.config),console.log("🎯 Target endpoint:","".concat(a,"/api/chat")),t||(l={id:Date.now(),text:o,sender:"user",timestamp:new Date,ariaLabel:"You said: ".concat(o)},n.setState({messages:[].concat(ot(i),[l])}),n.announceToScreenReader("Message sent")),n.setState({inputValue:"",isTyping:!0}),e.p=2,e.n=3,fetch("".concat(a,"/api/chat"),{method:"POST",headers:{"Content-Type":"application/json","X-Client-Id":(null===(c=n.props.config)||void 0===c?void 0:c.clientId)||"e6f484a3-c3cb-4e01-b8ce-a276f4b7355c"},body:JSON.stringify({query:o,visitorId:n.state.visitorId,sessionId:n.state.sessionId,pageUrl:n.props.config.pageUrl,context:i.slice(-5)})});case 3:if((p=e.v).ok){e.n=4;break}throw new Error("HTTP ".concat(p.status,": ").concat(p.statusText));case 4:return e.n=5,p.json();case 5:u=e.v,h={id:Date.now()+1,text:u.response||"Sorry, I encountered an error.",sender:"bot",timestamp:new Date,ariaLabel:"Chatbot responded: ".concat(u.response||"Sorry, I encountered an error.")},n.setState(function(e){return{messages:[].concat(ot(e.messages),[h]),isTyping:!1}}),n.announceToScreenReader("New message received"),e.n=7;break;case 6:e.p=6,f=e.v,console.error("❌ Chat API Error:",f),console.error("🌐 Failed URL:","".concat(a,"/api/chat")),d={id:Date.now()+1,text:"Sorry, I'm having trouble responding right now. Please try again.",sender:"bot",timestamp:new Date,ariaLabel:"Error message from chatbot"},n.setState(function(e){return{messages:[].concat(ot(e.messages),[d]),isTyping:!1}}),n.announceToScreenReader("Error occurred while sending message");case 7:return e.a(2)}},e,null,[[2,6]])}))),dt(n,"handleKeyPress",function(e){"Enter"!==e.key||e.shiftKey||(e.preventDefault(),n.sendMessage())}),dt(n,"getResponsiveStyles",function(){var e=window.innerWidth<=768,t=(window.innerWidth,n.state.config),r=(null==t?void 0:t.widgetSettings)||{},o="dark"===r.theme,i="rgba(20, 20, 20, .9)",s=tt((r.position||"bottom-right").split("-"),2),a=s[0],l=s[1];return{chatWindow:et(et({position:"fixed"},{bottom:"bottom"===a?e?"0":"20px":"auto",top:"top"===a?e?"0":"20px":"auto",right:"right"===l?e?"0":"20px":"auto",left:"left"===l?e?"0":"20px":"auto"}),{},{width:e?"100%":"400px",height:e&&r.mobileFullScreen?"100vh":e?"90vh":r.maxHeight||"600px",maxHeight:e?"100vh":"85vh",background:i,color:"white",borderRadius:"0 !important",border:"1px solid #3f3f3f !important",boxShadow:e?"none":o?"0 20px 40px rgba(0,0,0,0.4), 0 5px 10px rgba(0,0,0,0.2)":"0 20px 40px rgba(0,0,0,0.15), 0 5px 10px rgba(0,0,0,0.1)",display:"flex",flexDirection:"column",overflow:"hidden",zIndex:"999999",fontFamily:r.fontFamily||"inherit",fontSize:r.fontSize||"14px",transition:"all 0.3s cubic-bezier(0.4, 0.0, 0.2, 1)"}),chatButton:{width:"auto",height:e?"56px":"64px",padding:e?"12px 16px":"16px 20px",borderRadius:"0 !important",border:"1px solid #3f3f3f !important",cursor:"pointer",fontSize:e?"20px":"24px",boxShadow:o?"0 6px 20px rgba(0,0,0,0.4), 0 2px 4px rgba(0,0,0,0.2)":"0 6px 20px rgba(0,0,0,0.15), 0 2px 4px rgba(0,0,0,0.1)",transition:"all 0.3s cubic-bezier(0.4, 0.0, 0.2, 1)",position:"relative",display:"flex",alignItems:"center",justifyContent:"center",gap:e?"8px":"12px"},messagesContainer:{flex:"1",overflowY:"auto",padding:e?"12px":"20px",display:"flex",flexDirection:"column",gap:e?"8px":"12px",scrollBehavior:"smooth",background:i,border:"1px solid #3f3f3f !important"},inputContainer:{padding:e?"12px":"20px",borderTop:"1px solid ".concat("#3f3f3f"),display:"flex",gap:e?"8px":"12px",alignItems:"flex-end",background:i,border:"1px solid #3f3f3f !important"},input:{flex:"1",padding:e?"12px 16px":"14px 18px",border:"1px solid #3f3f3f !important",borderRadius:"0 !important",outline:"none",fontSize:e?"16px":r.fontSize||"14px",resize:"none",fontFamily:"inherit",minHeight:e?"40px":"44px",maxHeight:"120px",transition:"border-color 0.2s ease",background:"rgba(20, 20, 20, .9) !important",color:"white !important"},sendButton:{padding:e?"12px 16px":"14px 20px",border:"1px solid #3f3f3f !important",borderRadius:"0 !important",cursor:"pointer",fontSize:e?"14px":"16px",fontWeight:"600",minWidth:e?"60px":"80px",height:e?"40px":"44px",transition:"all 0.2s ease",display:"flex",alignItems:"center",justifyContent:"center"},messageBot:{background:"rgba(20, 20, 20, .9) !important",color:"white !important",borderRadius:"0 !important",border:"1px solid #3f3f3f !important"},messageUser:{borderRadius:"0 !important",border:"1px solid #3f3f3f !important"}}}),n.state={isOpen:!1,messages:[],inputValue:"",isTyping:!1,config:null,error:null,isLoadingConfig:!1,visitorId:null,sessionId:null},n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ht(e,t)}(t,e),function(e,t){return t&&ct(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}(t,[{key:"componentDidMount",value:function(){this.loadConfig(),this.handleResize(),window.addEventListener("resize",this.handleResize),this.setupAccessibility()}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.handleResize)}},{key:"render",value:function(){var e,t=this,n=this.state,r=n.isOpen,o=n.messages,i=n.inputValue,s=n.isTyping,a=n.config,l=n.error;if(l)return _("div",{style:"color: white !important; padding: 12px; font-size: 14px; background: rgba(20, 20, 20, .9) !important; border-radius: 0 !important; box-shadow: 0 4px 12px rgba(0,0,0,0.15); border: 1px solid #3f3f3f !important;"},l);if(!a)return _("div",{style:"padding: 12px; font-size: 14px; background: rgba(20, 20, 20, .9) !important; border-radius: 0 !important; box-shadow: 0 4px 12px rgba(0,0,0,0.15); color: white !important; border: 1px solid #3f3f3f !important;"},"Loading...");var c=a.widgetSettings||{},p=(c.theme,"rgba(20, 20, 20, .9)"),u="white",h="rgba(20, 20, 20, .9)",d=c.chatIcon||"💬",f=this.getResponsiveStyles(),g=window.innerWidth<=768;return _(w,null,_("button",{onClick:this.toggleChat,style:"\n          ".concat(Object.entries(f.chatButton).map(function(e){var t=tt(e,2),n=t[0],r=t[1];return"".concat(n.replace(/([A-Z])/g,"-$1").toLowerCase(),": ").concat(r)}).join("; "),";\n          background: ").concat(p,";\n          color: white;\n        "),onMouseOver:function(e){return e.target.style.transform="scale(1.05)"},onMouseOut:function(e){return e.target.style.transform="scale(1)"},"aria-label":"Open chat","aria-expanded":r},[_("span",{style:"font-size: ".concat(g?"20px":"24px",";")},d),_("span",{style:"font-size: ".concat(g?"12px":"14px","; font-weight: 600; white-space: nowrap;")},"Olivia - Assistente Virtual")]),r&&_("div",{style:Object.entries(f.chatWindow).map(function(e){var t=tt(e,2),n=t[0],r=t[1];return"".concat(n.replace(/([A-Z])/g,"-$1").toLowerCase(),": ").concat(r)}).join("; "),role:"dialog","aria-label":"Chat window"},[_("div",{style:"\n            background: ".concat(p,";\n            color: white;\n            padding: ").concat(g?"16px":"20px",";\n            display: flex;\n            justify-content: space-between;\n            align-items: center;\n            min-height: ").concat(g?"60px":"64px",";\n          ")},[_("div",{style:"display: flex; align-items: center; gap: 12px;"},[_("div",{style:"\n                width: ".concat(g?"32px":"36px",";\n                height: ").concat(g?"32px":"36px",";\n                display: flex;\n                align-items: center;\n                justify-content: center;\n                font-size: ").concat(g?"16px":"18px",";\n              ")},d),_("h3",{style:"margin: 0; font-size: ".concat(g?"16px":"18px","; font-weight: 600;")},(null===(e=a.widgetSettings)||void 0===e?void 0:e.headerText)||"Chat with us!")]),_("button",{onClick:this.toggleChat,style:"\n              background: none;\n              border: none;\n              color: white;\n              font-size: ".concat(g?"24px":"28px",";\n              cursor: pointer;\n              padding: 8px;\n              border-radius: 0 !important;\n              border: 1px solid #3f3f3f !important;\n              width: ").concat(g?"40px":"44px",";\n              height: ").concat(g?"40px":"44px",";\n              display: flex;\n              align-items: center;\n              justify-content: center;\n              transition: background-color 0.2s ease;\n            "),onMouseOver:function(e){return e.target.style.backgroundColor="rgba(255,255,255,0.1)"},onMouseOut:function(e){return e.target.style.backgroundColor="transparent"},"aria-label":"Close chat"},"×")]),_("div",{id:"chat-instructions",style:"position: absolute; left: -10000px; width: 1px; height: 1px; overflow: hidden;"},"Press Enter to send message, Escape to close chat"),_("div",{style:Object.entries(f.messagesContainer).map(function(e){var t=tt(e,2),n=t[0],r=t[1];return"".concat(n.replace(/([A-Z])/g,"-$1").toLowerCase(),": ").concat(r)}).join("; "),ref:function(e){e&&(e.scrollTop=e.scrollHeight)},role:"log","aria-live":"polite","aria-label":"Chat messages",className:"widget-messages"},[].concat(ot(o.map(function(e){return _("div",{key:e.id,style:"\n                  align-self: ".concat("user"===e.sender?"flex-end":"flex-start",";\n                  background: ").concat("user"===e.sender?"#6b7280":h,";\n                  color: ").concat("user"===e.sender?"white":u,";\n                  padding: ").concat(g?"10px 14px":"12px 16px",";\n                  border-radius: ").concat("user"===e.sender?f.messageUser.borderRadius:f.messageBot.borderRadius,";\n                                    max-width: 85%;\n                  word-wrap: break-word;\n                  font-size: ").concat(g?"14px":"15px",";\n                  line-height: 1.4;\n                  box-shadow: 0 1px 2px rgba(0,0,0,0.1);\n                "),role:"article","aria-label":e.ariaLabel||"".concat("user"===e.sender?"Your message":"Bot message",": ").concat(e.text),className:"widget-message widget-message-".concat(e.sender)},["bot"===e.sender?_("div",{dangerouslySetInnerHTML:{__html:Ke.parse(e.text)}}):e.text])})),[s&&_("div",{style:"\n              align-self: flex-start;\n              background: ".concat(h,";\n              color: ").concat(u,";\n              padding: ").concat(g?"10px 14px":"12px 16px",";\n                             border-radius: ").concat(f.messageBot.borderRadius,";\n              font-style: italic;\n              font-size: ").concat(g?"14px":"15px",";\n              display: flex;\n              align-items: center;\n              gap: 8px;\n            ")},[_("span",null,"Typing"),_("div",{style:"\n                display: flex;\n                gap: 2px;\n              "},[_("div",{style:"width: 4px; height: 4px; background: #64748b; border-radius: 50%; animation: pulse 1.5s ease-in-out infinite;"}),_("div",{style:"width: 4px; height: 4px; background: #64748b; border-radius: 50%; animation: pulse 1.5s ease-in-out 0.1s infinite;"}),_("div",{style:"width: 4px; height: 4px; background: #64748b; border-radius: 50%; animation: pulse 1.5s ease-in-out 0.2s infinite;"})])])])),_("div",{style:Object.entries(f.inputContainer).map(function(e){var t=tt(e,2),n=t[0],r=t[1];return"".concat(n.replace(/([A-Z])/g,"-$1").toLowerCase(),": ").concat(r)}).join("; ")},[_("textarea",{value:i,onInput:function(e){return t.setState({inputValue:e.target.value})},onKeyPress:this.handleKeyPress,placeholder:"Escreva aqui...",style:Object.entries(f.input).map(function(e){var t=tt(e,2),n=t[0],r=t[1];return"".concat(n.replace(/([A-Z])/g,"-$1").toLowerCase(),": ").concat(r)}).join("; "),rows:1,"aria-label":"Type your message here","aria-describedby":"chat-instructions",ref:function(e){t.inputRef=e},className:"widget-input"}),_("button",{onClick:this.sendMessage,disabled:!i.trim(),style:"\n                ".concat(Object.entries(f.sendButton).map(function(e){var t=tt(e,2),n=t[0],r=t[1];return"".concat(n.replace(/([A-Z])/g,"-$1").toLowerCase(),": ").concat(r)}).join("; "),";\n                background: ").concat(i.trim()?"#6b7280":"#4b5563",";\n                color: white;\n                opacity: ").concat(i.trim()?"1":"0.7",";\n              "),"aria-label":"Send message","aria-disabled":!i.trim(),className:"widget-button widget-send-button"},g?"→":"Enviar")])]))}}])}(v);const bt=gt;var mt=n(591),xt=n.n(mt),kt=n(740),_t=n.n(kt),yt=n(128),wt=n.n(yt),vt=n(855),St=n.n(vt),Tt=n(51),Rt=n.n(Tt),zt=n(656),$t=n.n(zt),Ct=n(598),It={};return It.styleTagTransform=$t(),It.setAttributes=St(),It.insert=wt().bind(null,"head"),It.domAPI=_t(),It.insertStyleElement=Rt(),xt()(Ct.A,It),Ct.A&&Ct.A.locals&&Ct.A.locals,window.initViriatoChatbot=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=document.getElementById("viriato-chatbot-container");t||((t=document.createElement("div")).id="viriato-chatbot-container",t.className="widget-container",t.style.cssText="\n      position: fixed;\n      bottom: 20px;\n      right: 20px;\n      z-index: 999999;\n      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Oxygen', 'Ubuntu', 'Cantarell', sans-serif;\n    ",e.theme&&(e.theme.primaryColor&&t.style.setProperty("--primary-color",e.theme.primaryColor),e.theme.fontFamily&&(t.style.fontFamily=e.theme.fontFamily)),document.body.appendChild(t)),e.pageUrl=window.location.href,function(e,t,n){var i,s,a,l;t==document&&(t=document.documentElement),o.__&&o.__(e,t),s=(i="function"==typeof n)?null:n&&n.__k||t.__k,a=[],l=[],E(t,e=(!i&&n||t).__k=_(w,null,[e]),s||f,f,t.namespaceURI,!i&&n?[n]:s?null:t.firstChild?r.call(t.childNodes):null,a,!i&&n?n:s?s.__e:t.firstChild,i,l),L(a,e,l)}(_(bt,{config:e}),t)},document.addEventListener("DOMContentLoaded",function(){var e=document.querySelector('script[src*="loader.js"]');if(e&&"false"!==e.dataset.autoInit){var t={clientId:e.dataset.clientId||"e6f484a3-c3cb-4e01-b8ce-a276f4b7355c",apiUrl:e.dataset.apiUrl||"https://chatbot1-eta.vercel.app",theme:{primaryColor:e.dataset.primaryColor,fontFamily:e.dataset.fontFamily}};window.initViriatoChatbot(t)}}),{}})());