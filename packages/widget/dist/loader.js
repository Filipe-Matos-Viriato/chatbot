/*! For license information please see loader.js.LICENSE.txt */
!function(n,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.ViriatoChatbot=e():n.ViriatoChatbot=e()}(this,()=>(()=>{"use strict";var n={51:n=>{n.exports=function(n){var e=document.createElement("style");return n.setAttributes(e,n.attributes),n.insert(e,n.options),e}},128:n=>{var e={};n.exports=function(n,t){var o=function(n){if(void 0===e[n]){var t=document.querySelector(n);if(window.HTMLIFrameElement&&t instanceof window.HTMLIFrameElement)try{t=t.contentDocument.head}catch(n){t=null}e[n]=t}return e[n]}(n);if(!o)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");o.appendChild(t)}},591:n=>{var e=[];function t(n){for(var t=-1,o=0;o<e.length;o++)if(e[o].identifier===n){t=o;break}return t}function o(n,o){for(var i={},a=[],s=0;s<n.length;s++){var c=n[s],l=o.base?c[0]+o.base:c[0],u=i[l]||0,d="".concat(l," ").concat(u);i[l]=u+1;var p=t(d),f={css:c[1],media:c[2],sourceMap:c[3],supports:c[4],layer:c[5]};if(-1!==p)e[p].references++,e[p].updater(f);else{var b=r(f,o);o.byIndex=s,e.splice(s,0,{identifier:d,updater:b,references:1})}a.push(d)}return a}function r(n,e){var t=e.domAPI(e);return t.update(n),function(e){if(e){if(e.css===n.css&&e.media===n.media&&e.sourceMap===n.sourceMap&&e.supports===n.supports&&e.layer===n.layer)return;t.update(n=e)}else t.remove()}}n.exports=function(n,r){var i=o(n=n||[],r=r||{});return function(n){n=n||[];for(var a=0;a<i.length;a++){var s=t(i[a]);e[s].references--}for(var c=o(n,r),l=0;l<i.length;l++){var u=t(i[l]);0===e[u].references&&(e[u].updater(),e.splice(u,1))}i=c}}},598:(n,e,t)=>{t.d(e,{A:()=>s});var o=t(758),r=t.n(o),i=t(935),a=t.n(i)()(r());a.push([n.id,"/* Widget animations and responsive styles */\n@keyframes pulse {\n  0%, 100% {\n    opacity: 0.4;\n    transform: scale(0.8);\n  }\n  50% {\n    opacity: 1;\n    transform: scale(1);\n  }\n}\n\n@keyframes slideUp {\n  from {\n    opacity: 0;\n    transform: translateY(20px);\n  }\n  to {\n    opacity: 1;\n    transform: translateY(0);\n  }\n}\n\n@keyframes fadeIn {\n  from {\n    opacity: 0;\n  }\n  to {\n    opacity: 1;\n  }\n}\n\n/* Widget container responsive adjustments */\n.widget-container {\n  animation: fadeIn 0.3s ease-out;\n}\n\n.widget-chat-window {\n  animation: slideUp 0.3s cubic-bezier(0.4, 0.0, 0.2, 1);\n}\n\n.widget-message {\n  animation: slideUp 0.2s ease-out;\n}\n\n/* Custom scrollbar for messages */\n.widget-messages::-webkit-scrollbar {\n  width: 6px;\n}\n\n.widget-messages::-webkit-scrollbar-track {\n  background: #f1f5f9;\n  border-radius: 3px;\n}\n\n.widget-messages::-webkit-scrollbar-thumb {\n  background: #cbd5e1;\n  border-radius: 3px;\n}\n\n.widget-messages::-webkit-scrollbar-thumb:hover {\n  background: #94a3b8;\n}\n\n/* Focus styles for accessibility */\n.widget-input:focus {\n  border-color: var(--primary-color, #3b82f6);\n  box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.1);\n}\n\n.widget-button:focus {\n  outline: 2px solid var(--primary-color, #3b82f6);\n  outline-offset: 2px;\n}\n\n/* High contrast mode support */\n@media (prefers-contrast: high) {\n  .widget-message-bot {\n    border: 2px solid #000;\n  }\n  \n  .widget-message-user {\n    border: 2px solid #fff;\n  }\n}\n\n/* Reduced motion support */\n@media (prefers-reduced-motion: reduce) {\n  * {\n    animation-duration: 0.01ms !important;\n    animation-iteration-count: 1 !important;\n    transition-duration: 0.01ms !important;\n  }\n}\n\n/* Mobile-specific adjustments */\n@media (max-width: 768px) {\n  .widget-chat-window {\n    border-radius: 0 !important;\n    box-shadow: none !important;\n  }\n  \n  .widget-input {\n    font-size: 16px !important; /* Prevent zoom on iOS */\n  }\n}\n\n/* Onboarding Modal Styles */\n.onboarding-overlay {\n  position: fixed;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  background-color: rgba(0, 0, 0, 0.7);\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  z-index: 1000000;\n  padding: 20px;\n  box-sizing: border-box;\n}\n\n.onboarding-modal {\n  background: white;\n  border-radius: 16px;\n  box-shadow: 0 25px 50px rgba(0, 0, 0, 0.25);\n  width: 100%;\n  max-width: 500px;\n  max-height: 90vh;\n  display: flex;\n  flex-direction: column;\n  overflow: hidden;\n  animation: onboardingSlideIn 0.3s ease-out;\n}\n\n@keyframes onboardingSlideIn {\n  from {\n    opacity: 0;\n    transform: scale(0.9) translateY(20px);\n  }\n  to {\n    opacity: 1;\n    transform: scale(1) translateY(0);\n  }\n}\n\n.onboarding-header {\n  padding: 32px 32px 24px;\n  border-bottom: 1px solid #e2e8f0;\n  text-align: center;\n}\n\n.onboarding-title {\n  margin: 0 0 8px;\n  font-size: 24px;\n  font-weight: 700;\n  color: #1e293b;\n  line-height: 1.3;\n}\n\n.onboarding-subtitle {\n  margin: 0 0 20px;\n  font-size: 16px;\n  color: #64748b;\n  line-height: 1.5;\n}\n\n.onboarding-progress {\n  position: relative;\n  height: 6px;\n  background-color: #f1f5f9;\n  border-radius: 3px;\n  overflow: hidden;\n}\n\n.onboarding-progress-bar {\n  height: 100%;\n  background: linear-gradient(90deg, #3b82f6, #1d4ed8);\n  border-radius: 3px;\n  transition: width 0.3s ease;\n}\n\n.onboarding-progress-text {\n  position: absolute;\n  top: 12px;\n  right: 0;\n  font-size: 12px;\n  color: #94a3b8;\n  font-weight: 500;\n}\n\n.onboarding-content {\n  flex: 1;\n  padding: 32px;\n  overflow-y: auto;\n}\n\n.onboarding-question {\n  max-width: 100%;\n}\n\n.question-text {\n  margin: 0 0 24px;\n  font-size: 18px;\n  font-weight: 600;\n  color: #1e293b;\n  line-height: 1.4;\n}\n\n.required-asterisk {\n  color: #ef4444;\n}\n\n.onboarding-options {\n  display: flex;\n  flex-direction: column;\n  gap: 12px;\n}\n\n.onboarding-option {\n  display: flex;\n  align-items: center;\n  padding: 16px;\n  border: 2px solid #e2e8f0;\n  border-radius: 12px;\n  cursor: pointer;\n  transition: all 0.2s ease;\n  background: white;\n}\n\n.onboarding-option:hover {\n  border-color: #cbd5e1;\n  background: #f8fafc;\n}\n\n.onboarding-option.selected {\n  border-color: #3b82f6;\n  background: #eff6ff;\n}\n\n.onboarding-option input {\n  margin: 0 12px 0 0;\n  accent-color: #3b82f6;\n}\n\n.option-label {\n  font-size: 15px;\n  color: #374151;\n  line-height: 1.4;\n  flex: 1;\n}\n\n.onboarding-text-input {\n  width: 100%;\n  padding: 16px;\n  border: 2px solid #e2e8f0;\n  border-radius: 12px;\n  font-size: 16px;\n  color: #374151;\n  box-sizing: border-box;\n  transition: border-color 0.2s ease;\n}\n\n.onboarding-text-input:focus {\n  outline: none;\n  border-color: #3b82f6;\n  box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.1);\n}\n\n.onboarding-text-input::placeholder {\n  color: #9ca3af;\n}\n\n.onboarding-footer {\n  padding: 24px 32px 32px;\n  border-top: 1px solid #e2e8f0;\n  background: #f8fafc;\n}\n\n.onboarding-buttons {\n  display: flex;\n  gap: 12px;\n  justify-content: space-between;\n  align-items: center;\n}\n\n.onboarding-button {\n  padding: 12px 24px;\n  border-radius: 8px;\n  font-size: 14px;\n  font-weight: 600;\n  cursor: pointer;\n  transition: all 0.2s ease;\n  border: none;\n  display: flex;\n  align-items: center;\n  gap: 8px;\n  white-space: nowrap;\n}\n\n.onboarding-button-primary {\n  background: #3b82f6;\n  color: white;\n}\n\n.onboarding-button-primary:hover:not(:disabled) {\n  background: #2563eb;\n  transform: translateY(-1px);\n  box-shadow: 0 4px 12px rgba(59, 130, 246, 0.4);\n}\n\n.onboarding-button-primary.disabled,\n.onboarding-button-primary:disabled {\n  background: #94a3b8;\n  cursor: not-allowed;\n  transform: none;\n  box-shadow: none;\n}\n\n.onboarding-button-secondary {\n  background: white;\n  color: #374151;\n  border: 1px solid #d1d5db;\n}\n\n.onboarding-button-secondary:hover:not(:disabled) {\n  background: #f9fafb;\n  border-color: #9ca3af;\n}\n\n.onboarding-button-text {\n  background: transparent;\n  color: #6b7280;\n  text-decoration: underline;\n  padding: 8px 16px;\n}\n\n.onboarding-button-text:hover:not(:disabled) {\n  color: #374151;\n}\n\n.onboarding-error {\n  margin-top: 16px;\n  padding: 12px 16px;\n  background: #fef2f2;\n  border: 1px solid #fecaca;\n  border-radius: 8px;\n  color: #dc2626;\n  font-size: 14px;\n}\n\n.loading-spinner {\n  width: 16px;\n  height: 16px;\n  border: 2px solid transparent;\n  border-top: 2px solid currentColor;\n  border-radius: 50%;\n  animation: spin 1s linear infinite;\n}\n\n@keyframes spin {\n  to {\n    transform: rotate(360deg);\n  }\n}\n\n/* Mobile optimizations for onboarding */\n@media (max-width: 768px) {\n  .onboarding-overlay {\n    padding: 16px;\n  }\n  \n  .onboarding-modal {\n    max-height: 95vh;\n    border-radius: 12px;\n  }\n  \n  .onboarding-header {\n    padding: 24px 24px 20px;\n  }\n  \n  .onboarding-title {\n    font-size: 20px;\n  }\n  \n  .onboarding-subtitle {\n    font-size: 14px;\n  }\n  \n  .onboarding-content {\n    padding: 24px;\n  }\n  \n  .question-text {\n    font-size: 16px;\n    margin-bottom: 20px;\n  }\n  \n  .onboarding-option {\n    padding: 14px;\n  }\n  \n  .option-label {\n    font-size: 14px;\n  }\n  \n  .onboarding-footer {\n    padding: 20px 24px 24px;\n  }\n  \n  .onboarding-buttons {\n    flex-direction: column;\n    gap: 8px;\n  }\n  \n  .onboarding-button {\n    width: 100%;\n    justify-content: center;\n    padding: 14px 24px;\n  }\n} ",""]);const s=a},656:n=>{n.exports=function(n,e){if(e.styleSheet)e.styleSheet.cssText=n;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(n))}}},740:n=>{n.exports=function(n){if("undefined"==typeof document)return{update:function(){},remove:function(){}};var e=n.insertStyleElement(n);return{update:function(t){!function(n,e,t){var o="";t.supports&&(o+="@supports (".concat(t.supports,") {")),t.media&&(o+="@media ".concat(t.media," {"));var r=void 0!==t.layer;r&&(o+="@layer".concat(t.layer.length>0?" ".concat(t.layer):""," {")),o+=t.css,r&&(o+="}"),t.media&&(o+="}"),t.supports&&(o+="}");var i=t.sourceMap;i&&"undefined"!=typeof btoa&&(o+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(i))))," */")),e.styleTagTransform(o,n,e.options)}(e,n,t)},remove:function(){!function(n){if(null===n.parentNode)return!1;n.parentNode.removeChild(n)}(e)}}}},758:n=>{n.exports=function(n){return n[1]}},855:(n,e,t)=>{n.exports=function(n){var e=t.nc;e&&n.setAttribute("nonce",e)}},935:n=>{n.exports=function(n){var e=[];return e.toString=function(){return this.map(function(e){var t="",o=void 0!==e[5];return e[4]&&(t+="@supports (".concat(e[4],") {")),e[2]&&(t+="@media ".concat(e[2]," {")),o&&(t+="@layer".concat(e[5].length>0?" ".concat(e[5]):""," {")),t+=n(e),o&&(t+="}"),e[2]&&(t+="}"),e[4]&&(t+="}"),t}).join("")},e.i=function(n,t,o,r,i){"string"==typeof n&&(n=[[null,n,void 0]]);var a={};if(o)for(var s=0;s<this.length;s++){var c=this[s][0];null!=c&&(a[c]=!0)}for(var l=0;l<n.length;l++){var u=[].concat(n[l]);o&&a[u[0]]||(void 0!==i&&(void 0===u[5]||(u[1]="@layer".concat(u[5].length>0?" ".concat(u[5]):""," {").concat(u[1],"}")),u[5]=i),t&&(u[2]?(u[1]="@media ".concat(u[2]," {").concat(u[1],"}"),u[2]=t):u[2]=t),r&&(u[4]?(u[1]="@supports (".concat(u[4],") {").concat(u[1],"}"),u[4]=r):u[4]="".concat(r)),e.push(u))}},e}}},e={};function t(o){var r=e[o];if(void 0!==r)return r.exports;var i=e[o]={id:o,exports:{}};return n[o](i,i.exports,t),i.exports}t.n=n=>{var e=n&&n.__esModule?()=>n.default:()=>n;return t.d(e,{a:e}),e},t.d=(n,e)=>{for(var o in e)t.o(e,o)&&!t.o(n,o)&&Object.defineProperty(n,o,{enumerable:!0,get:e[o]})},t.o=(n,e)=>Object.prototype.hasOwnProperty.call(n,e),t.nc=void 0;var o,r,i,a,s,c,l,u,d,p,f,b={},g=[],_=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i,h=Array.isArray;function m(n,e){for(var t in e)n[t]=e[t];return n}function x(n){n&&n.parentNode&&n.parentNode.removeChild(n)}function y(n,e,t){var r,i,a,s={};for(a in e)"key"==a?r=e[a]:"ref"==a?i=e[a]:s[a]=e[a];if(arguments.length>2&&(s.children=arguments.length>3?o.call(arguments,2):t),"function"==typeof n&&null!=n.defaultProps)for(a in n.defaultProps)void 0===s[a]&&(s[a]=n.defaultProps[a]);return v(n,s,r,i,null)}function v(n,e,t,o,a){var s={type:n,props:e,key:t,ref:o,__k:null,__:null,__b:0,__e:null,__c:null,constructor:void 0,__v:null==a?++i:a,__i:-1,__u:0};return null==a&&null!=r.vnode&&r.vnode(s),s}function w(n){return n.children}function k(n,e){this.props=n,this.context=e}function O(n,e){if(null==e)return n.__?O(n.__,n.__i+1):null;for(var t;e<n.__k.length;e++)if(null!=(t=n.__k[e])&&null!=t.__e)return t.__e;return"function"==typeof n.type?O(n):null}function S(n){var e,t;if(null!=(n=n.__)&&null!=n.__c){for(n.__e=n.__c.base=null,e=0;e<n.__k.length;e++)if(null!=(t=n.__k[e])&&null!=t.__e){n.__e=n.__c.base=t.__e;break}return S(n)}}function C(n){(!n.__d&&(n.__d=!0)&&a.push(n)&&!j.__r++||s!=r.debounceRendering)&&((s=r.debounceRendering)||c)(j)}function j(){for(var n,e,t,o,i,s,c,u=1;a.length;)a.length>u&&a.sort(l),n=a.shift(),u=a.length,n.__d&&(t=void 0,i=(o=(e=n).__v).__e,s=[],c=[],e.__P&&((t=m({},o)).__v=o.__v+1,r.vnode&&r.vnode(t),D(e.__P,t,o,e.__n,e.__P.namespaceURI,32&o.__u?[i]:null,s,null==i?O(o):i,!!(32&o.__u),c),t.__v=o.__v,t.__.__k[t.__i]=t,R(s,t,c),t.__e!=i&&S(t)));j.__r=0}function I(n,e,t,o,r,i,a,s,c,l,u){var d,p,f,_,h,m,x=o&&o.__k||g,y=e.length;for(c=T(t,e,x,c,y),d=0;d<y;d++)null!=(f=t.__k[d])&&(p=-1==f.__i?b:x[f.__i]||b,f.__i=d,m=D(n,f,p,r,i,a,s,c,l,u),_=f.__e,f.ref&&p.ref!=f.ref&&(p.ref&&F(p.ref,null,f),u.push(f.ref,f.__c||_,f)),null==h&&null!=_&&(h=_),4&f.__u||p.__k===f.__k?c=P(f,c,n):"function"==typeof f.type&&void 0!==m?c=m:_&&(c=_.nextSibling),f.__u&=-7);return t.__e=h,c}function T(n,e,t,o,r){var i,a,s,c,l,u=t.length,d=u,p=0;for(n.__k=new Array(r),i=0;i<r;i++)null!=(a=e[i])&&"boolean"!=typeof a&&"function"!=typeof a?(c=i+p,(a=n.__k[i]="string"==typeof a||"number"==typeof a||"bigint"==typeof a||a.constructor==String?v(null,a,null,null,null):h(a)?v(w,{children:a},null,null,null):null==a.constructor&&a.__b>0?v(a.type,a.props,a.key,a.ref?a.ref:null,a.__v):a).__=n,a.__b=n.__b+1,s=null,-1!=(l=a.__i=A(a,t,c,d))&&(d--,(s=t[l])&&(s.__u|=2)),null==s||null==s.__v?(-1==l&&(r>u?p--:r<u&&p++),"function"!=typeof a.type&&(a.__u|=4)):l!=c&&(l==c-1?p--:l==c+1?p++:(l>c?p--:p++,a.__u|=4))):n.__k[i]=null;if(d)for(i=0;i<u;i++)null!=(s=t[i])&&!(2&s.__u)&&(s.__e==o&&(o=O(s)),q(s,s));return o}function P(n,e,t){var o,r;if("function"==typeof n.type){for(o=n.__k,r=0;o&&r<o.length;r++)o[r]&&(o[r].__=n,e=P(o[r],e,t));return e}n.__e!=e&&(e&&n.type&&!t.contains(e)&&(e=O(n)),t.insertBefore(n.__e,e||null),e=n.__e);do{e=e&&e.nextSibling}while(null!=e&&8==e.nodeType);return e}function A(n,e,t,o){var r,i,a=n.key,s=n.type,c=e[t];if(null===c&&null==n.key||c&&a==c.key&&s==c.type&&!(2&c.__u))return t;if(o>(null==c||2&c.__u?0:1))for(r=t-1,i=t+1;r>=0||i<e.length;){if(r>=0){if((c=e[r])&&!(2&c.__u)&&a==c.key&&s==c.type)return r;r--}if(i<e.length){if((c=e[i])&&!(2&c.__u)&&a==c.key&&s==c.type)return i;i++}}return-1}function z(n,e,t){"-"==e[0]?n.setProperty(e,null==t?"":t):n[e]=null==t?"":"number"!=typeof t||_.test(e)?t:t+"px"}function E(n,e,t,o,r){var i,a;n:if("style"==e)if("string"==typeof t)n.style.cssText=t;else{if("string"==typeof o&&(n.style.cssText=o=""),o)for(e in o)t&&e in t||z(n.style,e,"");if(t)for(e in t)o&&t[e]==o[e]||z(n.style,e,t[e])}else if("o"==e[0]&&"n"==e[1])i=e!=(e=e.replace(u,"$1")),a=e.toLowerCase(),e=a in n||"onFocusOut"==e||"onFocusIn"==e?a.slice(2):e.slice(2),n.l||(n.l={}),n.l[e+i]=t,t?o?t.u=o.u:(t.u=d,n.addEventListener(e,i?f:p,i)):n.removeEventListener(e,i?f:p,i);else{if("http://www.w3.org/2000/svg"==r)e=e.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if("width"!=e&&"height"!=e&&"href"!=e&&"list"!=e&&"form"!=e&&"tabIndex"!=e&&"download"!=e&&"rowSpan"!=e&&"colSpan"!=e&&"role"!=e&&"popover"!=e&&e in n)try{n[e]=null==t?"":t;break n}catch(n){}"function"==typeof t||(null==t||!1===t&&"-"!=e[4]?n.removeAttribute(e):n.setAttribute(e,"popover"==e&&1==t?"":t))}}function M(n){return function(e){if(this.l){var t=this.l[e.type+n];if(null==e.t)e.t=d++;else if(e.t<t.u)return;return t(r.event?r.event(e):e)}}}function D(n,e,t,o,i,a,s,c,l,u){var d,p,f,b,g,_,y,v,O,S,C,j,T,P,A,z,E,M=e.type;if(null!=e.constructor)return null;128&t.__u&&(l=!!(32&t.__u),a=[c=e.__e=t.__e]),(d=r.__b)&&d(e);n:if("function"==typeof M)try{if(v=e.props,O="prototype"in M&&M.prototype.render,S=(d=M.contextType)&&o[d.__c],C=d?S?S.props.value:d.__:o,t.__c?y=(p=e.__c=t.__c).__=p.__E:(O?e.__c=p=new M(v,C):(e.__c=p=new k(v,C),p.constructor=M,p.render=N),S&&S.sub(p),p.props=v,p.state||(p.state={}),p.context=C,p.__n=o,f=p.__d=!0,p.__h=[],p._sb=[]),O&&null==p.__s&&(p.__s=p.state),O&&null!=M.getDerivedStateFromProps&&(p.__s==p.state&&(p.__s=m({},p.__s)),m(p.__s,M.getDerivedStateFromProps(v,p.__s))),b=p.props,g=p.state,p.__v=e,f)O&&null==M.getDerivedStateFromProps&&null!=p.componentWillMount&&p.componentWillMount(),O&&null!=p.componentDidMount&&p.__h.push(p.componentDidMount);else{if(O&&null==M.getDerivedStateFromProps&&v!==b&&null!=p.componentWillReceiveProps&&p.componentWillReceiveProps(v,C),!p.__e&&null!=p.shouldComponentUpdate&&!1===p.shouldComponentUpdate(v,p.__s,C)||e.__v==t.__v){for(e.__v!=t.__v&&(p.props=v,p.state=p.__s,p.__d=!1),e.__e=t.__e,e.__k=t.__k,e.__k.some(function(n){n&&(n.__=e)}),j=0;j<p._sb.length;j++)p.__h.push(p._sb[j]);p._sb=[],p.__h.length&&s.push(p);break n}null!=p.componentWillUpdate&&p.componentWillUpdate(v,p.__s,C),O&&null!=p.componentDidUpdate&&p.__h.push(function(){p.componentDidUpdate(b,g,_)})}if(p.context=C,p.props=v,p.__P=n,p.__e=!1,T=r.__r,P=0,O){for(p.state=p.__s,p.__d=!1,T&&T(e),d=p.render(p.props,p.state,p.context),A=0;A<p._sb.length;A++)p.__h.push(p._sb[A]);p._sb=[]}else do{p.__d=!1,T&&T(e),d=p.render(p.props,p.state,p.context),p.state=p.__s}while(p.__d&&++P<25);p.state=p.__s,null!=p.getChildContext&&(o=m(m({},o),p.getChildContext())),O&&!f&&null!=p.getSnapshotBeforeUpdate&&(_=p.getSnapshotBeforeUpdate(b,g)),z=d,null!=d&&d.type===w&&null==d.key&&(z=L(d.props.children)),c=I(n,h(z)?z:[z],e,t,o,i,a,s,c,l,u),p.base=e.__e,e.__u&=-161,p.__h.length&&s.push(p),y&&(p.__E=p.__=null)}catch(n){if(e.__v=null,l||null!=a)if(n.then){for(e.__u|=l?160:128;c&&8==c.nodeType&&c.nextSibling;)c=c.nextSibling;a[a.indexOf(c)]=null,e.__e=c}else for(E=a.length;E--;)x(a[E]);else e.__e=t.__e,e.__k=t.__k;r.__e(n,e,t)}else null==a&&e.__v==t.__v?(e.__k=t.__k,e.__e=t.__e):c=e.__e=U(t.__e,e,t,o,i,a,s,l,u);return(d=r.diffed)&&d(e),128&e.__u?void 0:c}function R(n,e,t){for(var o=0;o<t.length;o++)F(t[o],t[++o],t[++o]);r.__c&&r.__c(e,n),n.some(function(e){try{n=e.__h,e.__h=[],n.some(function(n){n.call(e)})}catch(n){r.__e(n,e.__v)}})}function L(n){return"object"!=typeof n||null==n||n.__b&&n.__b>0?n:h(n)?n.map(L):m({},n)}function U(n,e,t,i,a,s,c,l,u){var d,p,f,g,_,m,y,v=t.props,w=e.props,k=e.type;if("svg"==k?a="http://www.w3.org/2000/svg":"math"==k?a="http://www.w3.org/1998/Math/MathML":a||(a="http://www.w3.org/1999/xhtml"),null!=s)for(d=0;d<s.length;d++)if((_=s[d])&&"setAttribute"in _==!!k&&(k?_.localName==k:3==_.nodeType)){n=_,s[d]=null;break}if(null==n){if(null==k)return document.createTextNode(w);n=document.createElementNS(a,k,w.is&&w),l&&(r.__m&&r.__m(e,s),l=!1),s=null}if(null==k)v===w||l&&n.data==w||(n.data=w);else{if(s=s&&o.call(n.childNodes),v=t.props||b,!l&&null!=s)for(v={},d=0;d<n.attributes.length;d++)v[(_=n.attributes[d]).name]=_.value;for(d in v)if(_=v[d],"children"==d);else if("dangerouslySetInnerHTML"==d)f=_;else if(!(d in w)){if("value"==d&&"defaultValue"in w||"checked"==d&&"defaultChecked"in w)continue;E(n,d,null,_,a)}for(d in w)_=w[d],"children"==d?g=_:"dangerouslySetInnerHTML"==d?p=_:"value"==d?m=_:"checked"==d?y=_:l&&"function"!=typeof _||v[d]===_||E(n,d,_,v[d],a);if(p)l||f&&(p.__html==f.__html||p.__html==n.innerHTML)||(n.innerHTML=p.__html),e.__k=[];else if(f&&(n.innerHTML=""),I("template"==e.type?n.content:n,h(g)?g:[g],e,t,i,"foreignObject"==k?"http://www.w3.org/1999/xhtml":a,s,c,s?s[0]:t.__k&&O(t,0),l,u),null!=s)for(d=s.length;d--;)x(s[d]);l||(d="value","progress"==k&&null==m?n.removeAttribute("value"):null!=m&&(m!==n[d]||"progress"==k&&!m||"option"==k&&m!=v[d])&&E(n,d,m,v[d],a),d="checked",null!=y&&y!=n[d]&&E(n,d,y,v[d],a))}return n}function F(n,e,t){try{if("function"==typeof n){var o="function"==typeof n.__u;o&&n.__u(),o&&null==e||(n.__u=n(e))}else n.current=e}catch(n){r.__e(n,t)}}function q(n,e,t){var o,i;if(r.unmount&&r.unmount(n),(o=n.ref)&&(o.current&&o.current!=n.__e||F(o,null,e)),null!=(o=n.__c)){if(o.componentWillUnmount)try{o.componentWillUnmount()}catch(n){r.__e(n,e)}o.base=o.__P=null}if(o=n.__k)for(i=0;i<o.length;i++)o[i]&&q(o[i],e,t||"function"!=typeof n.type);t||x(n.__e),n.__c=n.__=n.__e=void 0}function N(n,e,t){return this.constructor(n,t)}function B(n){return B="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},B(n)}function W(n,e){return function(n){if(Array.isArray(n))return n}(n)||function(n,e){var t=null==n?null:"undefined"!=typeof Symbol&&n[Symbol.iterator]||n["@@iterator"];if(null!=t){var o,r,i,a,s=[],c=!0,l=!1;try{if(i=(t=t.call(n)).next,0===e){if(Object(t)!==t)return;c=!1}else for(;!(c=(o=i.call(t)).done)&&(s.push(o.value),s.length!==e);c=!0);}catch(n){l=!0,r=n}finally{try{if(!c&&null!=t.return&&(a=t.return(),Object(a)!==a))return}finally{if(l)throw r}}return s}}(n,e)||Y(n,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function H(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(n);e&&(o=o.filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})),t.push.apply(t,o)}return t}function Q(n){for(var e=1;e<arguments.length;e++){var t=null!=arguments[e]?arguments[e]:{};e%2?H(Object(t),!0).forEach(function(e){on(n,e,t[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):H(Object(t)).forEach(function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(t,e))})}return n}function $(){var n,e,t="function"==typeof Symbol?Symbol:{},o=t.iterator||"@@iterator",r=t.toStringTag||"@@toStringTag";function i(t,o,r,i){var c=o&&o.prototype instanceof s?o:s,l=Object.create(c.prototype);return V(l,"_invoke",function(t,o,r){var i,s,c,l=0,u=r||[],d=!1,p={p:0,n:0,v:n,a:f,f:f.bind(n,4),d:function(e,t){return i=e,s=0,c=n,p.n=t,a}};function f(t,o){for(s=t,c=o,e=0;!d&&l&&!r&&e<u.length;e++){var r,i=u[e],f=p.p,b=i[2];t>3?(r=b===o)&&(c=i[(s=i[4])?5:(s=3,3)],i[4]=i[5]=n):i[0]<=f&&((r=t<2&&f<i[1])?(s=0,p.v=o,p.n=i[1]):f<b&&(r=t<3||i[0]>o||o>b)&&(i[4]=t,i[5]=o,p.n=b,s=0))}if(r||t>1)return a;throw d=!0,o}return function(r,u,b){if(l>1)throw TypeError("Generator is already running");for(d&&1===u&&f(u,b),s=u,c=b;(e=s<2?n:c)||!d;){i||(s?s<3?(s>1&&(p.n=-1),f(s,c)):p.n=c:p.v=c);try{if(l=2,i){if(s||(r="next"),e=i[r]){if(!(e=e.call(i,c)))throw TypeError("iterator result is not an object");if(!e.done)return e;c=e.value,s<2&&(s=0)}else 1===s&&(e=i.return)&&e.call(i),s<2&&(c=TypeError("The iterator does not provide a '"+r+"' method"),s=1);i=n}else if((e=(d=p.n<0)?c:t.call(o,p))!==a)break}catch(e){i=n,s=1,c=e}finally{l=1}}return{value:e,done:d}}}(t,r,i),!0),l}var a={};function s(){}function c(){}function l(){}e=Object.getPrototypeOf;var u=[][o]?e(e([][o]())):(V(e={},o,function(){return this}),e),d=l.prototype=s.prototype=Object.create(u);function p(n){return Object.setPrototypeOf?Object.setPrototypeOf(n,l):(n.__proto__=l,V(n,r,"GeneratorFunction")),n.prototype=Object.create(d),n}return c.prototype=l,V(d,"constructor",l),V(l,"constructor",c),c.displayName="GeneratorFunction",V(l,r,"GeneratorFunction"),V(d),V(d,r,"Generator"),V(d,o,function(){return this}),V(d,"toString",function(){return"[object Generator]"}),($=function(){return{w:i,m:p}})()}function V(n,e,t,o){var r=Object.defineProperty;try{r({},"",{})}catch(n){r=0}V=function(n,e,t,o){if(e)r?r(n,e,{value:t,enumerable:!o,configurable:!o,writable:!o}):n[e]=t;else{var i=function(e,t){V(n,e,function(n){return this._invoke(e,t,n)})};i("next",0),i("throw",1),i("return",2)}},V(n,e,t,o)}function G(n){return function(n){if(Array.isArray(n))return K(n)}(n)||function(n){if("undefined"!=typeof Symbol&&null!=n[Symbol.iterator]||null!=n["@@iterator"])return Array.from(n)}(n)||Y(n)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Y(n,e){if(n){if("string"==typeof n)return K(n,e);var t={}.toString.call(n).slice(8,-1);return"Object"===t&&n.constructor&&(t=n.constructor.name),"Map"===t||"Set"===t?Array.from(n):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?K(n,e):void 0}}function K(n,e){(null==e||e>n.length)&&(e=n.length);for(var t=0,o=Array(e);t<e;t++)o[t]=n[t];return o}function Z(n,e,t,o,r,i,a){try{var s=n[i](a),c=s.value}catch(n){return void t(n)}s.done?e(c):Promise.resolve(c).then(o,r)}function J(n){return function(){var e=this,t=arguments;return new Promise(function(o,r){var i=n.apply(e,t);function a(n){Z(i,o,r,a,s,"next",n)}function s(n){Z(i,o,r,a,s,"throw",n)}a(void 0)})}}function X(n,e){for(var t=0;t<e.length;t++){var o=e[t];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(n,rn(o.key),o)}}function nn(){try{var n=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(n){}return(nn=function(){return!!n})()}function en(n){return en=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},en(n)}function tn(n,e){return tn=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,e){return n.__proto__=e,n},tn(n,e)}function on(n,e,t){return(e=rn(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function rn(n){var e=function(n){if("object"!=B(n)||!n)return n;var e=n[Symbol.toPrimitive];if(void 0!==e){var t=e.call(n,"string");if("object"!=B(t))return t;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(n)}(n);return"symbol"==B(e)?e:e+""}o=g.slice,r={__e:function(n,e,t,o){for(var r,i,a;e=e.__;)if((r=e.__c)&&!r.__)try{if((i=r.constructor)&&null!=i.getDerivedStateFromError&&(r.setState(i.getDerivedStateFromError(n)),a=r.__d),null!=r.componentDidCatch&&(r.componentDidCatch(n,o||{}),a=r.__d),a)return r.__E=r}catch(e){n=e}throw n}},i=0,k.prototype.setState=function(n,e){var t;t=null!=this.__s&&this.__s!=this.state?this.__s:this.__s=m({},this.state),"function"==typeof n&&(n=n(m({},t),this.props)),n&&m(t,n),null!=n&&this.__v&&(e&&this._sb.push(e),C(this))},k.prototype.forceUpdate=function(n){this.__v&&(this.__e=!0,n&&this.__h.push(n),C(this))},k.prototype.render=w,a=[],c="function"==typeof Promise?Promise.prototype.then.bind(Promise.resolve()):setTimeout,l=function(n,e){return n.__v.__b-e.__v.__b},j.__r=0,u=/(PointerCapture)$|Capture$/i,d=0,p=M(!1),f=M(!0);var an=function(n){function e(n){var t;return function(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),on(t=function(n,e,t){return e=en(e),function(n,e){if(e&&("object"==B(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(n){if(void 0===n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}(n)}(n,nn()?Reflect.construct(e,t||[],en(n).constructor):e.apply(n,t))}(this,e,[n]),"setupAccessibility",function(){document.addEventListener("keydown",t.handleGlobalKeyDown)}),on(t,"handleGlobalKeyDown",function(n){"Escape"===n.key&&t.state.isOpen&&t.toggleChat()}),on(t,"handleResize",function(){t.forceUpdate()}),on(t,"loadConfig",J($().m(function n(){var e,o,r,i,a,s,c,l,u,d,p,f,b,g,_;return $().w(function(n){for(;;)switch(n.p=n.n){case 0:if(!t.state.isLoadingConfig&&!t.state.config){n.n=1;break}return n.a(2);case 1:return t.setState({isLoadingConfig:!0}),n.p=2,e=t.props.config||{},o=e.clientId,r=void 0===o?"e6f484a3-c3cb-4e01-b8ce-a276f4b7355c":o,i=e.apiUrl,n.n=3,fetch("".concat(i,"/api/v1/widget/config/").concat(r));case 3:if((a=n.v).ok){n.n=4;break}throw new Error("Failed to load configuration");case 4:return n.n=5,a.json();case 5:return s=n.v,n.n=6,fetch("".concat(i,"/v1/sessions"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({clientId:r})});case 6:if((c=n.v).ok){n.n=7;break}throw new Error("Failed to create visitor session");case 7:return n.n=8,c.json();case 8:if(l=n.v,u=null,!l.needs_onboarding){n.n=14;break}return n.p=9,n.n=10,fetch("".concat(i,"/v1/visitors/").concat(l.visitor_id,"/onboarding?clientId=").concat(r));case 10:if(!(d=n.v).ok){n.n=12;break}return n.n=11,d.json();case 11:p=n.v,u=p.questions;case 12:n.n=14;break;case 13:n.p=13,g=n.v,console.warn("Could not load onboarding questions:",g);case 14:t.setState({config:s,visitorId:l.visitor_id,needsOnboarding:l.needs_onboarding,onboardingQuestions:u,isLoadingConfig:!1,messages:[]}),l.needs_onboarding&&u?setTimeout(function(){t.startOnboardingInChat()},1e3):(b={id:Date.now(),text:(null===(f=s.widgetSettings)||void 0===f?void 0:f.welcomeMessage)||"Hello! How can I help you?",sender:"bot",timestamp:new Date,ariaLabel:"Welcome message from chatbot"},t.setState(function(n){return{messages:[].concat(G(n.messages),[b])}})),n.n=16;break;case 15:n.p=15,_=n.v,console.error("Widget initialization error:",_),t.setState({error:"Failed to initialize chatbot",isLoadingConfig:!1});case 16:return n.a(2)}},n,null,[[9,13],[2,15]])}))),on(t,"toggleChat",function(){t.setState(function(n){return{isOpen:!n.isOpen}},function(){t.state.isOpen&&t.inputRef&&setTimeout(function(){return t.inputRef.focus()},100),t.announceToScreenReader(t.state.isOpen?"Chat window opened":"Chat window closed")})}),on(t,"announceToScreenReader",function(n){var e=document.createElement("div");e.setAttribute("aria-live","polite"),e.setAttribute("aria-atomic","true"),e.style.position="absolute",e.style.left="-10000px",e.style.width="1px",e.style.height="1px",e.style.overflow="hidden",e.textContent=n,document.body.appendChild(e),setTimeout(function(){return document.body.removeChild(e)},1e3)}),on(t,"sendMessage",J($().m(function n(){var e,o,r,i,a,s,c,l,u,d,p,f,b;return $().w(function(n){for(;;)switch(n.p=n.n){case 0:if(e=t.state,o=e.inputValue,r=e.messages,e.config,i=t.props.config||{},a=i.apiUrl,o.trim()){n.n=1;break}return n.a(2);case 1:return console.log("🔧 Widget Debug Info:"),console.log("📡 API URL:",a),console.log("⚙️ Props config:",t.props.config),console.log("🎯 Target endpoint:","".concat(a,"/api/chat")),s={id:Date.now(),text:o,sender:"user",timestamp:new Date,ariaLabel:"You said: ".concat(o)},t.setState({messages:[].concat(G(r),[s]),inputValue:"",isTyping:!0}),t.announceToScreenReader("Message sent"),n.p=2,n.n=3,fetch("".concat(a,"/api/chat"),{method:"POST",headers:{"Content-Type":"application/json","X-Client-Id":(null===(c=t.props.config)||void 0===c?void 0:c.clientId)||"e6f484a3-c3cb-4e01-b8ce-a276f4b7355c"},body:JSON.stringify({message:o,query:o,sessionId:t.state.visitorId,context:r.slice(-5),clientId:(null===(l=t.props.config)||void 0===l?void 0:l.clientId)||"e6f484a3-c3cb-4e01-b8ce-a276f4b7355c"})});case 3:if((u=n.v).ok){n.n=4;break}throw new Error("HTTP ".concat(u.status,": ").concat(u.statusText));case 4:return n.n=5,u.json();case 5:d=n.v,p={id:Date.now()+1,text:d.response||"Sorry, I encountered an error.",sender:"bot",timestamp:new Date,ariaLabel:"Chatbot responded: ".concat(d.response||"Sorry, I encountered an error.")},t.setState(function(n){return{messages:[].concat(G(n.messages),[p]),isTyping:!1}}),t.announceToScreenReader("New message received"),n.n=7;break;case 6:n.p=6,b=n.v,console.error("❌ Chat API Error:",b),console.error("🌐 Failed URL:","".concat(a,"/api/chat")),f={id:Date.now()+1,text:"Sorry, I'm having trouble responding right now. Please try again.",sender:"bot",timestamp:new Date,ariaLabel:"Error message from chatbot"},t.setState(function(n){return{messages:[].concat(G(n.messages),[f]),isTyping:!1}}),t.announceToScreenReader("Error occurred while sending message");case 7:return n.a(2)}},n,null,[[2,6]])}))),on(t,"startOnboardingInChat",function(){var n,e=t.state.onboardingQuestions;if(null!=e&&e.questions&&0!==e.questions.length){t.setState({isInOnboardingMode:!0,currentOnboardingIndex:0});var o={id:Date.now(),text:(null===(n=e.settings)||void 0===n?void 0:n.title)||"Ajude-nos a encontrar o seu imóvel ideal! Responda a algumas perguntas para receber recomendações personalizadas.",sender:"bot",timestamp:new Date,type:"onboarding-intro"};t.addBotMessage(o),setTimeout(function(){t.showCurrentOnboardingQuestion()},1e3)}}),on(t,"showCurrentOnboardingQuestion",function(){var n=t.state,e=n.onboardingQuestions,o=n.currentOnboardingIndex,r=e.questions[o];if(r){var i={id:Date.now(),text:r.question+(r.required?" *":""),sender:"bot",timestamp:new Date,type:"onboarding-question",questionData:r,questionIndex:o};t.addBotMessage(i)}else t.completeOnboarding()}),on(t,"handleOnboardingAnswer",function(n,e,o){var r=t.state,i=r.onboardingQuestions,a=r.onboardingAnswers,s=r.currentOnboardingIndex,c=Q(Q({},a),{},on({},n,e));t.setState({onboardingAnswers:c});var l=t.formatAnswerForDisplay(e,i.questions[o]),u={id:Date.now(),text:l,sender:"user",timestamp:new Date};t.addUserMessage(u),s<i.questions.length-1?setTimeout(function(){t.setState({currentOnboardingIndex:s+1}),t.showCurrentOnboardingQuestion()},500):setTimeout(function(){t.completeOnboarding()},500)}),on(t,"formatAnswerForDisplay",function(n,e){if("multiple_select"===e.type&&Array.isArray(n))return e.options.filter(function(e){return n.includes(e.value)}).map(function(n){return n.label}).join(", ");if("multiple_choice"===e.type||"range_select"===e.type){var t=e.options.find(function(e){return e.value===n});return t?t.label:n}return n}),on(t,"completeOnboarding",J($().m(function n(){var e,o,r,i,a,s,c,l,u,d,p,f,b,g;return $().w(function(n){for(;;)switch(n.p=n.n){case 0:return o=t.state,r=o.onboardingAnswers,i=o.visitorId,a=o.onboardingQuestions,s=(null===(e=t.props.config)||void 0===e?void 0:e.apiUrl)||"https://chatbot1-eta.vercel.app",console.log("🔄 Submitting onboarding answers:",{visitorId:i,answers:r,apiUrl:"".concat(s,"/v1/visitors/").concat(i,"/onboarding")}),n.p=1,n.n=2,fetch("".concat(s,"/v1/visitors/").concat(i,"/onboarding"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({answers:r,completed:!0})});case 2:if((l=n.v).ok){n.n=4;break}return n.n=3,l.json();case 3:throw u=n.v,new Error("HTTP ".concat(l.status,": ").concat(u.error||l.statusText));case 4:return n.n=5,l.json();case 5:d=n.v,console.log("✅ Onboarding submission successful:",d),p=(null==a||null===(c=a.settings)||void 0===c?void 0:c.completion_message)||"Obrigado pelas suas respostas! Agora posso ajudá-lo de forma mais personalizada. Em que posso ajudar?",f={id:Date.now(),text:p,sender:"bot",timestamp:new Date},t.addBotMessage(f),n.n=7;break;case 6:n.p=6,g=n.v,console.error("❌ Error submitting onboarding:",g),b={id:Date.now(),text:"Erro ao guardar as suas respostas, mas posso ajudá-lo na mesma. Em que posso ajudar?",sender:"bot",timestamp:new Date},t.addBotMessage(b);case 7:t.setState({isInOnboardingMode:!1,needsOnboarding:!1});case 8:return n.a(2)}},n,null,[[1,6]])}))),on(t,"addBotMessage",function(n){t.setState(function(e){return{messages:[].concat(G(e.messages),[n])}})}),on(t,"addUserMessage",function(n){t.setState(function(e){return{messages:[].concat(G(e.messages),[n])}})}),on(t,"renderOnboardingQuestion",function(n){var e=t.state,o=e.isInOnboardingMode,r=e.currentOnboardingIndex;if(!o||n.questionIndex!==r)return null;var i=n.questionData;return i?y("div",{style:"margin-top: 12px;"},t.renderQuestionOptions(i)):null}),on(t,"renderQuestionOptions",function(n){var e=t.state.onboardingAnswers[n.id];switch(n.type){case"multiple_choice":case"range_select":return y("div",{style:"display: flex; flex-direction: column; gap: 8px;"},n.options.map(function(o){return y("button",{key:o.value,onClick:function(){return t.handleOnboardingAnswer(n.id,o.value,t.state.currentOnboardingIndex)},style:"\n              padding: 10px 12px;\n              border: 2px solid ".concat(e===o.value?"#3b82f6":"#e2e8f0",";\n              background: ").concat(e===o.value?"#eff6ff":"white",";\n              color: ").concat(e===o.value?"#1e40af":"#374151",";\n              border-radius: 8px;\n              cursor: pointer;\n              text-align: left;\n              font-size: 14px;\n              transition: all 0.2s ease;\n            "),onMouseOver:function(n){e!==o.value&&(n.target.style.borderColor="#94a3b8",n.target.style.backgroundColor="#f8fafc")},onMouseOut:function(n){e!==o.value&&(n.target.style.borderColor="#e2e8f0",n.target.style.backgroundColor="white")}},o.label)}));case"multiple_select":var o=Array.isArray(e)?e:[];return y("div",{style:"display: flex; flex-direction: column; gap: 8px;"},[].concat(G(n.options.map(function(e){var r=o.includes(e.value);return y("button",{key:e.value,onClick:function(){var i;i=r?o.filter(function(n){return n!==e.value}):[].concat(G(o),[e.value]),t.setState(function(e){return{onboardingAnswers:Q(Q({},e.onboardingAnswers),{},on({},n.id,i))}})},style:"\n                padding: 10px 12px;\n                border: 2px solid ".concat(r?"#3b82f6":"#e2e8f0",";\n                background: ").concat(r?"#eff6ff":"white",";\n                color: ").concat(r?"#1e40af":"#374151",";\n                border-radius: 8px;\n                cursor: pointer;\n                text-align: left;\n                font-size: 14px;\n                transition: all 0.2s ease;\n              ")},e.label)})),[o.length>0&&y("button",{onClick:function(){return t.handleOnboardingAnswer(n.id,o,t.state.currentOnboardingIndex)},style:"\n              padding: 12px;\n              background: #3b82f6;\n              color: white;\n              border: none;\n              border-radius: 8px;\n              cursor: pointer;\n              font-weight: 600;\n              margin-top: 8px;\n            "},"Continuar")]));case"text_input":return y("div",{style:"display: flex; gap: 8px; margin-top: 8px;"},[y("input",{type:"text",placeholder:n.placeholder||"",value:e||"",onInput:function(e){t.setState(function(t){return{onboardingAnswers:Q(Q({},t.onboardingAnswers),{},on({},n.id,e.target.value))}})},onKeyPress:function(o){"Enter"===o.key&&(e||"").trim()&&t.handleOnboardingAnswer(n.id,e,t.state.currentOnboardingIndex)},style:"\n              flex: 1;\n              padding: 10px 12px;\n              border: 2px solid #e2e8f0;\n              border-radius: 8px;\n              font-size: 14px;\n            "}),y("button",{onClick:function(){return t.handleOnboardingAnswer(n.id,e,t.state.currentOnboardingIndex)},disabled:!(e||"").trim(),style:"\n              padding: 10px 16px;\n              background: ".concat((e||"").trim()?"#3b82f6":"#9ca3af",";\n              color: white;\n              border: none;\n              border-radius: 8px;\n              cursor: ").concat((e||"").trim()?"pointer":"not-allowed",";\n              font-weight: 600;\n            ")},"→")]);default:return y("div",null,"Tipo de pergunta não suportado")}}),on(t,"handleKeyPress",function(n){"Enter"!==n.key||n.shiftKey||(n.preventDefault(),t.sendMessage())}),on(t,"getResponsiveStyles",function(){var n=window.innerWidth<=768,e=(window.innerWidth,t.state.config),o=(null==e?void 0:e.widgetSettings)||{},r="dark"===o.theme,i=o.backgroundColor||(r?"#1f2937":"#ffffff"),a=o.textColor||(r?"#f9fafb":"#1e293b"),s=r?"#374151":"#f1f5f9",c=r?"#4b5563":"#e2e8f0",l=W((o.position||"bottom-right").split("-"),2),u=l[0],d=l[1];return{chatWindow:Q(Q({position:"fixed"},{bottom:"bottom"===u?n?"0":"20px":"auto",top:"top"===u?n?"0":"20px":"auto",right:"right"===d?n?"0":"20px":"auto",left:"left"===d?n?"0":"20px":"auto"}),{},{width:n?"100%":"400px",height:n&&o.mobileFullScreen?"100vh":n?"90vh":o.maxHeight||"600px",maxHeight:n?"100vh":"85vh",background:i,color:a,borderRadius:n?"0":o.borderRadius||"16px",boxShadow:n?"none":r?"0 20px 40px rgba(0,0,0,0.4), 0 5px 10px rgba(0,0,0,0.2)":"0 20px 40px rgba(0,0,0,0.15), 0 5px 10px rgba(0,0,0,0.1)",display:"flex",flexDirection:"column",overflow:"hidden",zIndex:"999999",fontFamily:o.fontFamily||"inherit",fontSize:o.fontSize||"14px",transition:"all 0.3s cubic-bezier(0.4, 0.0, 0.2, 1)"}),chatButton:{width:n?"56px":"64px",height:n?"56px":"64px",borderRadius:"50%",border:"none",cursor:"pointer",fontSize:n?"20px":"24px",boxShadow:r?"0 6px 20px rgba(0,0,0,0.4), 0 2px 4px rgba(0,0,0,0.2)":"0 6px 20px rgba(0,0,0,0.15), 0 2px 4px rgba(0,0,0,0.1)",transition:"all 0.3s cubic-bezier(0.4, 0.0, 0.2, 1)",position:"relative",display:"flex",alignItems:"center",justifyContent:"center"},messagesContainer:{flex:"1",overflowY:"auto",padding:n?"12px":"20px",display:"flex",flexDirection:"column",gap:n?"8px":"12px",scrollBehavior:"smooth",background:i},inputContainer:{padding:n?"12px":"20px",borderTop:"1px solid ".concat(c),display:"flex",gap:n?"8px":"12px",alignItems:"flex-end",background:i},input:{flex:"1",padding:n?"12px 16px":"14px 18px",border:"1px solid ".concat(c),borderRadius:n?"24px":"28px",outline:"none",fontSize:n?"16px":o.fontSize||"14px",resize:"none",fontFamily:"inherit",minHeight:n?"40px":"44px",maxHeight:"120px",transition:"border-color 0.2s ease",background:r?"#374151":"#f8fafc",color:a},sendButton:{padding:n?"12px 16px":"14px 20px",border:"none",borderRadius:n?"24px":"28px",cursor:"pointer",fontSize:n?"14px":"16px",fontWeight:"600",minWidth:n?"60px":"80px",height:n?"40px":"44px",transition:"all 0.2s ease",display:"flex",alignItems:"center",justifyContent:"center"},messageBot:{background:s,color:a,borderRadius:"20px 20px 20px 6px"},messageUser:{borderRadius:"20px 20px 6px 20px"}}}),t.state={isOpen:!1,messages:[],inputValue:"",isTyping:!1,config:null,error:null,isLoadingConfig:!1,onboardingQuestions:null,visitorId:null,needsOnboarding:!1,currentOnboardingIndex:0,onboardingAnswers:{},isInOnboardingMode:!1},t}return function(n,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(e&&e.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,"prototype",{writable:!1}),e&&tn(n,e)}(e,n),function(n,e){return e&&X(n.prototype,e),Object.defineProperty(n,"prototype",{writable:!1}),n}(e,[{key:"componentDidMount",value:function(){this.loadConfig(),this.handleResize(),window.addEventListener("resize",this.handleResize),this.setupAccessibility()}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.handleResize)}},{key:"render",value:function(){var n,e=this,t=this.state,o=t.isOpen,r=t.messages,i=t.inputValue,a=t.isTyping,s=t.config,c=t.error;if(c)return y("div",{style:"color: #ef4444; padding: 12px; font-size: 14px; background: white; border-radius: 8px; box-shadow: 0 4px 12px rgba(0,0,0,0.15);"},c);if(!s)return y("div",{style:"padding: 12px; font-size: 14px; background: white; border-radius: 8px; box-shadow: 0 4px 12px rgba(0,0,0,0.15);"},"Loading...");var l=s.widgetSettings||{},u="dark"===l.theme,d=l.primaryColor||"#3b82f6",p=l.textColor||(u?"#f9fafb":"#1e293b"),f=u?"#374151":"#f1f5f9",b=l.chatIcon||"💬",g=this.getResponsiveStyles(),_=window.innerWidth<=768;return y(w,null,y("button",{onClick:this.toggleChat,style:"\n          ".concat(Object.entries(g.chatButton).map(function(n){var e=W(n,2),t=e[0],o=e[1];return"".concat(t.replace(/([A-Z])/g,"-$1").toLowerCase(),": ").concat(o)}).join("; "),";\n          background: ").concat(d,";\n          color: white;\n        "),onMouseOver:function(n){return n.target.style.transform="scale(1.05)"},onMouseOut:function(n){return n.target.style.transform="scale(1)"},"aria-label":"Open chat","aria-expanded":o},b),o&&y("div",{style:Object.entries(g.chatWindow).map(function(n){var e=W(n,2),t=e[0],o=e[1];return"".concat(t.replace(/([A-Z])/g,"-$1").toLowerCase(),": ").concat(o)}).join("; "),role:"dialog","aria-label":"Chat window"},[y("div",{style:"\n            background: ".concat(d,";\n            color: white;\n            padding: ").concat(_?"16px":"20px",";\n            display: flex;\n            justify-content: space-between;\n            align-items: center;\n            min-height: ").concat(_?"60px":"64px",";\n          ")},[y("div",{style:"display: flex; align-items: center; gap: 12px;"},[y("div",{style:"\n                width: ".concat(_?"32px":"36px",";\n                height: ").concat(_?"32px":"36px",";\n                background: rgba(255,255,255,0.2);\n                border-radius: 50%;\n                display: flex;\n                align-items: center;\n                justify-content: center;\n                font-size: ").concat(_?"16px":"18px",";\n              ")},b),y("h3",{style:"margin: 0; font-size: ".concat(_?"16px":"18px","; font-weight: 600;")},(null===(n=s.widgetSettings)||void 0===n?void 0:n.headerText)||"Chat with us!")]),y("button",{onClick:this.toggleChat,style:"\n              background: none;\n              border: none;\n              color: white;\n              font-size: ".concat(_?"24px":"28px",";\n              cursor: pointer;\n              padding: 8px;\n              border-radius: 50%;\n              width: ").concat(_?"40px":"44px",";\n              height: ").concat(_?"40px":"44px",";\n              display: flex;\n              align-items: center;\n              justify-content: center;\n              transition: background-color 0.2s ease;\n            "),onMouseOver:function(n){return n.target.style.backgroundColor="rgba(255,255,255,0.1)"},onMouseOut:function(n){return n.target.style.backgroundColor="transparent"},"aria-label":"Close chat"},"×")]),y("div",{id:"chat-instructions",style:"position: absolute; left: -10000px; width: 1px; height: 1px; overflow: hidden;"},"Press Enter to send message, Escape to close chat"),y("div",{style:Object.entries(g.messagesContainer).map(function(n){var e=W(n,2),t=e[0],o=e[1];return"".concat(t.replace(/([A-Z])/g,"-$1").toLowerCase(),": ").concat(o)}).join("; "),ref:function(n){n&&(n.scrollTop=n.scrollHeight)},role:"log","aria-live":"polite","aria-label":"Chat messages",className:"widget-messages"},[].concat(G(r.map(function(n){return y("div",{key:n.id,style:"\n                  align-self: ".concat("user"===n.sender?"flex-end":"flex-start",";\n                  background: ").concat("user"===n.sender?d:f,";\n                  color: ").concat("user"===n.sender?"white":p,";\n                  padding: ").concat(_?"10px 14px":"12px 16px",";\n                  border-radius: ").concat("user"===n.sender?g.messageUser.borderRadius:g.messageBot.borderRadius,";\n                  max-width: ").concat("onboarding-question"===n.type?"95%":"85%",";\n                  word-wrap: break-word;\n                  font-size: ").concat(_?"14px":"15px",";\n                  line-height: 1.4;\n                  box-shadow: 0 1px 2px rgba(0,0,0,0.1);\n                "),role:"article","aria-label":n.ariaLabel||"".concat("user"===n.sender?"Your message":"Bot message",": ").concat(n.text),className:"widget-message widget-message-".concat(n.sender)},[n.text,"onboarding-question"===n.type&&e.renderOnboardingQuestion(n)])})),[a&&y("div",{style:"\n              align-self: flex-start;\n              background: ".concat(f,";\n              color: ").concat(p,";\n              padding: ").concat(_?"10px 14px":"12px 16px",";\n                             border-radius: ").concat(g.messageBot.borderRadius,";\n              font-style: italic;\n              font-size: ").concat(_?"14px":"15px",";\n              display: flex;\n              align-items: center;\n              gap: 8px;\n            ")},[y("span",null,"Typing"),y("div",{style:"\n                display: flex;\n                gap: 2px;\n              "},[y("div",{style:"width: 4px; height: 4px; background: #64748b; border-radius: 50%; animation: pulse 1.5s ease-in-out infinite;"}),y("div",{style:"width: 4px; height: 4px; background: #64748b; border-radius: 50%; animation: pulse 1.5s ease-in-out 0.1s infinite;"}),y("div",{style:"width: 4px; height: 4px; background: #64748b; border-radius: 50%; animation: pulse 1.5s ease-in-out 0.2s infinite;"})])])])),!this.state.isInOnboardingMode&&y("div",{style:Object.entries(g.inputContainer).map(function(n){var e=W(n,2),t=e[0],o=e[1];return"".concat(t.replace(/([A-Z])/g,"-$1").toLowerCase(),": ").concat(o)}).join("; ")},[y("textarea",{value:i,onInput:function(n){return e.setState({inputValue:n.target.value})},onKeyPress:this.handleKeyPress,placeholder:"Type your message...",style:Object.entries(g.input).map(function(n){var e=W(n,2),t=e[0],o=e[1];return"".concat(t.replace(/([A-Z])/g,"-$1").toLowerCase(),": ").concat(o)}).join("; "),rows:1,"aria-label":"Type your message here","aria-describedby":"chat-instructions",ref:function(n){e.inputRef=n},className:"widget-input"}),y("button",{onClick:this.sendMessage,disabled:!i.trim(),style:"\n                ".concat(Object.entries(g.sendButton).map(function(n){var e=W(n,2),t=e[0],o=e[1];return"".concat(t.replace(/([A-Z])/g,"-$1").toLowerCase(),": ").concat(o)}).join("; "),";\n                background: ").concat(i.trim()?d:"#94a3b8",";\n                color: white;\n                opacity: ").concat(i.trim()?"1":"0.7",";\n              "),"aria-label":"Send message","aria-disabled":!i.trim(),className:"widget-button widget-send-button"},_?"→":"Send")])]))}}])}(k);const sn=an;var cn=t(591),ln=t.n(cn),un=t(740),dn=t.n(un),pn=t(128),fn=t.n(pn),bn=t(855),gn=t.n(bn),_n=t(51),hn=t.n(_n),mn=t(656),xn=t.n(mn),yn=t(598),vn={};return vn.styleTagTransform=xn(),vn.setAttributes=gn(),vn.insert=fn().bind(null,"head"),vn.domAPI=dn(),vn.insertStyleElement=hn(),ln()(yn.A,vn),yn.A&&yn.A.locals&&yn.A.locals,window.initViriatoChatbot=function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=document.getElementById("viriato-chatbot-container");e||((e=document.createElement("div")).id="viriato-chatbot-container",e.className="widget-container",e.style.cssText="\n      position: fixed;\n      bottom: 20px;\n      right: 20px;\n      z-index: 999999;\n      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Oxygen', 'Ubuntu', 'Cantarell', sans-serif;\n    ",n.theme&&(n.theme.primaryColor&&e.style.setProperty("--primary-color",n.theme.primaryColor),n.theme.fontFamily&&(e.style.fontFamily=n.theme.fontFamily)),document.body.appendChild(e)),function(n,e,t){var i,a,s,c;e==document&&(e=document.documentElement),r.__&&r.__(n,e),a=(i="function"==typeof t)?null:t&&t.__k||e.__k,s=[],c=[],D(e,n=(!i&&t||e).__k=y(w,null,[n]),a||b,b,e.namespaceURI,!i&&t?[t]:a?null:e.firstChild?o.call(e.childNodes):null,s,!i&&t?t:a?a.__e:e.firstChild,i,c),R(s,n,c)}(y(sn,{config:n}),e)},document.addEventListener("DOMContentLoaded",function(){var n=document.querySelector('script[src*="loader.js"]');if(n&&"false"!==n.dataset.autoInit){var e={clientId:n.dataset.clientId||"e6f484a3-c3cb-4e01-b8ce-a276f4b7355c",apiUrl:n.dataset.apiUrl||"https://chatbot1-eta.vercel.app",theme:{primaryColor:n.dataset.primaryColor,fontFamily:n.dataset.fontFamily}};window.initViriatoChatbot(e)}}),{}})());